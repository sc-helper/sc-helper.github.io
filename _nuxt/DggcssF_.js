import{_ as F,V}from"./dumwyoNJ.js";import{_ as k}from"./B5DZ-XTS.js";import{u as x}from"./DsLF3gj9.js";import{u as I}from"./gbi4j1YZ.js";import{V as M}from"./eEgoUiLz.js";import{d as R,c as P,a as _,o as w,b9 as S,ba as B,h as v,G as l,w as b,u as T,f as K,e as z,m as E,_ as G,v as H,bb as L,K as g,bc as y}from"./BUKm8-4E.js";const A=["innerHTML"],O=R({__name:"WarTooltip",props:{description:{},descriptionClass:{},disabled:{type:Boolean},src:{},coords:{},padding:{}},setup(t){const a=x("tooltipsDisabled","false"),r=I(),i=P(()=>{const o=t.disabled||a.value==="true";return r.value?!o:o});return(o,e)=>{const s=F,n=k;return w(),_("div",S(B(o.$attrs)),[v(s,null,{default:b(()=>[v(M,{location:"bottom center",activator:"parent","max-width":"350","close-on-content-click":"",transition:{component:T(V)},disabled:T(i),class:"tooltip-opacity"},{default:b(()=>[l(o.$slots,"tooltip:body",{},()=>[l(o.$slots,"tooltip",{},void 0,!0),t.description?(w(),_("div",{key:0,class:z([t.descriptionClass,"war-tooltip"]),innerHTML:t.description},null,10,A)):K("",!0),l(o.$slots,"postfix",{},void 0,!0)],!0)]),_:3},8,["transition","disabled"])]),_:3}),v(n,E({src:t.src,coords:t.coords,padding:t.padding,width:"100%"},o.$attrs),null,16,["src","coords","padding"]),l(o.$slots,"default",{},void 0,!0)],16)}}}),X=G(O,[["__scopeId","data-v-9e81cf30"]]),U=async(t,a,r)=>{const o=g[a][r];if(!o)throw y("unknown version");const e=await o();if(!(t in e.racesData))throw y("No race found");const s=await e.racesData[t](),n=(c,d)=>{if(!d||d===1){const[h,p,u,m]=s.icons[c]??[0,0,1,1];return{x:h,y:p,width:u,height:m}}return Array.from({length:d},(h,p)=>{const u=`${c}-${p+1}`,[m,$,C,D]=s.icons[u]??[0,0,1,1];return{x:m,y:$,width:C,height:D}})};return{raceData:s.data,raceIconsCoords:s.icons,iconProps:n,iconsSrc:e.racesIcons[t],version:e.version,versionType:e.versionType}},f=new Map,Y=async(t,a,r)=>{const i=H().currentRoute.value,o=a??i.params.versionType??"og";let e=r??(i.params.version||"latest");if(e==="latest"&&(e=L[o]),!g[o])throw y("unknown version type");const n=`${t}-${o}-${e}`;if(f.has(n))return f.get(n);const c=await U(t,o,e);return f.set(n,c),c};export{X as _,Y as u};
