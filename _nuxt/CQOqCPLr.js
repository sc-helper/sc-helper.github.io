import{_ as k,V as E}from"./CqPKT0tT.js";import{_ as F,u as $}from"./CkThscQR.js";import{u as M}from"./DllusCNA.js";import{u as P}from"./nQIAh7IA.js";import{e as x,c as b,h as w,j as y,aV as z,aW as B,b as m,Q as p,z as V,k as T,x as L,q as R,m as S,_ as j,at as A,i as g,aX as _,U as H,aY as K,f as W}from"./KSKVmKMd.js";import{V as q}from"./Dq7gU0XQ.js";const G=["innerHTML"],O=x({__name:"WarTooltip",props:{description:{},descriptionClass:{},disabled:{type:Boolean},src:{},coords:{},padding:{}},setup(a){const t=M("tooltipsDisabled","false"),s=P(),d=b(()=>{const o=a.disabled||t.value==="true";return s.value?!o:o});return(o,n)=>{const r=k,e=F;return y(),w("div",z(B(o.$attrs)),[m(r,null,{default:V(()=>[m(E,{location:"bottom center",activator:"parent","max-width":"350","close-on-content-click":"",transition:{component:T(q)},disabled:T(d),class:"tooltip-opacity"},{default:V(()=>[p(o.$slots,"tooltip:body",{},()=>[p(o.$slots,"tooltip",{},void 0,!0),o.description?(y(),w("div",{key:0,class:R([o.descriptionClass,"war-tooltip"]),innerHTML:o.description},null,10,G)):L("",!0),p(o.$slots,"postfix",{},void 0,!0)],!0)]),_:3},8,["transition","disabled"])]),_:3}),m(e,S({src:o.src,coords:o.coords,padding:o.padding,width:"100%"},o.$attrs),null,16,["src","coords","padding"]),p(o.$slots,"default",{},void 0,!0)],16)}}}),oo=j(O,[["__scopeId","data-v-9e81cf30"]]),Q=async(a,t)=>{const s=A(),[d]=[s.params.versionType].flat(),[o]=[s.params.version].flat(),n=g("fetchVersionType",d||"og"),r=g("fetchVersion",o||"latest"),{data:e,error:i}=await $(`data-file-${n}-${r}`,()=>{const u=H[n];if(!u)throw new Error("unknown version type");let c=r;c==="latest"&&(c=K[n]);const l=u[c];if(!l)throw new Error("unknown version");return l()},{watch:[()=>a,()=>t]});if(e.value,i.value)throw _(i.value??"");return e},eo=async a=>{var n,r;const t=await Q();if(!t.value)throw _("no versionIndex");const{data:s}=await $(`race-${t.value.version}-${a}`,()=>{const e=W(t);if(!e||!(a in e.racesData))throw new Error("No race found");return e.racesData[a]()}),d=b(()=>{var e;return(e=t.value)==null?void 0:e.racesIcons[a]});function o(e,i){var u;if(!i||i===1){const[c,l,v,f]=((u=s.value)==null?void 0:u.icons[e])??[0,0,1,1];return{x:c,y:l,width:v,height:f}}return Array.from({length:i},(c,l)=>{var h;const v=`${e}-${l+1}`,[f,C,D,I]=((h=s.value)==null?void 0:h.icons[v])??[0,0,1,1];return{x:f,y:C,width:D,height:I}})}if(!s.value)throw _("no data loaded");return{raceData:(n=s.value)==null?void 0:n.data,raceIconsCoords:(r=s.value)==null?void 0:r.icons,iconProps:o,iconsSrc:d.value,version:t.value.version,versionType:t.value.versionType}};export{oo as _,eo as u};
