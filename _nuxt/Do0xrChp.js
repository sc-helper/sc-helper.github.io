import{_ as F}from"./B1zxI0uM.js";import{_ as V}from"./BbASBJw6.js";import{u as k}from"./BJwC55Zu.js";import{u as x}from"./BWfoXkH-.js";import{V as I}from"./CtIvOGnp.js";import{d as M,c as R,a as _,o as w,b9 as P,ba as S,h as v,G as l,w as b,u as T,f as B,e as K,m as z,_ as E,v as G,bb as H,K as g,bc as y}from"./BtjzdiRD.js";import{V as L}from"./B0Ir0RvQ.js";const A=["innerHTML"],O=M({__name:"WarTooltip",props:{description:{},descriptionClass:{},disabled:{type:Boolean},src:{},coords:{},padding:{}},setup(t){const a=k("tooltipsDisabled","false"),r=x(),i=R(()=>{const o=t.disabled||a.value==="true";return r.value?!o:o});return(o,e)=>{const s=F,n=V;return w(),_("div",P(S(o.$attrs)),[v(s,null,{default:b(()=>[v(I,{location:"bottom center",activator:"parent","max-width":"350","close-on-content-click":"",transition:{component:T(L)},disabled:T(i),class:"tooltip-opacity"},{default:b(()=>[l(o.$slots,"tooltip:body",{},()=>[l(o.$slots,"tooltip",{},void 0,!0),t.description?(w(),_("div",{key:0,class:K([t.descriptionClass,"war-tooltip"]),innerHTML:t.description},null,10,A)):B("",!0),l(o.$slots,"postfix",{},void 0,!0)],!0)]),_:3},8,["transition","disabled"])]),_:3}),v(n,z({src:t.src,coords:t.coords,padding:t.padding,width:"100%"},o.$attrs),null,16,["src","coords","padding"]),l(o.$slots,"default",{},void 0,!0)],16)}}}),Y=E(O,[["__scopeId","data-v-9e81cf30"]]),U=async(t,a,r)=>{const o=g[a][r];if(!o)throw y("unknown version");const e=await o();if(!(t in e.racesData))throw y("No race found");const s=await e.racesData[t](),n=(c,d)=>{if(!d||d===1){const[h,p,u,m]=s.icons[c]??[0,0,1,1];return{x:h,y:p,width:u,height:m}}return Array.from({length:d},(h,p)=>{const u=`${c}-${p+1}`,[m,$,C,D]=s.icons[u]??[0,0,1,1];return{x:m,y:$,width:C,height:D}})};return{raceData:s.data,raceIconsCoords:s.icons,iconProps:n,iconsSrc:e.racesIcons[t],version:e.version,versionType:e.versionType}},f=new Map,Z=async(t,a,r)=>{const i=G().currentRoute.value,o=a??i.params.versionType??"og";let e=r??(i.params.version||"latest");if(e==="latest"&&(e=H[o]),!g[o])throw y("unknown version type");const n=`${t}-${o}-${e}`;if(f.has(n))return f.get(n);const c=await U(t,o,e);return f.set(n,c),c};export{Y as _,Z as u};
