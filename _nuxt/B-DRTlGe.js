import{u as je,_ as Ae}from"./BofSAEUc.js";import{_ as ke}from"./DED3OAZM.js";import{u as J}from"./D3hjVo6J.js";import{q as Se,s as Pe,v as qe,x as Le,c as I,y as Be,e as F,m as fe,z as Ie,A as me,B as Ce,C as De,D,E as B,l as Te,w as Ve,G as We,H as Fe,d as ze,I as He,g as j,f as k,b as ve,o as A,u as a,J as pe,K as Ue,F as L,j as U,L as W,t as Xe,_ as Ge}from"./Bp0GSeUo.js";import{r as Je,a as Ke,g as Ye}from"./BZutTt4a.js";import{m as Qe}from"./DbYZnSlv.js";import{u as Ze}from"./DH0F7ePs.js";import{a as et,u as tt}from"./Uv6GIUdz.js";import{u as nt,V as he,a as be,m as rt,b as ot}from"./DQv1NJLv.js";import"./DwsBwtqk.js";import"./BrCy4PRL.js";const st=Pe({...rt(),...Ie(ot(),["inline"])},"VCheckbox"),xe=Se()({name:"VCheckbox",inheritAttrs:!1,props:st(),emits:{"update:modelValue":i=>!0,"update:focused":i=>!0},setup(i,m){let{attrs:c,slots:b}=m;const _=qe(i,"modelValue"),{isFocused:V,focus:R,blur:v}=nt(i),y=Le(),o=I(()=>i.id||`checkbox-${y}`);return et(()=>{const[C,w]=Be(c),O=he.filterProps(i),s=be.filterProps(i);return F(he,fe({class:["v-checkbox",i.class]},C,O,{modelValue:_.value,"onUpdate:modelValue":r=>_.value=r,id:o.value,focused:V.value,style:i.style}),{...b,default:r=>{let{id:p,messagesId:h,isDisabled:E,isReadonly:T,isValid:S}=r;return F(be,fe(s,{id:p.value,"aria-describedby":h.value,disabled:E.value,readonly:T.value},w,{error:S.value===!1,modelValue:_.value,"onUpdate:modelValue":P=>_.value=P,onFocus:R,onBlur:v}),b)}})}),{}}});var ne,ge;function we(){if(ge)return ne;ge=1;function i(m){var c=typeof m;return m!=null&&(c=="object"||c=="function")}return ne=i,ne}var re,_e;function at(){if(_e)return re;_e=1;var i=Je(),m=function(){return i.Date.now()};return re=m,re}var oe,ye;function it(){if(ye)return oe;ye=1;var i=/\s/;function m(c){for(var b=c.length;b--&&i.test(c.charAt(b)););return b}return oe=m,oe}var se,$e;function lt(){if($e)return se;$e=1;var i=it(),m=/^\s+/;function c(b){return b&&b.slice(0,i(b)+1).replace(m,"")}return se=c,se}var ae,Ne;function ut(){if(Ne)return ae;Ne=1;var i=lt(),m=we(),c=Ke(),b=NaN,_=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,R=/^0o[0-7]+$/i,v=parseInt;function y(o){if(typeof o=="number")return o;if(c(o))return b;if(m(o)){var C=typeof o.valueOf=="function"?o.valueOf():o;o=m(C)?C+"":C}if(typeof o!="string")return o===0?o:+o;o=i(o);var w=V.test(o);return w||R.test(o)?v(o.slice(2),w?2:8):_.test(o)?b:+o}return ae=y,ae}var ie,Me;function ct(){if(Me)return ie;Me=1;var i=we(),m=at(),c=ut(),b="Expected a function",_=Math.max,V=Math.min;function R(v,y,o){var C,w,O,s,r,p,h=0,E=!1,T=!1,S=!0;if(typeof v!="function")throw new TypeError(b);y=c(y)||0,i(o)&&(E=!!o.leading,T="maxWait"in o,O=T?_(c(o.maxWait)||0,y):O,S="trailing"in o?!!o.trailing:S);function P(t){var f=C,g=w;return C=w=void 0,h=t,s=v.apply(g,f),s}function M(t){return h=t,r=setTimeout(l,y),E?P(t):s}function $(t){var f=t-p,g=t-h,x=y-f;return T?V(x,O-g):x}function q(t){var f=t-p,g=t-h;return p===void 0||f>=y||f<0||T&&g>=O}function l(){var t=m();if(q(t))return u(t);r=setTimeout(l,$(t))}function u(t){return r=void 0,S&&C?P(t):(C=w=void 0,s)}function d(){r!==void 0&&clearTimeout(r),h=0,C=p=w=r=void 0}function e(){return r===void 0?s:u(m())}function n(){var t=m(),f=q(t);if(C=arguments,w=this,p=t,f){if(r===void 0)return M(p);if(T)return clearTimeout(r),r=setTimeout(l,y),P(p)}return r===void 0&&(r=setTimeout(l,y)),s}return n.cancel=d,n.flush=e,n}return ie=R,ie}var dt=ct();const ft=Ye(dt),le=i=>i?"$el"in i?i.$el:i:null,mt=({combineMap:i,colorsCount:m,stroke:c=4,excludeItems:b})=>{const _=me({}),V=me({}),R=Ce(null),v=De(),y=I(()=>Array.from({length:D(m)},(s,r)=>`hsl(${360/D(m)*r} 30% 40%)`)),o=ft(()=>{const s=D(i),r=D(V),p=D(b),h=Qe(D(_),e=>{if(e)return{x:e.offsetLeft,y:e.offsetTop,w:e.offsetWidth,h:e.offsetHeight}}),E=Object.fromEntries(Object.values(h).filter(B).map(({y:e})=>[e,c*3])),T=Math.max(...Object.values(h).filter(B).map(({h:e})=>e)),S=Object.values(E).reduce((e,n,t,f)=>t?Math.min(Math.abs(Number(n)-Number(f[t-1])-T),e):e,1e4),P=e=>{let t=E[e]+c*3;return t>S-c&&(t=c),E[e]=t,t},M={},$=Math.min(...Object.values(h).filter(B).map(({w:e})=>e)),q=e=>{if(!(e in M))return M[e]=$/4,M[e];let n=M[e]+$/4;return n>$&&(n=$/4),M[e]=n,n},l={},u=e=>{if(!(e in l))return l[e]=0,y.value[0];let n=l[e]+1;return n>y.value.length-1&&(n=0),l[e]=n,y.value[n]};let d=-1;for(const e in h){if(p!=null&&p.includes(e))continue;d--;const n=h[e];if(!n)continue;const{x:t,y:f,w:g,h:x}=n,z=u(f),H=r[`${e}-connect-inner`];if(!H)continue;const ue=Object.fromEntries(s[e].flat().map(N=>[N,r[`${e}-connect-${N}`]])),K=Object.values(ue).filter(B);if(K.length!==s[e].flat().length)continue;const Y=Object.fromEntries(s[e].flat().map(N=>[N,r[`${e}-child-${N}`]])),ce=Object.values(Y).filter(B);if(ce.length!==s[e].flat().length)continue;ce.concat(K).concat(H).forEach(({style:N})=>{N.borderWidth=`${c/2}px`,N.borderColor=z,N.zIndex=`${d}`});const X=f+x+c+P(f);K.forEach(({style:N})=>{N.top=`${X}px`});const Q=t+g/2-c/2;H.style.left=`${Q}px`,H.style.top=`${f+x}px`,H.style.height=`${X-f-x}px`;for(const N in Y){if(p!=null&&p.includes(N))continue;const G=Y[N],Z=ue[N],de=h[N];if(!de||!G||!Z)continue;const{x:ee,y:Oe,w:Ee}=de,te=t===ee?ee+Ee/2-c/2:ee+q(N);G.style.left=`${te}px`,G.style.top=`${X+c/2}px`,G.style.height=`${Oe-X}px`;const Re=Math.min(Q,te);Z.style.left=`${Re}px`,Z.style.width=`${Math.abs(Q-te)+c*.75}px`}}},200);return Te(()=>{var r;if(v.value=new ResizeObserver(()=>{o()}),!R.value)return;v.value.observe(R.value);const s=Object.values(_).filter(B).at(0);s&&((r=v.value)==null||r.observe(s))}),Ve(R,(s,r)=>{var p,h,E;if(r&&((p=v.value)==null||p.unobserve(r)),s){(h=v.value)==null||h.observe(s);const T=Object.values(_).filter(B).at(0);T&&((E=v.value)==null||E.observe(T)),Fe(()=>o.flush())}}),We(()=>{var s;(s=v.value)==null||s.disconnect()}),{containerRef:s=>{R.value=le(s)},itemRef:s=>r=>{_[s]=le(r)},boundRef:(s,r,p)=>h=>{V[`${s}-${r}-${p}`]=le(h)}}},vt={class:"d-flex align-center justify-end"},pt=["onClick","onMouseenter"],ht=["innerHTML"],bt=["data-debug"],xt=["data-debug"],gt=["data-debug"],_t=ze({__name:"artifacts",async setup(i){let m,c;const b=new Intl.Collator("en").compare,_=J("artiShowPath","false"),V=J("artiDisabledTooltips","false"),R=J("tooltipsDisabled","false"),{raceData:v,iconProps:y,iconsSrc:o,version:C}=([m,c]=He(()=>je("artifacts")),m=await m,c(),m),w=J("iconSize"),O=I(()=>(v==null?void 0:v.items)??[]),s=I(()=>{const l=O.value.filter(({level:d,id:e})=>d>1&&!(e in v.combineMap)).map(({id:d})=>d),u=Object.entries(v.combineMap).filter(([,d])=>d.flat().every(e=>l.includes(e))).map(([d])=>d);return l.concat(u).map(d=>O.value.find(e=>e.id===d)).filter(B)}),r=I(()=>Math.max(...O.value.map(({level:l})=>l),0)),p=I(()=>Math.max(...O.value.reduce((l,{level:u})=>(l[u]||(l[u]=0),++l[u],l),[0]))),{boundRef:h,containerRef:E,itemRef:T}=mt({colorsCount:p,combineMap:v.combineMap,stroke:6}),S=I(()=>{const l=O.value.filter(({id:d})=>!s.value.some(e=>e.id===d)).sort(({level:d,hotkey:e},{level:n,hotkey:t})=>n!==d?n-d:b(e,t)),u=Array();do{const d=l.findIndex(({level:t},f,g)=>{var x;return((x=g[f+1])==null?void 0:x.level)!==t});if(d<0)continue;const e=l.splice(0,d+1),n=u[u.length-1];if(!n){u.push(e);continue}e.sort(({id:t})=>s.value.some(f=>(f==null?void 0:f.id)===t)?1:v.combineMap[n[0].id][0].includes(t)?-1:0),u.push(e)}while(l.length);return u.flat()}),P=I(()=>({gridTemplateColumns:`repeat(${p.value+1}, 1fr)`,gridTemplateRows:`repeat(${r.value}, 1fr)`})),M=Ze(),$=Ce(Array()),q=l=>{const u=Array(),d=(e,n,t)=>{if(u.includes(e))return;u.push(e);const f=v.combineMap[e];f&&!t&&f.forEach(g=>g.forEach(x=>d(x,!0,!1))),n||Object.entries(v.combineMap).filter(([,g])=>g.some(x=>x.includes(e))).forEach(([g])=>d(g,!1,!0))};d(l,!1,!1),$.value=u};return Ve(M,l=>{l&&q(l)}),Te(()=>{M.value&&q(M.value)}),tt({title:`Artifacts v${C}`,description:"Artifacts of Survival Chaos: all heroes combined artifacts"}),(l,u)=>{const d=Ae,e=ke;return A(),j("div",null,[u[3]||(u[3]=k("div",{class:"text-center d-none"},[k("h1",{class:"text-h2 font-bold title mb-6"},"Artifacts")],-1)),F(e,{title:""},{default:ve(()=>[k("div",vt,[F(xe,{label:"Disable tooltips","true-value":"true","false-value":"false",modelValue:a(V),"onUpdate:modelValue":u[0]||(u[0]=n=>pe(V)?V.value=n:null),class:"mx-4"},null,8,["modelValue"]),F(xe,{label:"Always show path","true-value":"true","false-value":"false",modelValue:a(_),"onUpdate:modelValue":u[1]||(u[1]=n=>pe(_)?_.value=n:null)},null,8,["modelValue"])]),k("div",{class:"container",ref:a(E)},[k("div",{class:"items-container",style:Ue(a(P))},[(A(!0),j(L,null,U(a(r),n=>(A(),j("div",{class:W([`level${a(r)+1-n}`,"text-h5","text-no-wrap"])}," Lvl "+Xe(n),3))),256)),(A(!0),j(L,null,U(a(S).concat(a(s)),n=>(A(),j("div",{class:W([`level${a(r)+1-n.level}`,"cursor-pointer",{depressed:a($).length&&!a($).includes(n.id),selected:a(M)===n.id}]),ref_for:!0,ref:a(T)(n.id),onClick:()=>M.value=a(M)===n.id?void 0:n.id,onMouseenter:()=>!a(M)&&q(n.id),onMouseout:u[2]||(u[2]=()=>!a(M)&&($.value=[]))},[F(d,{src:a(o),description:n.description,coords:a(y)(n.id),disabled:a(V)==="true"||a(R)==="true",width:+a(w)*.75},{tooltip:ve(()=>[k("div",{innerHTML:n.name},null,8,ht)]),_:2},1032,["src","description","coords","disabled","width"])],42,pt))),256))],4),k("div",{class:W(["path-container",{hidden:a(_)!=="true"&&!a($).length}])},[(A(!0),j(L,null,U(a(v).combineMap,(n,t)=>(A(),j(L,{key:`node-${t}`},[k("div",{ref_for:!0,ref:a(h)(t,"connect","inner"),"data-debug":`${t}-connect-inner`,class:W({depressed:a($).length&&!a($).includes(t),pathNode:!0})},null,10,bt),(A(!0),j(L,null,U(n,(f,g)=>(A(),j(L,{key:`node-${t}-${g}`},[(A(!0),j(L,null,U(f,x=>(A(),j(L,null,[k("div",{ref_for:!0,ref:a(h)(t,"connect",x),"data-debug":`${t}-connect-${x}`,class:W({depressed:a($).length&&![t,x].every(z=>a($).includes(z)),pathNode:!0,optionalNode:g!==0})},null,10,xt),k("div",{ref_for:!0,ref:a(h)(t,"child",x),"data-debug":`${t}-${x}`,class:W({depressed:a($).length&&![t,x].every(z=>a($).includes(z)),pathNode:!0,optionalNode:g!==0})},null,10,gt)],64))),256))],64))),128))],64))),128))],2)],512)]),_:1})])}}}),At=Ge(_t,[["__scopeId","data-v-d86b3fdd"]]);export{At as default};
