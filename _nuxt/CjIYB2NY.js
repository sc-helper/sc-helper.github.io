import{_ as Ue}from"./DIuOH_Yq.js";import{u as U,_ as be,a as ie}from"./cBo0o-mq.js";import{q as Z,s as X,S as j,e as n,al as he,am as Be,c as k,an as Oe,a6 as ve,T as W,a1 as Ae,a3 as Fe,R as I,a5 as Ge,ao as ze,d as T,I as B,g as V,o as y,ap as _e,b as o,F as H,j as F,u as s,a as C,f as h,L as M,i as N,t as P,_ as G,B as L,E as Y,r as q,ah as S,J as ee,aq as We,ar as qe,D as ge,m as xe,w as ke,as as Ke,h as z,at as Ze,au as Je,av as Qe,aw as we,ax as Xe,K as ce,ay as Ye,ak as et}from"./BKVwyF26.js";import{u as Ce}from"./BXR-zTup.js";import{b as tt,c as st,V as nt,a as oe}from"./BXeOSTaW.js";import{a as Pe,m as Ve,b as at,c as ot,V as Se}from"./DK0vIMHG.js";import{a as te,_ as R}from"./CPCnzUCg.js";import{u as re}from"./Dw4VnXae.js";import{a as E,V as ye}from"./DLhbbjCC.js";import{V as lt,I as it,D as ct}from"./ROpKKxJa.js";import{a as se,g as de,R as rt,j as $e,n as dt,o as Te,V as Ie,p as ut,q as mt,r as pt,b as De,d as ft,e as vt,u as _t,s as yt}from"./DzMKgPA8.js";import{u as bt,m as ht,_ as je,V as Me}from"./CrpMfmkf.js";import{h as Re,_ as O}from"./ltQtR1c2.js";import{u as gt}from"./Bw2KR2Ua.js";import{V as xt}from"./ynKbcfCC.js";import{_ as J}from"./mNOP9fyt.js";import"./o2rTPMl7.js";/* empty css        */const K=Symbol.for("vuetify:v-expansion-panel"),He=X({...de(),...ht()},"VExpansionPanelText"),$=Z()({name:"VExpansionPanelText",props:He(),setup(e,a){let{slots:r}=a;const c=j(K);if(!c)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:u,onAfterLeave:t}=bt(e,c.isSelected);return se(()=>n(lt,{onAfterLeave:t},{default:()=>{var i;return[he(n("div",{class:["v-expansion-panel-text",e.class],style:e.style},[r.default&&u.value&&n("div",{class:"v-expansion-panel-text__wrapper"},[(i=r.default)==null?void 0:i.call(r)])]),[[Be,c.isSelected.value]])]}})),{}}}),Ee=X({color:String,expandIcon:{type:ve,default:"$expand"},collapseIcon:{type:ve,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...de(),...ut()},"VExpansionPanelTitle"),le=Z()({name:"VExpansionPanelTitle",directives:{Ripple:rt},props:Ee(),setup(e,a){let{slots:r}=a;const c=j(K);if(!c)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:u,backgroundColorStyles:t}=$e(e,"color"),{dimensionStyles:i}=dt(e),d=k(()=>({collapseIcon:e.collapseIcon,disabled:c.disabled.value,expanded:c.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),_=k(()=>c.isSelected.value?e.collapseIcon:e.expandIcon);return se(()=>{var g;return he(n("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":c.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},u.value,e.class],style:[t.value,i.value,e.style],type:"button",tabindex:c.disabled.value?-1:void 0,disabled:c.disabled.value,"aria-expanded":c.isSelected.value,onClick:e.readonly?void 0:c.toggle},[n("span",{class:"v-expansion-panel-title__overlay"},null),(g=r.default)==null?void 0:g.call(r,d.value),!e.hideActions&&n(Te,{defaults:{VIcon:{icon:_.value}}},{default:()=>{var m;return[n("span",{class:"v-expansion-panel-title__icon"},[((m=r.actions)==null?void 0:m.call(r,d.value))??n(Ie,null,null)])]}})]),[[Oe("ripple"),e.ripple]])}),{}}}),Le=X({title:String,text:String,bgColor:String,...vt(),...Ve(),...ft(),...De(),...Ee(),...He()},"VExpansionPanel"),D=Z()({name:"VExpansionPanel",props:Le(),emits:{"group:selected":e=>!0},setup(e,a){let{slots:r}=a;const c=Pe(e,K),{backgroundColorClasses:u,backgroundColorStyles:t}=$e(e,"bgColor"),{elevationClasses:i}=mt(e),{roundedClasses:d}=pt(e),_=k(()=>(c==null?void 0:c.disabled.value)||e.disabled),g=k(()=>c.group.items.value.reduce((f,p,w)=>(c.group.selected.value.includes(p.id)&&f.push(w),f),[])),m=k(()=>{const f=c.group.items.value.findIndex(p=>p.id===c.id);return!c.isSelected.value&&g.value.some(p=>p-f===1)}),l=k(()=>{const f=c.group.items.value.findIndex(p=>p.id===c.id);return!c.isSelected.value&&g.value.some(p=>p-f===-1)});return W(K,c),se(()=>{const f=!!(r.text||e.text),p=!!(r.title||e.title),w=le.filterProps(e),x=$.filterProps(e);return n(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":c.isSelected.value,"v-expansion-panel--before-active":m.value,"v-expansion-panel--after-active":l.value,"v-expansion-panel--disabled":_.value},d.value,u.value,e.class],style:[t.value,e.style]},{default:()=>[n("div",{class:["v-expansion-panel__shadow",...i.value]},null),n(Te,{defaults:{VExpansionPanelTitle:{...w},VExpansionPanelText:{...x}}},{default:()=>{var v;return[p&&n(le,{key:"title"},{default:()=>[r.title?r.title():e.title]}),f&&n($,{key:"text"},{default:()=>[r.text?r.text():e.text]}),(v=r.default)==null?void 0:v.call(r)]}})]})}),{groupItem:c}}}),kt=["default","accordion","inset","popout"],wt=X({flat:Boolean,...ot(),...ze(Le(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Ge(),...de(),...De(),variant:{type:String,default:"default",validator:e=>kt.includes(e)}},"VExpansionPanels"),ue=Z()({name:"VExpansionPanels",props:wt(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:r}=a;const{next:c,prev:u}=at(e,K),{themeClasses:t}=Ae(e),i=k(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return Fe({VExpansionPanel:{bgColor:I(e,"bgColor"),collapseIcon:I(e,"collapseIcon"),color:I(e,"color"),eager:I(e,"eager"),elevation:I(e,"elevation"),expandIcon:I(e,"expandIcon"),focusable:I(e,"focusable"),hideActions:I(e,"hideActions"),readonly:I(e,"readonly"),ripple:I(e,"ripple"),rounded:I(e,"rounded"),static:I(e,"static")}}),se(()=>n(e.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},t.value,i.value,e.class],style:e.style},{default:()=>{var d;return[(d=r.default)==null?void 0:d.call(r,{prev:u,next:c})]}})),{next:c,prev:u}}}),Ct=Z()({name:"VSlideGroupItem",props:Ve(),emits:{"group:selected":e=>!0},setup(e,a){let{slots:r}=a;const c=Pe(e,tt);return()=>{var u;return(u=r.default)==null?void 0:u.call(r,{isSelected:c.isSelected.value,select:c.select,toggle:c.toggle,selectedClass:c.selectedClass.value})}}}),Pt=["innerHTML"],Vt=T({__name:"RaceSelectRibbon",async setup(e){let a,r;const c=Ce("iconSize"),{raceData:u,iconProps:t,iconsSrc:i}=([a,r]=B(()=>U("races")),a=await a,r(),a),d=k(()=>Object.values(u).flat());return(_,g)=>{const m=Ue,l=be;return y(),V("div",null,[n(st,{"model-value":(_._.provides[_e]||_.$route).params.race,"center-active":"","show-arrows":""},{default:o(()=>[(y(!0),V(H,null,F(s(d),f=>(y(),C(Ct,{value:f.key,key:f.key},{default:o(({isSelected:p})=>[h("div",{class:M(["race-wrapper",{selected:p}])},[n(l,{coords:s(t)(f.id),src:s(i),description:"",width:s(c)},{tooltip:o(()=>[h("div",{innerHTML:f.name},null,8,Pt)]),default:o(()=>[n(m,{to:{name:"RaceIndex",params:{...(_._.provides[_e]||_.$route).params,race:f.key}}},{default:o(()=>[N(P(f.name),1)]),_:2},1032,["to"])]),_:2},1032,["coords","src","width"])],2)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value"])])}}}),St=G(Vt,[["__scopeId","data-v-f1152851"]]),$t={key:0,class:"d-flex row-warp align-center my-1"},Tt={class:"ml-2 mt-n1"},It={class:"ml-2 mt-n1"},Dt=["innerHTML"],jt={class:"text-white bg-red mx-2 rounded-lg"},Mt={class:"text-white bg-blue mx-2 rounded-lg"},Rt={class:"d-flex align-center"},Ht={class:"ml-2 mt-n1"},Et={class:"d-flex align-center"},Lt={class:"ml-2 mt-n1"},Nt={class:"upgrades-wrapper"},Ut=T({__name:"DetailsUnit",props:{item:{}},async setup(e){let a,r;const c=L(["characteristics","upgrades","items"]),[u,{gold:t,bounty:i,range:d,attackSpeed:_}]=re(),g=j("raceName"),{iconProps:m,iconsSrc:l}=([a,r]=B(()=>U(g)),a=await a,r(),a),f=j("objFinder"),p=k(()=>!isNaN(Number(e.item.hpReg))),w=k(()=>!isNaN(Number(e.item.mpReg))),x=k(()=>{var v;return(v=e.item.upgrades)==null?void 0:v.map(b=>f("upgrade",b)).filter(Y)});return(v,b)=>{var fe;const Q=be,pe=te,Ne=R;return y(),V(H,null,[q(v.$slots,"fullname",{},void 0,!0),(fe=v.item.tags)!=null&&fe.length?(y(),V("div",$t,[b[1]||(b[1]=h("div",{class:"text-subtitle-2"},"Tags:",-1)),(y(!0),V(H,null,F(v.item.tags,A=>(y(),C(nt,{class:"ma-1 mr-0",density:"compact",size:"small"},{default:o(()=>[N(P(A),1)]),_:2},1024))),256))])):S("",!0),n(ye,{class:"my-1"},{default:o(()=>[n(E,{cols:"6",class:"d-flex align-center py-0"},{default:o(()=>[n(Q,{src:s(u),coords:s(t),width:"32",description:"Cost"},null,8,["src","coords"]),h("span",Tt,P(v.item.cost),1)]),_:1}),n(E,{cols:"6",class:"d-flex align-center py-0"},{default:o(()=>[n(Q,{src:s(u),coords:s(i),width:"32",description:"Kill bounty"},null,8,["src","coords"]),h("span",It,P(v.item.bounty),1)]),_:1})]),_:1}),n(ue,{elevation:"0",static:"",tile:"",multiple:"",modelValue:s(c),"onUpdate:modelValue":b[0]||(b[0]=A=>ee(c)?c.value=A:null)},{default:o(()=>{var A;return[v.item.description?(y(),C(D,{key:0,title:"Description",value:"description"},{default:o(()=>[n($,null,{default:o(()=>[h("div",{class:"text-body-2",innerHTML:v.item.description},null,8,Dt)]),_:1})]),_:1})):S("",!0),q(v.$slots,"heroItems",{},void 0,!0),n(D,{title:"Characteristics",value:"characteristics"},{default:o(()=>[n($,null,{default:o(()=>[n(ye,{class:"my-1"},{default:o(()=>[n(E,{cols:"6",class:"text-center pt-0"},{default:o(()=>[h("div",jt,[h("b",null,P(v.item.hp),1),s(p)?(y(),V(H,{key:0},[N(" +"+P(v.item.hpReg)+"/sec",1)],64)):S("",!0)])]),_:1}),n(E,{cols:"6",class:"text-center pt-0"},{default:o(()=>[h("div",Mt,[h("b",null,P(v.item.mp),1),s(w)?(y(),V(H,{key:0},[N(" +"+P(v.item.mpReg)+"/sec",1)],64)):S("",!0)])]),_:1}),n(E,{cols:"6",class:"py-0"},{default:o(()=>[n(pe,{type:v.item.atkType,value:v.item.atk},null,8,["type","value"]),h("div",Rt,[n(Q,{src:s(u),coords:s(d),width:"32",description:"Attack range"},null,8,["src","coords"]),h("span",Ht,P(v.item.atkRange)+P(v.item.weaponType==="normal"?" (melee)":""),1)]),h("div",Et,[n(Q,{src:s(u),coords:s(_),width:"32",description:"Attack speed"},null,8,["src","coords"]),h("span",Lt,P(v.item.atkSpeed),1)])]),_:1}),n(E,{cols:"6",class:"py-0"},{default:o(()=>[n(pe,{type:v.item.defType,value:v.item.def,"is-defend":""},null,8,["type","value"])]),_:1}),q(v.$slots,"attributes",{},void 0,!0)]),_:3})]),_:3})]),_:3}),(A=s(x))!=null&&A.length?(y(),C(D,{key:1,title:"Upgrades used",value:"upgrades"},{default:o(()=>[n($,null,{default:o(()=>[h("div",Nt,[(y(!0),V(H,null,F(s(x),ae=>(y(),C(Ne,{item:ae,src:s(l),coords:s(m)(ae.id,ae.iconsCount)},null,8,["item","src","coords"]))),256))])]),_:1})]),_:1})):S("",!0)]}),_:3},8,["modelValue"])],64)}}}),ne=G(Ut,[["__scopeId","data-v-f314cd24"]]),Bt=["innerHTML"],Ot={class:"d-flex justify-center"},At=T({__name:"DetailsHero",props:{item:{}},async setup(e){let a,r;const c=j("raceName"),{iconProps:u,iconsSrc:t}=([a,r]=B(()=>U(c)),a=await a,r(),a),[i,{str:d,int:_,agi:g}]=re(),m=k(()=>{if(!e.item.items)return[];const l=e.item.items.map(({level:p})=>p);if(!(l!=null&&l.length))return[];const f=l.filter(We).sort((p,w)=>p-w).reduce((p,w,x)=>(p[w]=Re[x],p),{});return e.item.items.map(p=>({...p,hotkey:f[p.level]}))});return(l,f)=>{const p=ie,w=R,x=O,v=ne;return y(),C(v,{item:l.item},{fullname:o(()=>[h("div",{innerHTML:l.item.fullName,class:"text-center text-subtitle-1"},null,8,Bt)]),attributes:o(()=>[n(E,{cols:"4",class:"text-center pb-0"},{default:o(()=>[n(p,{width:"32",src:s(i),coords:s(d),padding:[0,8,8,0]},null,8,["src","coords"]),h("div",{class:M({"text-yellow":l.item.stat==="str","font-bold":l.item.stat==="str"})},P(l.item.str)+"+"+P(l.item.strLvl),3)]),_:1}),n(E,{cols:"4",class:"text-center pb-0"},{default:o(()=>[n(p,{width:"32",src:s(i),coords:s(g),padding:[0,8,8,0]},null,8,["src","coords"]),h("div",{class:M({"text-yellow":l.item.stat==="agi","font-bold":l.item.stat==="agi"})},P(l.item.agi)+"+"+P(l.item.agiLvl),3)]),_:1}),n(E,{cols:"4",class:"text-center pb-0"},{default:o(()=>[n(p,{width:"32",src:s(i),coords:s(_),padding:[0,8,8,0]},null,8,["src","coords"]),h("div",{class:M({"text-yellow":l.item.stat==="int","font-bold":l.item.stat==="int"})},P(l.item.int)+"+"+P(l.item.intLvl),3)]),_:1})]),heroItems:o(()=>[s(m).length?(y(),C(D,{key:0,title:"Hero items",value:"items"},{default:o(()=>[n($,null,{default:o(()=>[h("div",Ot,[n(x,{items:s(m),size:.75},{default:o(({item:b})=>[n(w,{src:s(t),coords:s(u)(b.id),item:b},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):S("",!0)]),_:1},8,["item"])}}}),Ft=G(At,[["__scopeId","data-v-dc1de915"]]),Gt=["innerHTML"],zt={class:"d-flex justify-center"},Wt={class:"d-flex justify-center"},qt=T({__name:"DetailsUpgrade",props:{item:{}},async setup(e){let a,r;const c=L(["spells","summons","affects"]),u=j("raceName"),{raceData:t,iconProps:i,iconsSrc:d}=([a,r]=B(()=>U(u)),a=await a,r(),a),_=k(()=>{var l;return((l=e.item.spells)==null?void 0:l.map(f=>f.summonUnit).flat().filter(Y).filter(qe))??[]}),g=k(()=>e.item.spells),m=k(()=>{const l=Object.values(t.units).filter(({upgrades:p})=>p==null?void 0:p.includes(e.item.id)),f=t.bonuses.map(({units:p})=>p??[]).flat().filter(({upgrades:p})=>p==null?void 0:p.includes(e.item.id)).map(p=>{var x;const w=((x=t.bonuses.find(({units:v})=>v==null?void 0:v.some(({id:b})=>b===p.id)))==null?void 0:x.id)??"";return{...p,id:w}});return[...l,...f]});return(l,f)=>{const p=R,w=O,x=ne;return y(),C(ue,{elevation:"0",static:"",tile:"",multiple:"",modelValue:s(c),"onUpdate:modelValue":f[0]||(f[0]=v=>ee(c)?c.value=v:null)},{default:o(()=>{var v;return[l.item.description?(y(),C(D,{key:0,title:"Description",value:"description"},{default:o(()=>[n($,null,{default:o(()=>[h("div",{class:"text-body-2",innerHTML:l.item.description},null,8,Gt)]),_:1})]),_:1})):S("",!0),(v=s(g))!=null&&v.length?(y(),C(D,{key:1,title:"Spells",value:"spells"},{default:o(()=>[n($,null,{default:o(()=>[h("div",zt,[n(w,{items:s(g),"disable-details":"","skip-hotkey":""},{default:o(({item:b})=>[n(p,{item:b,src:s(d),coords:s(i)(b.id,b.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):S("",!0),(y(!0),V(H,null,F(s(_),b=>(y(),C(D,{title:`Summon: ${b.name}`,value:`summon-${b.id}`},{default:o(()=>[n($,null,{default:o(()=>[n(x,{item:b},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),s(m).length?(y(),C(D,{key:2,title:"Affects",value:"affects"},{default:o(()=>[n($,null,{default:o(()=>[h("div",Wt,[n(w,{items:s(m),"disable-details":"","skip-hotkey":""},{default:o(({item:b})=>[n(p,{item:b,src:s(d),coords:s(i)(b.id,b.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):S("",!0)]}),_:1},8,["modelValue"])}}}),Kt=T({__name:"DetailsSpell",props:{item:{}},setup(e){return(a,r)=>(y(),V("div"))}}),Zt={class:"cost"},Jt=T({__name:"CombineCost",props:{items:{},count:{}},setup(e){const[a,{gold:r}]=re(),c=k(()=>ge(e.items).reduce((u,{cost:t})=>{var i;return u+((i=t??[])==null?void 0:i.slice(0,e.count).reduce((d,_)=>d+(_??0),0))},0));return(u,t)=>{const i=ie,d=je;return y(),C(d,null,{default:o(()=>[n(Me,{location:"top"},{activator:o(({props:_})=>[h("div",xe({class:"d-flex align-center"},_),[n(i,{src:s(a),coords:s(r),width:"16"},null,8,["src","coords"]),h("span",Zt,P(s(c)),1)],16)]),default:o(()=>[q(u.$slots,"default",{},()=>[t[0]||(t[0]=N("Total cost"))],!0)]),_:3})]),_:3})}}}),me=G(Jt,[["__scopeId","data-v-1bade672"]]),Qt=["innerHTML"],Xt={class:"d-flex justify-center"},Yt={class:"d-flex justify-center"},es=T({__name:"DetailsBonus",props:{item:{}},async setup(e){let a,r;const c=j("objFinder"),u=j("raceName"),{iconProps:t,iconsSrc:i}=([a,r]=B(()=>U(u)),a=await a,r(),a),d=L(["grid","opens"]);ke(()=>e.item,l=>{var f;d.value=["grid"].concat(((f=l.units)==null?void 0:f.map(({id:p})=>`unit-${p}`))??[])});const _=k(()=>{var l;return(((l=e.item.spells)==null?void 0:l.length)??0)>1?!0:[e.item.units,e.item.upgrades].some(f=>!!(f!=null&&f.length))}),g=k(()=>[...(e.item.spells??[]).filter(({name:l})=>!!l),...e.item.upgrades??[]]),m=k(()=>e.item.relatedID.map(l=>c("upgrade",l)).filter(Y));return(l,f)=>{const p=me,w=R,x=O,v=ne;return y(),C(ue,{elevation:"0",static:"",tile:"",multiple:"",modelValue:s(d),"onUpdate:modelValue":f[0]||(f[0]=b=>ee(d)?d.value=b:null)},{default:o(()=>[l.item.description?(y(),C(D,{key:0,title:"Description",value:"description"},{default:o(()=>[n($,null,{default:o(()=>[h("div",{class:"text-body-2",innerHTML:l.item.description},null,8,Qt)]),_:1})]),_:1})):S("",!0),s(_)&&s(g).length?(y(),C(D,{key:1,value:"grid"},{default:o(()=>[n(le,{width:"100%",class:"d-flex"},{default:o(()=>[f[2]||(f[2]=h("span",{class:"mr-auto"},"Bonus spells/upgrades",-1)),n(p,{items:l.item.upgrades??[]},{default:o(()=>f[1]||(f[1]=[N(" Total cost ")])),_:1},8,["items"])]),_:1}),n($,null,{default:o(()=>[h("div",Xt,[s(_)&&s(g).length?(y(),C(x,{key:0,items:s(g),"disable-details":"","show-empty":""},{default:o(({item:b})=>[n(w,{src:s(i),coords:s(t)(b.id,b.iconsCount),item:b},null,8,["src","coords","item"])]),_:1},8,["items"])):S("",!0)])]),_:1})]),_:1})):S("",!0),(y(!0),V(H,null,F(l.item.units,b=>(y(),C(D,{title:`Unit: ${b.name}`,value:`unit-${b.id}`},{default:o(()=>[n($,null,{default:o(()=>[n(v,{item:b},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),s(m).length?(y(),C(D,{key:2,title:"Unlocked upgrades",value:"opens"},{default:o(()=>[n($,null,{default:o(()=>[h("div",Yt,[n(x,{items:s(m),"disable-details":"","skip-hotkey":""},{default:o(({item:b})=>[n(w,{src:s(i),coords:s(t)(b.id,b.iconsCount),item:b},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):S("",!0)]),_:1},8,["modelValue"])}}}),ts=({item:e})=>{const a=ge(e);if(a){if(Ke(a))return z(ne,{item:a});if(Ze(a))return z(Ft,{item:a});if(Je(a))return z(qt,{item:a});if(Qe(a))return z(Kt,{item:a});if(we(a))return z(es,{item:a})}},ss={key:0,class:"d-flex align-center justify-space-between panel-header pb-2 elevation-1 mb-2"},ns=["innerHTML"],as={class:"panel-details"},os=T({__name:"DetailsProvider",props:{objFinder:{type:Function},raceName:{}},async setup(e){let a,r;const{iconProps:c,iconsSrc:u}=([a,r]=B(()=>U(e.raceName)),a=await a,r(),a),t=L(null),i=gt(),d=k({get:()=>!!t.value,set:m=>{m||(t.value=null)}});Xe(()=>{i.value&&["bonus","spell","unit","hero","upgrade"].forEach(m=>{var f;if(!i.value||((f=t.value)==null?void 0:f.id)===i.value)return;const l=e.objFinder(m,i.value);l&&(t.value=l)})}),ke(()=>t.value,m=>i.value=m==null?void 0:m.id);const _=m=>{t.value=m},g=()=>{var m;navigator.clipboard.writeText(((m=t.value)==null?void 0:m.id)||"")};return W("detailsSet",_),W("objFinder",e.objFinder),W("raceName",e.raceName),(m,l)=>{const f=ie,p=ts,w=je;return y(),V(H,null,[n(w,null,{default:o(()=>[n(xt,{modelValue:s(d),"onUpdate:modelValue":l[1]||(l[1]=x=>ee(d)?d.value=x:null),location:"left",temporary:"","disable-resize-watcher":"",elevation:"4",class:"pa-2",width:"400","disable-route-watcher":""},{default:o(()=>[s(t)?(y(),V("div",ss,[n(Me,{color:"transparent"},{activator:o(({props:x})=>[n(f,xe({src:s(u),coords:s(c)(s(t).id),width:"32"},x,{onClick:g}),null,16,["src","coords"])]),default:o(()=>[N(" ID: "+P(s(t).id),1)]),_:1}),h("span",{innerHTML:s(t).name,class:"text-h6 mx-2"},null,8,ns),n(Se,{density:"comfortable",icon:"",flat:"",onClick:l[0]||(l[0]=x=>_(null))},{default:o(()=>[n(Ie,{icon:"$close"})]),_:1})])):S("",!0),h("div",as,[n(p,{item:s(t)},null,8,["item"])])]),_:1},8,["modelValue"])]),_:1}),q(m.$slots,"default",{},void 0,!0)],64)}}}),ls=G(os,[["__scopeId","data-v-e1fba027"]]),is=["innerHTML"],cs=["innerHTML"],rs=T({__name:"RaceDescription",props:{race:{}},setup(e){const a=k(()=>e.race.description.replace(new RegExp(String.raw`^\s*?<span[^>]*?>.*?${e.race.name}.*?<\/span>`,"si"),"").replace(/\s+?(?:<br\s?\/?>)*/,"")),r=k(()=>(e.race.description.match(new RegExp(String.raw`#[a-zA-Z0-9]{6,8}(?=[^<]*?(?:${e.race.name}))`))??["white"])[0]);return(c,u)=>{const t=J;return y(),C(t,{title:"",id:"details",style:{"grid-row":"span 3"}},{title:o(()=>[h("h1",{class:"text-wrap text-h3",style:ce({color:s(r)}),innerHTML:c.race.name},null,12,is)]),default:o(()=>[h("div",{innerHTML:s(a)},null,8,cs)]),_:1})}}}),ds=T({__name:"RaceFortress",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const a=j("hover",L()),r=k(()=>{const t=[e.race.t1spell,e.race.t2spell];return e.race.ultimateId&&t.push({type:"spell",hotkey:"V",id:e.race.ultimateId,name:"Precision UW Icon",description:""}),t}),c=k(()=>e.race.magic.map((t,i)=>({...t,hotkey:Re[i]})).concat(...Object.values(e.race.baseUpgrades))),u=t=>{const i=Object.values(e.race.units).filter(({upgrades:d})=>d==null?void 0:d.includes(t.id)).map(({id:d})=>d);a.value=[t.id,...i]};return(t,i)=>{const d=te,_=me,g=O,m=J;return y(),C(m,{title:"Fortress",class:"d-flex flex-column justify-start",style:{"grid-row":"span 2"},"full-height":!1,id:"fortress"},{prependHead:o(()=>[n(d,{key:"fort-attack",class:"ml-1",type:t.race.buildings.fort.atkType},null,8,["type"])]),appendHead:o(()=>[n(_,{key:"fort-cost",class:"mr-1",items:s(c)},null,8,["items"])]),default:o(()=>[n(g,{class:"mx-auto",items:t.race.auras},{default:o(({item:l})=>[n(s(R),{item:l,src:t.icons,coords:t.iconProps(l.id),class:M(["selectable-item",{depressed:s(a)&&!s(a).includes(l.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"]),n(oe,{class:"my-3 w-100"}),n(g,{class:"mx-auto",items:s(c)},{default:o(({item:l})=>[n(s(R),{item:l,src:t.icons,coords:!("level"in l)||(l.iconsCount??0)<=1?t.iconProps(l.id,l.iconsCount):t.iconProps(`${l.id}-${l.level}`),class:M(["selectable-item",{depressed:s(a)&&!s(a).includes(l.id)}]),onMouseenter:()=>u(l),onMouseout:i[0]||(i[0]=()=>a.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),n(oe,{class:"my-3 w-100"}),n(g,{class:"mx-auto",items:s(r)},{default:o(({item:l})=>[n(s(R),{item:l,src:t.icons,coords:t.iconProps(l.id),class:M(["selectable-item",{depressed:s(a)&&!s(a).includes(l.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"])]),_:1})}}}),us=T({__name:"RaceTowers",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const a=j("hover",L());k(()=>Object.fromEntries(e.race.towerUpgrades.map(u=>[u.id,u])));const r=k(()=>Object.values(e.race.bonuses).reduce((u,{id:t,relatedID:i})=>(i.forEach(d=>{u[d]=t}),u),{})),c=u=>{const t=Object.values(e.race.units).filter(({upgrades:i})=>i==null?void 0:i.includes(u.id)).map(({id:i})=>i);a.value=[u.id,r.value[u.id],...t]};return(u,t)=>{const i=te,d=me,_=R,g=O,m=J;return y(),C(m,{title:"Towers","full-height":!1,class:"d-flex flex-column",style:{"grid-row":"span 2"},id:"upgrades"},{prependHead:o(()=>[n(i,{key:"tower-attack",class:"ml-1",type:u.race.buildings.tower.atkType},null,8,["type"])]),appendHead:o(()=>[n(d,{key:"tower-cost",items:u.race.towerUpgrades,count:3},{default:o(()=>t[1]||(t[1]=[N(" Total cost (Lv3) ")])),_:1},8,["items"])]),default:o(()=>[n(g,{class:"mx-auto",items:u.race.towerUpgrades,restrictedSlots:["Q","W"]},{default:o(({item:l})=>[n(_,{item:l,src:u.icons,coords:u.iconProps(l.id,l.iconsCount),class:M(["selectable-item",{depressed:s(a)&&!s(a).includes(l.id)}]),onMouseenter:()=>c(l),onMouseout:t[0]||(t[0]=()=>a.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"])]),_:1})}}}),ms={class:"d-flex flex-wrap"},ps=["innerHTML"],fs=T({__name:"RaceBonuses",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const a=j("hover",L()),r=new Intl.Collator("en").compare,c=k(()=>Object.values(e.race.bonusBuildings).sort(({name:t},{name:i})=>r(t,i))),u=t=>{if(!we(t)){a.value=[t.id,...e.race.bonuses.filter(({buildingId:d})=>d===t.id).map(({id:d})=>d)].filter(Y);return}const i=Object.values(e.race.units).filter(({hotkey:d})=>{var _;return(_=t.units)==null?void 0:_.some(g=>g.hotkey===d)}).map(({id:d})=>d);a.value=[t.id,t.buildingId,...t.relatedID,...i]};return(t,i)=>{const d=R,_=O,g=J;return y(),C(g,{title:"Bonuses","full-height":!1,class:"d-flex flex-column align-center justify-start",style:ce({gridRow:`span ${2+Math.floor(s(c).length/4)}`}),id:"bonuses"},{default:o(()=>[n(_,{items:t.race.bonuses},{default:o(({item:m})=>[n(d,{item:m,src:t.icons,coords:t.iconProps(m.id),class:M(["selectable-item",{depressed:s(a)&&!s(a).includes(m.id)}]),onMouseenter:()=>u(m),onMouseout:i[0]||(i[0]=()=>a.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),i[2]||(i[2]=h("div",{class:"my-2 text-h6"},"Buildings",-1)),h("div",ms,[(y(!0),V(H,null,F(s(c),m=>(y(),C(Se,{class:"my-1 mx-2 cursor-default",variant:"text",size:"x-small",active:s(a)&&s(a).includes(m.id),onMouseover:()=>u(m),onMouseout:i[1]||(i[1]=()=>a.value=void 0)},{default:o(()=>[h("span",{innerHTML:m.name},null,8,ps)]),_:2},1032,["active","onMouseover"]))),256))])]),_:1},8,["style"])}}}),vs=T({__name:"RaceBarracks",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const a=j("hover",L()),r={melee:"A",range:"S",mage:"D",siege:"F",air:"E",catapult:"R"},c=k(()=>Object.entries(e.race.units).map(([t,i])=>({...i,hotkey:r[t]}))),u=t=>{a.value=[t.id,...t.upgrades??[]]};return(t,i)=>{const d=te,_=O,g=J;return y(),C(g,{title:"Barracks","full-height":!1,class:"d-flex flex-column",style:{"grid-row":"span 2"},id:"units"},{prependHead:o(()=>[n(d,{key:"barrack-attack",class:"ml-1",type:t.race.buildings.barrack.atkType},null,8,["type"])]),default:o(()=>[n(_,{class:"mx-auto",items:s(c)},{default:o(({item:m})=>[n(s(R),{item:m,src:t.icons,coords:t.iconProps(m.id),class:M(["selectable-item",{depressed:s(a)&&!s(a).includes(m.id)}]),onMouseenter:()=>u(m),onMouseout:i[0]||(i[0]=()=>a.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),n(oe,{class:"my-3 w-100"}),n(_,{class:"mx-auto",items:t.race.heroes},{default:o(({item:m})=>[n(s(R),{item:m,src:t.icons,coords:t.iconProps(m.id),class:M(["selectable-item",{depressed:s(a)&&!s(a).includes(m.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"])]),_:1})}}}),_s=T({__name:"racePage",async setup(e){let a,r;const c=Ye(),[u]=[et().params.race].flat(),{raceData:t,iconProps:i,iconsSrc:d,version:_}=([a,r]=B(()=>U(u)),a=await a,r(),a),g=(p,w)=>{switch(p){case"upgrade":return Object.values(t.baseUpgrades).concat(t.magic).concat(t.towerUpgrades).find(x=>x.id===w);case"unit":return Object.values(t.units).find(x=>x.id===w);case"bonus":return Object.values(t.bonuses).find(x=>x.id===w);case"hero":return t.heroes.find(x=>x.id===w);case"spell":return[t.t1spell,t.t2spell].find(x=>x.id===w);default:return}},m=Ce("iconSize",ct),l=k(()=>({gridTemplateColumns:`repeat(auto-fill, minmax(${+m.value*5}px, 1fr))`})),f=it?k(()=>{}):L();return W("hover",f),c.runWithContext(()=>{_t({title:`${t.name} v${_}`,description:`${t.name} of Survival Chaos v${_}: race info, bonuses, upgrades, units and heroes`,ogDescription:`${t.name} of Survival Chaos v${_}: race info, bonuses, upgrades, units and heroes`}),yt({link:[{rel:"preload",as:"image",href:d}]})}),(p,w)=>{const x=St,v=ls;return y(),V("div",null,[n(x,{class:"mb-2"}),n(v,{"obj-finder":g,"race-name":s(u)},{default:o(()=>[h("div",{class:"race-container",style:ce(s(l))},[n(rs,{race:s(t),style:{"flex-basis":"300px"}},null,8,["race"]),n(ds,{race:s(t),icons:s(d),"icon-props":s(i)},null,8,["race","icons","icon-props"]),n(us,{race:s(t),icons:s(d),"icon-props":s(i)},null,8,["race","icons","icon-props"]),n(fs,{race:s(t),icons:s(d),"icon-props":s(i)},null,8,["race","icons","icon-props"]),n(vs,{race:s(t),icons:s(d),"icon-props":s(i)},null,8,["race","icons","icon-props"])],4)]),_:1},8,["race-name"])])}}}),Hs=G(_s,[["__scopeId","data-v-1c262027"]]);export{Hs as default};
