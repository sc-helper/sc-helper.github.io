import{_ as k,V as x}from"./DWuwur7b.js";import{_ as I}from"./X1-I-29C.js";import{u as F}from"./Db0PVsQN.js";import{u as M}from"./BsP9077K.js";import{d as P,c as R,a as b,o as w,b4 as S,b5 as B,h as v,G as c,w as g,u as T,f as K,e as z,m as E,_ as G,v as H,b6 as L,K as A,b7 as y}from"./C5A2tpzq.js";import{V as N}from"./CL0eZBVG.js";const O=["innerHTML"],W=P({__name:"WarTooltip",props:{description:{},descriptionClass:{},disabled:{type:Boolean},src:{},coords:{},padding:{}},setup(t){const d=F("tooltipsDisabled","false"),l=M(),s=R(()=>{const o=t.disabled||d.value==="true";return l.value?!o:o});return(o,n)=>{const a=k,r=I;return w(),b("div",S(B(o.$attrs)),[v(a,null,{default:g(()=>[v(x,{location:"bottom center",activator:"parent","max-width":"350","close-on-content-click":"",transition:{component:T(N)},disabled:T(s),class:"tooltip-opacity"},{default:g(()=>[c(o.$slots,"tooltip:body",{},()=>[c(o.$slots,"tooltip",{},void 0,!0),t.description?(w(),b("div",{key:0,class:z([t.descriptionClass,"war-tooltip"]),innerHTML:t.description},null,10,O)):K("",!0),c(o.$slots,"postfix",{},void 0,!0)],!0)]),_:3},8,["transition","disabled"])]),_:3}),v(r,E({src:t.src,coords:t.coords,padding:t.padding,width:"100%"},o.$attrs),null,16,["src","coords","padding"]),c(o.$slots,"default",{},void 0,!0)],16)}}}),Y=G(W,[["__scopeId","data-v-9e81cf30"]]),Z=async(t,d,l)=>{const s=H().currentRoute.value,o=d??s.params.versionType??"og";let n=l??(s.params.version||"latest");n==="latest"&&(n=L[o]);const a=A[o];if(!a)throw y("unknown version type");const r=a[n];if(!r)throw y("unknown version");const e=await r();if(!(t in e.racesData))throw y("No race found");const i=await e.racesData[t](),C=(_,u)=>{if(!u||u===1){const[h,p,m,f]=i.icons[_]??[0,0,1,1];return{x:h,y:p,width:m,height:f}}return Array.from({length:u},(h,p)=>{const m=`${_}-${p+1}`,[f,V,$,D]=i.icons[m]??[0,0,1,1];return{x:f,y:V,width:$,height:D}})};return{raceData:i.data,raceIconsCoords:i.icons,iconProps:C,iconsSrc:e.racesIcons[t],version:e.version,versionType:e.versionType}};export{Y as _,Z as u};
