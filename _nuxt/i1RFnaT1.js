import{G as E,aZ as _,r as w,s as I,t as R,a_ as j,a$ as z,b0 as H,O as N,b1 as $,b2 as M,aX as T,k as b,b3 as F,c as S,f as p,S as V,e as W,b4 as k,b5 as G,d as K,E as X,j as U,m as Y,b6 as Z,_ as q}from"./7j1wTR2L.js";const J=e=>e==="defer"||e===!1;function re(...e){var P;const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);let[s,d,a={}]=e;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof d!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const t=E(),m=d,o=()=>_.value,l=()=>t.isHydrating?t.payload.data[s]:t.static.data[s];a.server=a.server??!0,a.default=a.default??o,a.getCachedData=a.getCachedData??l,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0,a.deep=a.deep??_.deep,a.dedupe=a.dedupe??"cancel";const f=a.getCachedData(s,t),h=f!=null;if(!t._asyncData[s]||!a.immediate){(P=t.payload._errors)[s]??(P[s]=_.errorValue);const c=a.deep?w:I;t._asyncData[s]={data:c(h?f:a.default()),pending:w(!h),error:R(t.payload._errors,s),status:w("idle"),_default:a.default}}const r={...t._asyncData[s]};delete r._default,r.refresh=r.execute=(c={})=>{if(t._asyncDataPromises[s]){if(J(c.dedupe??a.dedupe))return t._asyncDataPromises[s];t._asyncDataPromises[s].cancelled=!0}if(c._initial||t.isHydrating&&c._initial!==!1){const u=c._initial?f:a.getCachedData(s,t);if(u!=null)return Promise.resolve(u)}r.pending.value=!0,r.status.value="pending";const y=new Promise((u,i)=>{try{u(m(t))}catch(x){i(x)}}).then(async u=>{if(y.cancelled)return t._asyncDataPromises[s];let i=u;a.transform&&(i=await a.transform(u)),a.pick&&(i=Q(i,a.pick)),t.payload.data[s]=i,r.data.value=i,r.error.value=_.errorValue,r.status.value="success"}).catch(u=>{if(y.cancelled)return t._asyncDataPromises[s];r.error.value=T(u),r.data.value=b(a.default()),r.status.value="error"}).finally(()=>{y.cancelled||(r.pending.value=!1,delete t._asyncDataPromises[s])});return t._asyncDataPromises[s]=y,t._asyncDataPromises[s]},r.clear=()=>L(t,s);const v=()=>r.refresh({_initial:!0}),g=a.server!==!1&&t.payload.serverRendered;{const c=j();if(c&&g&&a.immediate&&!c.sp&&(c.sp=[]),c&&!c._nuxtOnBeforeMountCbs){c._nuxtOnBeforeMountCbs=[];const i=c._nuxtOnBeforeMountCbs;z(()=>{i.forEach(x=>{x()}),i.splice(0,i.length)}),H(()=>i.splice(0,i.length))}g&&t.isHydrating&&(r.error.value||f!=null)?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):c&&(t.payload.serverRendered&&t.isHydrating||a.lazy)&&a.immediate?c._nuxtOnBeforeMountCbs.push(v):a.immediate&&v();const y=M();if(a.watch){const i=N(a.watch,()=>r.refresh());y&&$(i)}const u=t.hook("app:data:refresh",async i=>{(!i||i.includes(s))&&await r.refresh()});y&&$(u)}const D=Promise.resolve(t._asyncDataPromises[s]).then(()=>r);return Object.assign(D,r),D}function L(e,n){n in e.payload.data&&(e.payload.data[n]=void 0),n in e.payload._errors&&(e.payload._errors[n]=_.errorValue),e._asyncData[n]&&(e._asyncData[n].data.value=void 0,e._asyncData[n].error.value=_.errorValue,e._asyncData[n].pending.value=!1,e._asyncData[n].status.value="idle"),n in e._asyncDataPromises&&(e._asyncDataPromises[n]&&(e._asyncDataPromises[n].cancelled=!0),e._asyncDataPromises[n]=void 0)}function Q(e,n){const s={};for(const d of n)s[d]=e[d];return s}var B;const C=!((B=globalThis==null?void 0:globalThis.CSS)!=null&&B.supports("object-view-box: xywh(1px 1px 1px 1px)")),A=({src:e,imageRef:n,coords:s,idx:d,width:a})=>{const t=F("imageDimensions",()=>({})),m=w((()=>{const o=Number(a);return!a||Number.isNaN(o)?0:o})());return N(()=>p(e),o=>{if(!C||o in t.value)return;t.value[o]=[0,0];const l=new Image;l.onload=async()=>{t.value[o]=[l.width??0,l.height??0]},l.src=o},{immediate:!0}),N(()=>p(n),o=>{o&&(m.value=o.clientWidth||m.value)},{immediate:!0}),S(()=>{if(!C)return null;const[o,l]=t.value[p(e)]??[0,0],{x:f,y:h,width:r,height:v}=[p(s)].flat()[p(d??0)];if(!m.value||!o||!C)return{};const g=o/r,D=f/(o-r),P=h/(l-v);return{backgroundSize:`${g*100}%`,backgroundPositionX:`${D*100}%`,backgroundPositionY:`${P*100}%`,backgroundImage:`url(${p(e)})`}})},ee=window.setInterval,O=new Set;V(()=>{ee(()=>{O.forEach(e=>e())},1500)});const ae=e=>(O.add(e),()=>{O.delete(e)}),te=W({__name:"GameIcon",props:{src:{},coords:{},padding:{default:()=>[0,0,0,0]}},setup(e){const n=w(0),s=k(),d=G("image"),a=A({src:e.src,imageRef:d,coords:e.coords,idx:n,width:s.width}),t=S(()=>{if(a.value)return{is:"div",style:a.value};const[o,l,f,h]=e.padding,{x:r=0,y:v=0,width:g=1,height:D=1}=Array.isArray(e.coords)?e.coords[n.value]??{}:e.coords??{};return{is:"img",src:e.src,style:{"object-view-box":`xywh(${r+h}px ${v+o}px ${g-l-h}px ${D-f-o}px)`}}}),m=S(()=>{const o=isNaN(Number(s.width))?s.width:`${Number(s.width)}px`;return{width:o,height:o,...t.value.style}});return K(o=>{if(!Array.isArray(e.coords))return;const l=ae(()=>{n.value=n.value+1>=e.coords.length?0:n.value+1});o(l)}),(o,l)=>(U(),X(Z(b(t).is),Y({style:b(m),src:b(t).src},b(s),{class:"icon",ref:"image"}),null,16,["style","src"]))}}),ne=q(te,[["__scopeId","data-v-e3341ac7"]]);export{ne as _,re as u};
