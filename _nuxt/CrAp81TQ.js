import{ad as $,r as k,D as b,c as w,t as r,I,d as S,b8 as A,b9 as D,a1 as E,q as P,o as B,m as C,u as d,ba as R,_ as W}from"./CpASVsld.js";var p;const x=!((p=globalThis==null?void 0:globalThis.CSS)!=null&&p.supports("object-view-box: xywh(1px 1px 1px 1px)")),j=({src:e,imageRef:o,coords:a,idx:m,width:i})=>{const n=$("imageDimensions",()=>({})),c=k((()=>{const t=Number(i);return!i||Number.isNaN(t)?0:t})());return b(()=>r(e),t=>{if(!x||t in n.value)return;n.value[t]=[0,0];const s=new Image;s.onload=async()=>{n.value[t]=[s.width??0,s.height??0]},s.src=t},{immediate:!0}),b(()=>r(o),t=>{t&&(c.value=t.clientWidth||c.value)},{immediate:!0}),w(()=>{if(!x)return null;const[t,s]=n.value[r(e)]??[0,0],{x:h,y:u,width:l,height:f}=[r(a)].flat()[r(m??0)];if(!c.value||!t||!x)return{};const g=t/l,v=h/(t-l),N=u/(s-f);return{backgroundSize:`${g*100}%`,backgroundPositionX:`${v*100}%`,backgroundPositionY:`${N*100}%`,backgroundImage:`url(${r(e)})`}})},z=window.setInterval,y=new Set;I(()=>{z(()=>{y.forEach(e=>e())},1500)});const F=e=>(y.add(e),()=>{y.delete(e)}),O=S({__name:"GameIcon",props:{src:{},coords:{},padding:{default:()=>[0,0,0,0]}},setup(e){const o=k(0),a=A(),m=D("image"),i=j({src:e.src,imageRef:m,coords:e.coords,idx:o,width:a.width?String(a.width):void 0}),n=w(()=>{if(i.value)return{is:"div",style:i.value};const[t,s,h,u]=e.padding,{x:l=0,y:f=0,width:g=1,height:v=1}=Array.isArray(e.coords)?e.coords[o.value]??{}:e.coords??{};return{is:"img",src:e.src,style:{"object-view-box":`xywh(${l+u}px ${f+t}px ${g-s-u}px ${v-h-t}px)`}}}),c=w(()=>{const t=isNaN(Number(a.width))?a.width:`${Number(a.width)}px`;return{width:t,height:t,...n.value.style}});return E(t=>{if(!Array.isArray(e.coords))return;const s=F(()=>{o.value=o.value+1>=e.coords.length?0:o.value+1});t(s)}),(t,s)=>(B(),P(R(d(n).is),C({style:d(c),src:d(n).src},d(a),{class:"icon",ref:"image"}),null,16,["style","src"]))}}),q=W(O,[["__scopeId","data-v-8e06f937"]]);export{q as _};
