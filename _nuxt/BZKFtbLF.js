import{_ as Fe}from"./DAn4pAy8.js";import{u as B,_ as re,a as ce}from"./DqkfFOIN.js";import{q as J,s as ee,S as I,e as s,al as we,am as Oe,c as k,an as Ae,a6 as he,T as q,a1 as Ge,a3 as ze,R as D,a5 as We,ao as qe,d as V,I as U,g as C,o as _,ap as xe,b as a,F as R,j as A,u as n,a as T,f as v,L as j,i as E,t as $,_ as z,B as N,E as Q,r as K,ah as P,J as te,aq as Ke,ar as Ze,D as Te,m as ue,w as $e,as as Je,h as W,at as Qe,au as Ye,av as Ce,aw as Pe,ax as Xe,K as de,ay as et,ak as tt}from"./CJraMVTi.js";import{u as Se}from"./CG1TX-Ae.js";import{b as st,c as nt,V as at,a as le}from"./iRYVE0zp.js";import{a as Ve,m as Ie,b as ot,c as lt,V as G}from"./568oOC6c.js";import{a as se,_ as H}from"./DZBscVAJ.js";import{u as me}from"./CgZVGmdZ.js";import{a as L,V as ke}from"./CYiYclRk.js";import{V as it,a as rt}from"./CjMt35If.js";import{a as ne,g as pe,R as ct,j as De,n as ut,o as je,V as Me,p as dt,q as mt,r as pt,b as He,d as ft,e as vt,u as _t,s as bt}from"./CxUWFzIq.js";import{u as yt,m as gt,_ as Re,V as fe}from"./DhvZh536.js";import{h as Ee,_ as F,a as ve}from"./lMhCnBpw.js";import{u as ht}from"./DKz150Yo.js";import{V as xt}from"./3xfA9Zfh.js";import{_ as Y}from"./D-I9iKtI.js";import{I as kt,D as wt}from"./DYmvtetA.js";import"./DbYZnSlv.js";/* empty css        */const Z=Symbol.for("vuetify:v-expansion-panel"),Le=ee({...pe(),...gt()},"VExpansionPanelText"),S=J()({name:"VExpansionPanelText",props:Le(),setup(e,o){let{slots:u}=o;const c=I(Z);if(!c)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:m,onAfterLeave:t}=yt(e,c.isSelected);return ne(()=>s(it,{onAfterLeave:t},{default:()=>{var l;return[we(s("div",{class:["v-expansion-panel-text",e.class],style:e.style},[u.default&&m.value&&s("div",{class:"v-expansion-panel-text__wrapper"},[(l=u.default)==null?void 0:l.call(u)])]),[[Oe,c.isSelected.value]])]}})),{}}}),Ne=ee({color:String,expandIcon:{type:he,default:"$expand"},collapseIcon:{type:he,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...pe(),...dt()},"VExpansionPanelTitle"),ie=J()({name:"VExpansionPanelTitle",directives:{Ripple:ct},props:Ne(),setup(e,o){let{slots:u}=o;const c=I(Z);if(!c)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:m,backgroundColorStyles:t}=De(e,"color"),{dimensionStyles:l}=ut(e),d=k(()=>({collapseIcon:e.collapseIcon,disabled:c.disabled.value,expanded:c.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),y=k(()=>c.isSelected.value?e.collapseIcon:e.expandIcon);return ne(()=>{var x;return we(s("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":c.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},m.value,e.class],style:[t.value,l.value,e.style],type:"button",tabindex:c.disabled.value?-1:void 0,disabled:c.disabled.value,"aria-expanded":c.isSelected.value,onClick:e.readonly?void 0:c.toggle},[s("span",{class:"v-expansion-panel-title__overlay"},null),(x=u.default)==null?void 0:x.call(u,d.value),!e.hideActions&&s(je,{defaults:{VIcon:{icon:y.value}}},{default:()=>{var f;return[s("span",{class:"v-expansion-panel-title__icon"},[((f=u.actions)==null?void 0:f.call(u,d.value))??s(Me,null,null)])]}})]),[[Ae("ripple"),e.ripple]])}),{}}}),Be=ee({title:String,text:String,bgColor:String,...vt(),...Ie(),...ft(),...He(),...Ne(),...Le()},"VExpansionPanel"),M=J()({name:"VExpansionPanel",props:Be(),emits:{"group:selected":e=>!0},setup(e,o){let{slots:u}=o;const c=Ve(e,Z),{backgroundColorClasses:m,backgroundColorStyles:t}=De(e,"bgColor"),{elevationClasses:l}=mt(e),{roundedClasses:d}=pt(e),y=k(()=>(c==null?void 0:c.disabled.value)||e.disabled),x=k(()=>c.group.items.value.reduce((p,i,w)=>(c.group.selected.value.includes(i.id)&&p.push(w),p),[])),f=k(()=>{const p=c.group.items.value.findIndex(i=>i.id===c.id);return!c.isSelected.value&&x.value.some(i=>i-p===1)}),r=k(()=>{const p=c.group.items.value.findIndex(i=>i.id===c.id);return!c.isSelected.value&&x.value.some(i=>i-p===-1)});return q(Z,c),ne(()=>{const p=!!(u.text||e.text),i=!!(u.title||e.title),w=ie.filterProps(e),h=S.filterProps(e);return s(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":c.isSelected.value,"v-expansion-panel--before-active":f.value,"v-expansion-panel--after-active":r.value,"v-expansion-panel--disabled":y.value},d.value,m.value,e.class],style:[t.value,e.style]},{default:()=>[s("div",{class:["v-expansion-panel__shadow",...l.value]},null),s(je,{defaults:{VExpansionPanelTitle:{...w},VExpansionPanelText:{...h}}},{default:()=>{var b;return[i&&s(ie,{key:"title"},{default:()=>[u.title?u.title():e.title]}),p&&s(S,{key:"text"},{default:()=>[u.text?u.text():e.text]}),(b=u.default)==null?void 0:b.call(u)]}})]})}),{groupItem:c}}}),Tt=["default","accordion","inset","popout"],$t=ee({flat:Boolean,...lt(),...qe(Be(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...We(),...pe(),...He(),variant:{type:String,default:"default",validator:e=>Tt.includes(e)}},"VExpansionPanels"),_e=J()({name:"VExpansionPanels",props:$t(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:u}=o;const{next:c,prev:m}=ot(e,Z),{themeClasses:t}=Ge(e),l=k(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ze({VExpansionPanel:{bgColor:D(e,"bgColor"),collapseIcon:D(e,"collapseIcon"),color:D(e,"color"),eager:D(e,"eager"),elevation:D(e,"elevation"),expandIcon:D(e,"expandIcon"),focusable:D(e,"focusable"),hideActions:D(e,"hideActions"),readonly:D(e,"readonly"),ripple:D(e,"ripple"),rounded:D(e,"rounded"),static:D(e,"static")}}),ne(()=>s(e.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},t.value,l.value,e.class],style:e.style},{default:()=>{var d;return[(d=u.default)==null?void 0:d.call(u,{prev:m,next:c})]}})),{next:c,prev:m}}}),Ct=J()({name:"VSlideGroupItem",props:Ie(),emits:{"group:selected":e=>!0},setup(e,o){let{slots:u}=o;const c=Ve(e,st);return()=>{var m;return(m=u.default)==null?void 0:m.call(u,{isSelected:c.isSelected.value,select:c.select,toggle:c.toggle,selectedClass:c.selectedClass.value})}}}),Pt=["innerHTML"],St=V({__name:"RaceSelectRibbon",async setup(e){let o,u;const c=Se("iconSize"),{raceData:m,iconProps:t,iconsSrc:l}=([o,u]=U(()=>B("races")),o=await o,u(),o),d=k(()=>Object.values(m).flat());return(y,x)=>{const f=Fe,r=re;return _(),C("div",null,[s(nt,{"model-value":(y._.provides[xe]||y.$route).params.race,"center-active":"","show-arrows":""},{default:a(()=>[(_(!0),C(R,null,A(n(d),p=>(_(),T(Ct,{value:p.key,key:p.key},{default:a(({isSelected:i})=>[v("div",{class:j(["race-wrapper",{selected:i}])},[s(r,{coords:n(t)(p.id),src:n(l),description:"",width:n(c)},{tooltip:a(()=>[v("div",{innerHTML:p.name},null,8,Pt)]),default:a(()=>[s(f,{to:{name:"RaceIndex",params:{...(y._.provides[xe]||y.$route).params,race:p.key}}},{default:a(()=>[E($(p.name),1)]),_:2},1032,["to"])]),_:2},1032,["coords","src","width"])],2)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value"])])}}}),Vt=z(St,[["__scopeId","data-v-f1152851"]]),It={key:0,class:"d-flex row-warp align-center my-1"},Dt={class:"ml-2 mt-n1"},jt={class:"ml-2 mt-n1"},Mt=["innerHTML"],Ht={class:"text-white bg-red mx-2 rounded-lg"},Rt={class:"text-white bg-blue mx-2 rounded-lg"},Et={class:"d-flex align-center"},Lt={class:"ml-2 mt-n1"},Nt={class:"d-flex align-center"},Bt={class:"ml-2 mt-n1"},Ut={class:"upgrades-wrapper"},Ft=V({__name:"DetailsUnit",props:{item:{}},async setup(e){let o,u;const c=N(["characteristics","upgrades","items"]),[m,{gold:t,bounty:l,range:d,attackSpeed:y}]=me(),x=I("raceName"),{iconProps:f,iconsSrc:r}=([o,u]=U(()=>B(x)),o=await o,u(),o),p=I("objFinder"),i=k(()=>!isNaN(Number(e.item.hpReg))),w=k(()=>!isNaN(Number(e.item.mpReg))),h=k(()=>{var b;return(b=e.item.upgrades)==null?void 0:b.map(g=>p("upgrade",g)).filter(Q)});return(b,g)=>{var ge;const X=re,ye=se,Ue=H;return _(),C(R,null,[K(b.$slots,"fullname",{},void 0,!0),(ge=b.item.tags)!=null&&ge.length?(_(),C("div",It,[g[1]||(g[1]=v("div",{class:"text-subtitle-2"},"Tags:",-1)),(_(!0),C(R,null,A(b.item.tags,O=>(_(),T(at,{class:"ma-1 mr-0",density:"compact",size:"small"},{default:a(()=>[E($(O),1)]),_:2},1024))),256))])):P("",!0),s(ke,{class:"my-1"},{default:a(()=>[s(L,{cols:"6",class:"d-flex align-center py-0"},{default:a(()=>[s(X,{src:n(m),coords:n(t),width:"32",description:"Cost"},null,8,["src","coords"]),v("span",Dt,$(b.item.cost),1)]),_:1}),s(L,{cols:"6",class:"d-flex align-center py-0"},{default:a(()=>[s(X,{src:n(m),coords:n(l),width:"32",description:"Kill bounty"},null,8,["src","coords"]),v("span",jt,$(b.item.bounty),1)]),_:1})]),_:1}),s(_e,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(c),"onUpdate:modelValue":g[0]||(g[0]=O=>te(c)?c.value=O:null)},{default:a(()=>{var O;return[b.item.description?(_(),T(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",{class:"text-body-2",innerHTML:b.item.description},null,8,Mt)]),_:1})]),_:1})):P("",!0),K(b.$slots,"heroItems",{},void 0,!0),s(M,{title:"Characteristics",value:"characteristics"},{default:a(()=>[s(S,null,{default:a(()=>[s(ke,{class:"my-1"},{default:a(()=>[s(L,{cols:"6",class:"text-center pt-0"},{default:a(()=>[v("div",Ht,[v("b",null,$(b.item.hp),1),n(i)?(_(),C(R,{key:0},[E(" +"+$(b.item.hpReg)+"/sec",1)],64)):P("",!0)])]),_:1}),s(L,{cols:"6",class:"text-center pt-0"},{default:a(()=>[v("div",Rt,[v("b",null,$(b.item.mp),1),n(w)?(_(),C(R,{key:0},[E(" +"+$(b.item.mpReg)+"/sec",1)],64)):P("",!0)])]),_:1}),s(L,{cols:"6",class:"py-0"},{default:a(()=>[s(ye,{type:b.item.atkType,value:b.item.atk},null,8,["type","value"]),v("div",Et,[s(X,{src:n(m),coords:n(d),width:"32",description:"Attack range"},null,8,["src","coords"]),v("span",Lt,$(b.item.atkRange)+$(b.item.weaponType==="normal"?" (melee)":""),1)]),v("div",Nt,[s(X,{src:n(m),coords:n(y),width:"32",description:"Attack speed"},null,8,["src","coords"]),v("span",Bt,$(b.item.atkSpeed),1)])]),_:1}),s(L,{cols:"6",class:"py-0"},{default:a(()=>[s(ye,{type:b.item.defType,value:b.item.def,"is-defend":""},null,8,["type","value"])]),_:1}),K(b.$slots,"attributes",{},void 0,!0)]),_:3})]),_:3})]),_:3}),(O=n(h))!=null&&O.length?(_(),T(M,{key:1,title:"Upgrades used",value:"upgrades"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",Ut,[(_(!0),C(R,null,A(n(h),oe=>(_(),T(Ue,{item:oe,src:n(r),coords:n(f)(oe.id,oe.iconsCount)},null,8,["item","src","coords"]))),256))])]),_:1})]),_:1})):P("",!0)]}),_:3},8,["modelValue"])],64)}}}),ae=z(Ft,[["__scopeId","data-v-f314cd24"]]),Ot=["innerHTML"],At={class:"d-flex justify-center"},Gt=V({__name:"DetailsHero",props:{item:{}},async setup(e){let o,u;const c=I("raceName"),{iconProps:m,iconsSrc:t}=([o,u]=U(()=>B(c)),o=await o,u(),o),[l,{str:d,int:y,agi:x}]=me(),f=k(()=>{if(!e.item.items)return[];const r=e.item.items.map(({level:i})=>i);if(!(r!=null&&r.length))return[];const p=r.filter(Ke).sort((i,w)=>i-w).reduce((i,w,h)=>(i[w]=Ee[h],i),{});return e.item.items.map(i=>({...i,hotkey:p[i.level]}))});return(r,p)=>{const i=ce,w=H,h=F,b=ae;return _(),T(b,{item:r.item},{fullname:a(()=>[v("div",{innerHTML:r.item.fullName,class:"text-center text-subtitle-1"},null,8,Ot)]),attributes:a(()=>[s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(i,{width:"32",src:n(l),coords:n(d),padding:[0,8,8,0]},null,8,["src","coords"]),v("div",{class:j({"text-yellow":r.item.stat==="str","font-bold":r.item.stat==="str"})},$(r.item.str)+"+"+$(r.item.strLvl),3)]),_:1}),s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(i,{width:"32",src:n(l),coords:n(x),padding:[0,8,8,0]},null,8,["src","coords"]),v("div",{class:j({"text-yellow":r.item.stat==="agi","font-bold":r.item.stat==="agi"})},$(r.item.agi)+"+"+$(r.item.agiLvl),3)]),_:1}),s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(i,{width:"32",src:n(l),coords:n(y),padding:[0,8,8,0]},null,8,["src","coords"]),v("div",{class:j({"text-yellow":r.item.stat==="int","font-bold":r.item.stat==="int"})},$(r.item.int)+"+"+$(r.item.intLvl),3)]),_:1})]),heroItems:a(()=>[n(f).length?(_(),T(M,{key:0,title:"Hero items",value:"items"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",At,[s(h,{items:n(f),size:.75},{default:a(({item:g})=>[s(w,{src:n(t),coords:n(m)(g.id),item:g},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]),_:1},8,["item"])}}}),zt=z(Gt,[["__scopeId","data-v-dc1de915"]]),Wt=["innerHTML"],qt={class:"d-flex justify-center"},Kt={class:"d-flex justify-center"},Zt=V({__name:"DetailsUpgrade",props:{item:{}},async setup(e){let o,u;const c=N(["spells","summons","affects"]),m=I("raceName"),{raceData:t,iconProps:l,iconsSrc:d}=([o,u]=U(()=>B(m)),o=await o,u(),o),y=k(()=>{var r;return((r=e.item.spells)==null?void 0:r.map(p=>p.summonUnit).flat().filter(Q).filter(Ze))??[]}),x=k(()=>e.item.spells),f=k(()=>{const r=Object.values(t.units).filter(({upgrades:i})=>i==null?void 0:i.includes(e.item.id)),p=t.bonuses.map(({units:i})=>i??[]).flat().filter(({upgrades:i})=>i==null?void 0:i.includes(e.item.id)).map(i=>{var h;const w=((h=t.bonuses.find(({units:b})=>b==null?void 0:b.some(({id:g})=>g===i.id)))==null?void 0:h.id)??"";return{...i,id:w}});return[...r,...p]});return(r,p)=>{const i=H,w=F,h=ae;return _(),T(_e,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(c),"onUpdate:modelValue":p[0]||(p[0]=b=>te(c)?c.value=b:null)},{default:a(()=>{var b;return[r.item.description?(_(),T(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",{class:"text-body-2",innerHTML:r.item.description},null,8,Wt)]),_:1})]),_:1})):P("",!0),(b=n(x))!=null&&b.length?(_(),T(M,{key:1,title:"Spells",value:"spells"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",qt,[s(w,{items:n(x),"disable-details":"","skip-hotkey":""},{default:a(({item:g})=>[s(i,{item:g,src:n(d),coords:n(l)(g.id,g.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0),(_(!0),C(R,null,A(n(y),g=>(_(),T(M,{title:`Summon: ${g.name}`,value:`summon-${g.id}`},{default:a(()=>[s(S,null,{default:a(()=>[s(h,{item:g},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),n(f).length?(_(),T(M,{key:2,title:"Affects",value:"affects"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",Kt,[s(w,{items:n(f),"disable-details":"","skip-hotkey":""},{default:a(({item:g})=>[s(i,{item:g,src:n(d),coords:n(l)(g.id,g.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]}),_:1},8,["modelValue"])}}}),Jt=V({__name:"DetailsSpell",props:{item:{}},setup(e){return(o,u)=>(_(),C("div"))}}),Qt={class:"cost"},Yt=V({__name:"CombineCost",props:{items:{},count:{}},setup(e){const[o,{gold:u}]=me(),c=k(()=>Te(e.items).reduce((m,{cost:t})=>{var l;return m+((l=t??[])==null?void 0:l.slice(0,e.count).reduce((d,y)=>d+(y??0),0))},0));return(m,t)=>{const l=ce,d=Re;return _(),T(d,null,{default:a(()=>[s(fe,{location:"top"},{activator:a(({props:y})=>[v("div",ue({class:"d-flex align-center"},y),[s(l,{src:n(o),coords:n(u),width:"16"},null,8,["src","coords"]),v("span",Qt,$(n(c)),1)],16)]),default:a(()=>[K(m.$slots,"default",{},()=>[t[0]||(t[0]=E("Total cost"))],!0)]),_:3})]),_:3})}}}),be=z(Yt,[["__scopeId","data-v-1bade672"]]),Xt=["innerHTML"],es={class:"d-flex justify-center"},ts={class:"d-flex justify-center"},ss=V({__name:"DetailsBonus",props:{item:{}},async setup(e){let o,u;const c=I("objFinder"),m=I("raceName"),{iconProps:t,iconsSrc:l}=([o,u]=U(()=>B(m)),o=await o,u(),o),d=N(["grid","opens"]);$e(()=>e.item,r=>{var p;d.value=["grid"].concat(((p=r.units)==null?void 0:p.map(({id:i})=>`unit-${i}`))??[])});const y=k(()=>{var r;return(((r=e.item.spells)==null?void 0:r.length)??0)>1?!0:[e.item.units,e.item.upgrades].some(p=>!!(p!=null&&p.length))}),x=k(()=>[...(e.item.spells??[]).filter(({name:r})=>!!r),...e.item.upgrades??[]]),f=k(()=>e.item.relatedID.map(r=>c("upgrade",r)).filter(Q));return(r,p)=>{const i=be,w=H,h=F,b=ae;return _(),T(_e,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(d),"onUpdate:modelValue":p[0]||(p[0]=g=>te(d)?d.value=g:null)},{default:a(()=>[r.item.description?(_(),T(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",{class:"text-body-2",innerHTML:r.item.description},null,8,Xt)]),_:1})]),_:1})):P("",!0),n(y)&&n(x).length?(_(),T(M,{key:1,value:"grid"},{default:a(()=>[s(ie,{width:"100%",class:"d-flex"},{default:a(()=>[p[2]||(p[2]=v("span",{class:"mr-auto"},"Bonus spells/upgrades",-1)),s(i,{items:r.item.upgrades??[]},{default:a(()=>p[1]||(p[1]=[E(" Total cost ")])),_:1},8,["items"])]),_:1}),s(S,null,{default:a(()=>[v("div",es,[n(y)&&n(x).length?(_(),T(h,{key:0,items:n(x),"disable-details":"","show-empty":""},{default:a(({item:g})=>[s(w,{src:n(l),coords:n(t)(g.id,g.iconsCount),item:g},null,8,["src","coords","item"])]),_:1},8,["items"])):P("",!0)])]),_:1})]),_:1})):P("",!0),(_(!0),C(R,null,A(r.item.units,g=>(_(),T(M,{title:`Unit: ${g.name}`,value:`unit-${g.id}`},{default:a(()=>[s(S,null,{default:a(()=>[s(b,{item:g},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),n(f).length?(_(),T(M,{key:2,title:"Unlocked upgrades",value:"opens"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",ts,[s(h,{items:n(f),"disable-details":"","skip-hotkey":""},{default:a(({item:g})=>[s(w,{src:n(l),coords:n(t)(g.id,g.iconsCount),item:g},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])}}}),ns=({item:e})=>{const o=Te(e);if(o){if(Je(o))return W(ae,{item:o});if(Qe(o))return W(zt,{item:o});if(Ye(o))return W(Zt,{item:o});if(Ce(o))return W(Jt,{item:o});if(Pe(o))return W(ss,{item:o})}},as={key:0,class:"d-flex align-center justify-space-between panel-header pb-2 elevation-1 mb-2"},os=["innerHTML"],ls={class:"panel-details"},is=V({__name:"DetailsProvider",props:{objFinder:{type:Function},raceName:{}},async setup(e){let o,u;const{iconProps:c,iconsSrc:m}=([o,u]=U(()=>B(e.raceName)),o=await o,u(),o),t=N(null),l=ht(),d=k({get:()=>!!t.value,set:f=>{f||(t.value=null)}});Xe(()=>{l.value&&["bonus","spell","unit","hero","upgrade"].forEach(f=>{var p;if(!l.value||((p=t.value)==null?void 0:p.id)===l.value)return;const r=e.objFinder(f,l.value);r&&(t.value=r)})}),$e(()=>t.value,f=>l.value=f==null?void 0:f.id);const y=f=>{t.value=f},x=()=>{var f;navigator.clipboard.writeText(((f=t.value)==null?void 0:f.id)||"")};return q("detailsSet",y),q("objFinder",e.objFinder),q("raceName",e.raceName),(f,r)=>{const p=ce,i=ns,w=Re;return _(),C(R,null,[s(w,null,{default:a(()=>[s(xt,{modelValue:n(d),"onUpdate:modelValue":r[1]||(r[1]=h=>te(d)?d.value=h:null),location:"left",temporary:"","disable-resize-watcher":"",elevation:"4",class:"pa-2",width:"400","disable-route-watcher":""},{default:a(()=>[n(t)?(_(),C("div",as,[s(fe,{color:"transparent"},{activator:a(({props:h})=>[s(p,ue({src:n(m),coords:n(c)(n(t).id),width:"32"},h,{onClick:x}),null,16,["src","coords"])]),default:a(()=>[E(" ID: "+$(n(t).id),1)]),_:1}),v("span",{innerHTML:n(t).name,class:"text-h6 mx-2"},null,8,os),s(G,{density:"comfortable",icon:"",flat:"",onClick:r[0]||(r[0]=h=>y(null))},{default:a(()=>[s(Me,{icon:"$close"})]),_:1})])):P("",!0),v("div",ls,[s(i,{item:n(t)},null,8,["item"])])]),_:1},8,["modelValue"])]),_:1}),K(f.$slots,"default",{},void 0,!0)],64)}}}),rs=z(is,[["__scopeId","data-v-e1fba027"]]),cs={style:{"grid-row":"span 2","grid-column":"1"}},us=["innerHTML"],ds=["innerHTML"],ms=V({__name:"RaceDescription",props:{race:{}},setup(e){const o=k(()=>e.race.description.replace(new RegExp(String.raw`^\s*?<span[^>]*?>.*?${e.race.name}.*?<\/span>`,"si"),"").replace(/\s+?(?:<br\s?\/?>)*/,"")),u=k(()=>(e.race.description.match(new RegExp(String.raw`#[a-zA-Z0-9]{6,8}(?=[^<]*?(?:${e.race.name}))`))??["white"])[0]);return(c,m)=>{const t=Y;return _(),C("div",cs,[s(t,{title:"",id:"details","full-height":!1},{title:a(()=>[v("h1",{class:"text-wrap text-h3",style:de({color:n(u)}),innerHTML:c.race.name},null,12,us)]),default:a(()=>[v("div",{innerHTML:n(o)},null,8,ds)]),_:1})])}}}),ps=["innerHTML"],fs={key:0,class:"text-subtitle-1"},vs={class:"text-yellow"},_s={key:1,class:"text-subtitle-1"},bs={key:0,class:"text-green"},ys=V({__name:"RaceFortress",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N()),u=k(()=>[e.race.t1spell,e.race.t2spell,e.race.ultiData].filter(Q)),c=k(()=>e.race.magic.map((t,l)=>({...t,hotkey:Ee[l]})).concat(...Object.values(e.race.baseUpgrades))),m=t=>{const l=Object.values(e.race.units).filter(({upgrades:d})=>d==null?void 0:d.includes(t.id)).map(({id:d})=>d);o.value=[t.id,...l]};return(t,l)=>{const d=ve,y=se,x=be,f=F,r=re,p=Y;return _(),T(p,{title:"Fortress",class:"d-flex flex-column justify-start","full-height":!1,id:"fortress"},{title:a(()=>[s(d,{"hide-dot":"",item:t.race.buildings.fort},{default:a(()=>[s(G,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>l[1]||(l[1]=[v("b",null,"Fortress",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(y,{key:"fort-attack",class:"ml-1",type:t.race.buildings.fort.atkType},null,8,["type"])]),appendHead:a(()=>[s(x,{key:"fort-cost",class:"mr-1",items:n(c)},null,8,["items"])]),default:a(()=>[s(f,{class:"mx-auto",items:t.race.auras},{default:a(({item:i})=>[s(n(H),{item:i,src:t.icons,coords:t.iconProps(i.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(i.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"]),s(le,{class:"my-3 w-100"}),s(f,{class:"mx-auto",items:n(c)},{default:a(({item:i})=>[s(n(H),{item:i,src:t.icons,coords:!("level"in i)||(i.iconsCount??0)<=1?t.iconProps(i.id,i.iconsCount):t.iconProps(`${i.id}-${i.level}`),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(i.id)}]),onMouseenter:()=>m(i),onMouseout:l[0]||(l[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),s(le,{class:"my-3 w-100"}),s(f,{class:"mx-auto",items:n(u)},{default:a(({item:i})=>[("isSpellObject"in t?t.isSpellObject:n(Ce))(i)?(_(),T(n(H),{key:0,item:i,src:t.icons,coords:t.iconProps(i.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(i.id)}])},null,8,["item","src","coords","class"])):(_(),T(r,{key:1,src:t.icons,coords:t.iconProps(i.id)},{tooltip:a(()=>[v("div",{class:"text-h6",innerHTML:i.name.replace(/\[.+\]/g,"")},null,8,ps),l[4]||(l[4]=v("br",null,null,-1)),"damageTime"in i?(_(),C("div",fs,[l[2]||(l[2]=E(" Time to full damage: ")),v("span",vs,$(i.damageTime==0?"Instant":i.damageTime+"s"),1)])):P("",!0),"stealInterrupt"in i?(_(),C("div",_s,[l[3]||(l[3]=E(" Interrupts mana steal: ")),v("span",{class:j(i.stealInterrupt?"text-green":"text-red")},$(i.stealInterrupt?"Yes":"No"),3),i.fakeStealInterrupt?(_(),C("span",bs," (+ Decoy UW) ")):P("",!0)])):P("",!0)]),_:2},1032,["src","coords"]))]),_:1},8,["items"])]),_:1})}}}),gs=V({__name:"RaceTowers",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N());k(()=>Object.fromEntries(e.race.towerUpgrades.map(m=>[m.id,m])));const u=k(()=>Object.values(e.race.bonuses).reduce((m,{id:t,relatedID:l})=>(l.forEach(d=>{m[d]=t}),m),{})),c=m=>{const t=Object.values(e.race.units).filter(({upgrades:l})=>l==null?void 0:l.includes(m.id)).map(({id:l})=>l);o.value=[m.id,u.value[m.id],...t]};return(m,t)=>{const l=ve,d=se,y=be,x=H,f=F,r=Y;return _(),T(r,{title:"Towers","full-height":!1,class:"d-flex flex-column",id:"upgrades"},{title:a(()=>[s(l,{"hide-dot":"",item:m.race.buildings.tower},{default:a(()=>[s(G,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>t[1]||(t[1]=[v("b",null,"Towers",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(d,{key:"tower-attack",class:"ml-1",type:m.race.buildings.tower.atkType},null,8,["type"])]),appendHead:a(()=>[s(y,{key:"tower-cost",items:m.race.towerUpgrades,count:3},{default:a(()=>t[2]||(t[2]=[E(" Total cost (Lv3) ")])),_:1},8,["items"])]),default:a(()=>[s(f,{class:"mx-auto",items:m.race.towerUpgrades,restrictedSlots:["Q","W"]},{default:a(({item:p})=>[s(x,{item:p,src:m.icons,coords:m.iconProps(p.id,p.iconsCount),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(p.id)}]),onMouseenter:()=>c(p),onMouseout:t[0]||(t[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"])]),_:1})}}}),hs={class:"d-flex flex-wrap"},xs=["innerHTML"],ks=V({__name:"RaceBonuses",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N()),u=new Intl.Collator("en").compare,c=k(()=>Object.values(e.race.bonusBuildings).sort(({name:t},{name:l})=>u(t,l))),m=t=>{if(!Pe(t)){o.value=[t.id,...e.race.bonuses.filter(({buildingId:d})=>d===t.id).map(({id:d})=>d)].filter(Q);return}const l=Object.values(e.race.units).filter(({hotkey:d})=>{var y;return(y=t.units)==null?void 0:y.some(x=>x.hotkey===d)}).map(({id:d})=>d);o.value=[t.id,t.buildingId,...t.relatedID,...l]};return(t,l)=>{const d=H,y=F,x=Y;return _(),C("div",{style:de({gridRow:`span ${1+Math.floor(n(c).length/5)}`})},[s(x,{title:"Bonuses","full-height":!1,class:"d-flex flex-column align-center justify-start",id:"bonuses"},{title:a(()=>[s(fe,{"open-on-click":"","open-on-hover":!1,offset:[-4,0],"close-on-back":"",location:"top",transition:{component:n(rt)}},{activator:a(({props:f})=>[s(G,ue({size:"large",class:"mx-auto",variant:"text",color:"yellow"},f),{default:a(()=>l[2]||(l[2]=[v("b",null,"Bonuses",-1)])),_:2},1040)]),default:a(()=>[l[3]||(l[3]=v("span",null,"There is no easter eggs",-1))]),_:1},8,["transition"])]),default:a(()=>[s(y,{items:t.race.bonuses},{default:a(({item:f})=>[s(d,{item:f,src:t.icons,coords:t.iconProps(f.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(f.id)}]),onMouseenter:()=>m(f),onMouseout:l[0]||(l[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),l[4]||(l[4]=v("div",{class:"my-2 text-h6"},"Buildings",-1)),v("div",hs,[(_(!0),C(R,null,A(n(c),f=>(_(),T(G,{class:"my-1 mx-2 cursor-default",variant:"text",size:"x-small",active:n(o)&&n(o).includes(f.id),onMouseover:()=>m(f),onMouseout:l[1]||(l[1]=()=>o.value=void 0)},{default:a(()=>[v("span",{innerHTML:f.name},null,8,xs)]),_:2},1032,["active","onMouseover"]))),256))])]),_:1})],4)}}}),ws=V({__name:"RaceBarracks",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N());I("objFinder");const u={melee:"A",range:"S",mage:"D",siege:"F",air:"E",catapult:"R"},c=k(()=>Object.entries(e.race.units).map(([t,l])=>({...l,hotkey:u[t]}))),m=t=>{o.value=[t.id,...t.upgrades??[]]};return(t,l)=>{const d=ve,y=se,x=F,f=Y;return _(),T(f,{title:"Barracks","full-height":!1,class:"d-flex flex-column",id:"units"},{title:a(()=>[s(d,{"hide-dot":"",item:t.race.buildings.barrack},{default:a(()=>[s(G,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>l[1]||(l[1]=[v("b",null,"Barracks",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(y,{key:"barrack-attack",class:"ml-1",type:t.race.buildings.barrack.atkType},null,8,["type"])]),default:a(()=>[s(x,{class:"mx-auto",items:n(c)},{default:a(({item:r})=>[s(n(H),{item:r,src:t.icons,coords:t.iconProps(r.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(r.id)}]),onMouseenter:()=>m(r),onMouseout:l[0]||(l[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),s(le,{class:"my-3 w-100"}),s(x,{class:"mx-auto",items:t.race.heroes},{default:a(({item:r})=>[s(n(H),{item:r,src:t.icons,coords:t.iconProps(r.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(r.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"])]),_:1})}}}),Ts=V({__name:"racePage",async setup(e){let o,u;const c=et(),[m]=[tt().params.race].flat(),{raceData:t,iconProps:l,iconsSrc:d,version:y}=([o,u]=U(()=>B(m)),o=await o,u(),o),x=(i,w)=>{switch(i){case"upgrade":return Object.values(t.baseUpgrades).concat(t.magic).concat(t.towerUpgrades).find(h=>h.id===w);case"unit":return Object.values(t.units).find(h=>h.id===w);case"bonus":return Object.values(t.bonuses).find(h=>h.id===w);case"hero":return t.heroes.find(h=>h.id===w);case"spell":return[t.t1spell,t.t2spell].find(h=>h.id===w);default:return}},f=Se("iconSize",wt),r=k(()=>({gridTemplateColumns:`repeat(auto-fill, minmax(${+f.value*5}px, 1fr))`})),p=kt?k(()=>{}):N();return q("hover",p),c.runWithContext(()=>{_t({title:`${t.name} v${y}`,description:`${t.name} of Survival Chaos v${y}: race info, bonuses, upgrades, units and heroes`,ogDescription:`${t.name} of Survival Chaos v${y}: race info, bonuses, upgrades, units and heroes`}),bt({link:[{rel:"preload",as:"image",href:d}]})}),(i,w)=>{const h=Vt,b=rs;return _(),C("div",null,[s(h,{class:"mb-2"}),s(b,{"obj-finder":x,"race-name":n(m)},{default:a(()=>[v("div",{class:"race-container",style:de(n(r))},[s(ms,{race:n(t),style:{"flex-basis":"300px"}},null,8,["race"]),s(ys,{race:n(t),icons:n(d),"icon-props":n(l)},null,8,["race","icons","icon-props"]),s(gs,{race:n(t),icons:n(d),"icon-props":n(l)},null,8,["race","icons","icon-props"]),s(ks,{race:n(t),icons:n(d),"icon-props":n(l)},null,8,["race","icons","icon-props"]),s(ws,{race:n(t),icons:n(d),"icon-props":n(l)},null,8,["race","icons","icon-props"])],4)]),_:1},8,["race-name"])])}}}),Gs=z(Ts,[["__scopeId","data-v-7ec59a90"]]);export{Gs as default};
