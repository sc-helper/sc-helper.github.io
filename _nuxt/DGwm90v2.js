import{g as z,u as I}from"./DWs2N1-D.js";import{I as D,D as N}from"./DYmvtetA.js";import{d as b,i as j,c as v,t as l,aT as A,aP as U,aQ as V,aR as $,q as E,o as d,u as f,e as w,w as B,G as g,_ as O,a as h,F as S,b as H,f as T,n as F}from"./CpASVsld.js";import{V as L}from"./CHrc76zG.js";import{h as y}from"./Dd2277SN.js";var _,C;function q(){if(C)return _;C=1;function s(){}return _=s,_}var R=q();const W=z(R),G=b({__name:"DetailsWrapper",props:{item:{},hideDot:{type:Boolean,default:!1}},setup(s){const c=j("detailsSet",W),u=v(()=>{var a;if(!c)return!1;if(D)return!0;const n=l(s.item);return A(n)?Array("units","upgrades","spells").some(t=>{var i;return t in n&&!!((i=n[t])!=null&&i.length)}):U(n)||V(n)?!0:$(n)?!!((a=n.spells)!=null&&a.length):!1}),k=()=>{u.value&&(c==null||c(l(s.item)))};return(n,a)=>(d(),E(L,{dot:"",color:"primary",location:"left top",class:w(["details-badge",{"cursor-pointer":f(u)}]),"model-value":s.hideDot?!1:f(u),onClick:k},{default:B(()=>[g(n.$slots,"default",{},void 0,!0)]),_:3},8,["model-value","class"]))}}),M=O(G,[["__scopeId","data-v-841d6807"]]),P=b({__name:"WarGrid",props:{items:{},size:{default:1},skipHotkey:{type:Boolean,default:!1},restrictedSlots:{default:()=>[]},disableDetails:{type:Boolean,default:!1},showEmpty:{type:Boolean,default:!1}},setup(s){const c=I("iconSize",N),u=v(()=>{const a=Number(c.value);return(isNaN(a)?52:a)*l(s.size)}),k=v(()=>{if(s.skipHotkey)return l(s.items);const a=l(s.items).slice(),t=Array(y.length).fill(void 0);s.restrictedSlots.map(e=>e.toLocaleUpperCase()).forEach(e=>{const o=y.indexOf(e);o>=0&&(t[o]=null)});const i=Array(),r=Array();for(;a.length;){const e=a.shift();if(!e)continue;if(!e.hotkey){i.push(e);continue}let o=y.indexOf(e.hotkey.toLocaleUpperCase());if(o<0){i.push(e);continue}if(t[o]){r.push(e);continue}t[o]=e}r.forEach(e=>{let o=y.indexOf(e.hotkey)%4;for(;t[o]!==void 0;)o+=4;t[o]=e}),i.forEach(e=>{const o=t.findIndex(m=>m===void 0);o<0?t.push(e):t[o]=e});let p=Math.ceil(t.length/4);for(let e=0;e<p;e++){const o=e*4,m=[0,1,2,3].map(x=>x+o);m.every(x=>!t[x])&&(--p,--e,t.splice(m[0],4))}return t}),n=v(()=>({gridTemplateColumns:`repeat(4, ${l(u.value)}px)`,gridTemplateRows:`repeat(auto-fill, ${l(u.value)}px)`}));return(a,t)=>{const i=M;return d(),h("div",{class:"container",style:F(f(n))},[(d(!0),h(S,null,H(f(k),(r,p)=>(d(),h("div",{class:w(["grid-item",{"empty-item":s.showEmpty&&!r}]),key:(r==null?void 0:r.id)??p},[r?(d(),h(S,{key:0},[!s.disableDetails||f(D)?(d(),E(i,{key:0,item:r},{default:B(()=>[g(a.$slots,"default",{item:r},void 0,!0)]),_:2},1032,["item"])):g(a.$slots,"default",{key:1,item:r},void 0,!0)],64)):T("",!0)],2))),128))],4)}}}),Y=O(P,[["__scopeId","data-v-8c36ba60"]]);export{Y as _,M as a};
