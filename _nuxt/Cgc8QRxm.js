import{_ as k,V as E}from"./D1yPyYZI.js";import{_ as F,u as $}from"./DUOY8jpb.js";import{u as L}from"./TgZA0iSq.js";import{u as M}from"./DhBbBb8n.js";import{e as P,c as b,h as y,j as w,aS as S,aT as z,b as f,L as p,z as V,k as T,y as B,q as R,m as j,_ as x,an as A,i as g,aU as _,O as H,aV as K,f as O}from"./B3vQzCNS.js";import{V as q}from"./CU3khMfE.js";const G=["innerHTML"],U=P({__name:"WarTooltip",props:{description:{},descriptionClass:{},disabled:{type:Boolean},src:{},coords:{},padding:{}},setup(a){const t=L("tooltipsDisabled","false"),s=M(),d=b(()=>{const o=a.disabled||t.value==="true";return s.value?!o:o});return(o,n)=>{const r=k,e=F;return w(),y("div",S(z(o.$attrs)),[f(r,null,{default:V(()=>[f(E,{location:"bottom center",activator:"parent","max-width":"350","close-on-content-click":"",transition:{component:T(q)},disabled:T(d),class:"tooltip-opacity"},{default:V(()=>[p(o.$slots,"tooltip:body",{},()=>[p(o.$slots,"tooltip",{},void 0,!0),o.description?(w(),y("div",{key:0,class:R([o.descriptionClass,"war-tooltip"]),innerHTML:o.description},null,10,G)):B("",!0),p(o.$slots,"postfix",{},void 0,!0)],!0)]),_:3},8,["transition","disabled"])]),_:3}),f(e,j({src:o.src,coords:o.coords,padding:o.padding,width:"100%"},o.$attrs),null,16,["src","coords","padding"]),p(o.$slots,"default",{},void 0,!0)],16)}}}),oo=x(U,[["__scopeId","data-v-22950dea"]]),W=async(a,t)=>{const s=A(),[d]=[s.params.versionType].flat(),[o]=[s.params.version].flat(),n=g("fetchVersionType",d||"og"),r=g("fetchVersion",o||"latest"),{data:e,error:i}=await $(`data-file-${n}-${r}`,()=>{const u=H[n];if(!u)throw new Error("unknown version type");let c=r;c==="latest"&&(c=K[n]);const l=u[c];if(!l)throw new Error("unknown version");return l()},{watch:[()=>a,()=>t]});if(e.value,i.value)throw _(i.value??"");return e},eo=async a=>{var n,r;const t=await W();if(!t.value)throw _("no versionIndex");const{data:s}=await $(`race-${t.value.version}-${a}`,()=>{const e=O(t);if(!e||!(a in e.racesData))throw new Error("No race found");return e.racesData[a]()}),d=b(()=>{var e;return(e=t.value)==null?void 0:e.racesIcons[a]});function o(e,i){var u;if(!i||i===1){const[c,l,v,m]=((u=s.value)==null?void 0:u.icons[e])??[0,0,1,1];return{x:c,y:l,width:v,height:m}}return Array.from({length:i},(c,l)=>{var h;const v=`${e}-${l+1}`,[m,C,D,I]=((h=s.value)==null?void 0:h.icons[v])??[0,0,1,1];return{x:m,y:C,width:D,height:I}})}if(!s.value)throw _("no data loaded");return{raceData:(n=s.value)==null?void 0:n.data,raceIconsCoords:(r=s.value)==null?void 0:r.icons,iconProps:o,iconsSrc:d.value,version:t.value.version,versionType:t.value.versionType}};export{oo as _,eo as u};
