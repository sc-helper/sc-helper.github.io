import{u as Ee,_ as Re}from"./HgZhTX9t.js";import{_ as Ae}from"./IOtqyAoW.js";import{u as Z}from"./3x8YQTbk.js";import{g as je,p as ke,u as Se,W as Pe,c as D,X as qe,b as F,m as de,o as Le,Y as fe,r as Ne,s as Be,f as I,A as B,S as Me,O as Te,Z as De,$ as Ie,e as We,a0 as Fe,h as A,y as k,z as me,j,k as a,M as pe,n as ze,F as L,l as U,q as W,D as He,_ as Ue}from"./7j1wTR2L.js";import{a as Xe,e as Ye,g as Ze}from"./BoyWSqx0.js";import{r as Ve}from"./-vsEa_js.js";import{m as Ge}from"./DbYZnSlv.js";import{u as Je}from"./DuZZPCa_.js";import{u as Ke,b as Qe}from"./DNdE8hGb.js";import{u as et,V as ve,a as he,m as tt,b as nt}from"./z0cDL_Eo.js";import"./BVNlUDmP.js";import"./i1RFnaT1.js";import"./ja-XJDvS.js";import"./CNZaugWT.js";const rt=ke({...tt(),...Le(nt(),["inline"])},"VCheckbox"),be=je()({name:"VCheckbox",inheritAttrs:!1,props:rt(),emits:{"update:modelValue":c=>!0,"update:focused":c=>!0},setup(c,h){let{attrs:f,slots:b}=h;const _=Se(c,"modelValue"),{isFocused:C,focus:R,blur:m}=et(c),y=Pe(),o=D(()=>c.id||`checkbox-${y}`);return Ke(()=>{const[T,w]=qe(f),O=ve.filterProps(c),s=he.filterProps(c);return F(ve,de({class:["v-checkbox",c.class]},T,O,{modelValue:_.value,"onUpdate:modelValue":r=>_.value=r,id:o.value,focused:C.value,style:c.style}),{...b,default:r=>{let{id:p,messagesId:v,isDisabled:E,isReadonly:V,isValid:S}=r;return F(he,de(s,{id:p.value,"aria-describedby":v.value,disabled:E.value,readonly:V.value},w,{error:S.value===!1,modelValue:_.value,"onUpdate:modelValue":P=>_.value=P,onFocus:R,onBlur:m}),b)}})}),{}}});var ne,xe;function ot(){if(xe)return ne;xe=1;var c=Xe(),h=function(){return c.Date.now()};return ne=h,ne}var re,ge;function st(){if(ge)return re;ge=1;var c=/\s/;function h(f){for(var b=f.length;b--&&c.test(f.charAt(b)););return b}return re=h,re}var oe,_e;function at(){if(_e)return oe;_e=1;var c=st(),h=/^\s+/;function f(b){return b&&b.slice(0,c(b)+1).replace(h,"")}return oe=f,oe}var se,ye;function it(){if(ye)return se;ye=1;var c=at(),h=Ve(),f=Ye(),b=NaN,_=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,R=/^0o[0-7]+$/i,m=parseInt;function y(o){if(typeof o=="number")return o;if(f(o))return b;if(h(o)){var T=typeof o.valueOf=="function"?o.valueOf():o;o=h(T)?T+"":T}if(typeof o!="string")return o===0?o:+o;o=c(o);var w=C.test(o);return w||R.test(o)?m(o.slice(2),w?2:8):_.test(o)?b:+o}return se=y,se}var ae,$e;function lt(){if($e)return ae;$e=1;var c=Ve(),h=ot(),f=it(),b="Expected a function",_=Math.max,C=Math.min;function R(m,y,o){var T,w,O,s,r,p,v=0,E=!1,V=!1,S=!0;if(typeof m!="function")throw new TypeError(b);y=f(y)||0,c(o)&&(E=!!o.leading,V="maxWait"in o,O=V?_(f(o.maxWait)||0,y):O,S="trailing"in o?!!o.trailing:S);function P(t){var d=T,g=w;return T=w=void 0,v=t,s=m.apply(g,d),s}function M(t){return v=t,r=setTimeout(i,y),E?P(t):s}function $(t){var d=t-p,g=t-v,x=y-d;return V?C(x,O-g):x}function q(t){var d=t-p,g=t-v;return p===void 0||d>=y||d<0||V&&g>=O}function i(){var t=h();if(q(t))return l(t);r=setTimeout(i,$(t))}function l(t){return r=void 0,S&&T?P(t):(T=w=void 0,s)}function u(){r!==void 0&&clearTimeout(r),v=0,T=p=w=r=void 0}function e(){return r===void 0?s:l(h())}function n(){var t=h(),d=q(t);if(T=arguments,w=this,p=t,d){if(r===void 0)return M(p);if(V)return clearTimeout(r),r=setTimeout(i,y),P(p)}return r===void 0&&(r=setTimeout(i,y)),s}return n.cancel=u,n.flush=e,n}return ae=R,ae}var ut=lt();const ct=Ze(ut),ie=c=>c?"$el"in c?c.$el:c:null,dt=({combineMap:c,colorsCount:h,stroke:f=4,excludeItems:b})=>{const _=fe({}),C=fe({}),R=Ne(null),m=Be(),y=D(()=>Array.from({length:I(h)},(s,r)=>`hsl(${360/I(h)*r} 30% 40%)`)),o=ct(()=>{const s=I(c),r=I(C),p=I(b),v=Ge(I(_),e=>{if(e)return{x:e.offsetLeft,y:e.offsetTop,w:e.offsetWidth,h:e.offsetHeight}}),E=Object.fromEntries(Object.values(v).filter(B).map(({y:e})=>[e,f*3])),V=Math.max(...Object.values(v).filter(B).map(({h:e})=>e)),S=Object.values(E).reduce((e,n,t,d)=>t?Math.min(Math.abs(Number(n)-Number(d[t-1])-V),e):e,1e4),P=e=>{let t=E[e]+f*3;return t>S-f&&(t=f),E[e]=t,t},M={},$=Math.min(...Object.values(v).filter(B).map(({w:e})=>e)),q=e=>{if(!(e in M))return M[e]=$/4,M[e];let n=M[e]+$/4;return n>$&&(n=$/4),M[e]=n,n},i={},l=e=>{if(!(e in i))return i[e]=0,y.value[0];let n=i[e]+1;return n>y.value.length-1&&(n=0),i[e]=n,y.value[n]};let u=-1;for(const e in v){if(p!=null&&p.includes(e))continue;u--;const n=v[e];if(!n)continue;const{x:t,y:d,w:g,h:x}=n,z=l(d),H=r[`${e}-connect-inner`];if(!H)continue;const le=Object.fromEntries(s[e].flat().map(N=>[N,r[`${e}-connect-${N}`]])),G=Object.values(le).filter(B);if(G.length!==s[e].flat().length)continue;const J=Object.fromEntries(s[e].flat().map(N=>[N,r[`${e}-child-${N}`]])),ue=Object.values(J).filter(B);if(ue.length!==s[e].flat().length)continue;ue.concat(G).concat(H).forEach(({style:N})=>{N.borderWidth=`${f/2}px`,N.borderColor=z,N.zIndex=`${u}`});const X=d+x+f+P(d);G.forEach(({style:N})=>{N.top=`${X}px`});const K=t+g/2-f/2;H.style.left=`${K}px`,H.style.top=`${d+x}px`,H.style.height=`${X-d-x}px`;for(const N in J){if(p!=null&&p.includes(N))continue;const Y=J[N],Q=le[N],ce=v[N];if(!ce||!Y||!Q)continue;const{x:ee,y:Ce,w:we}=ce,te=t===ee?ee+we/2-f/2:ee+q(N);Y.style.left=`${te}px`,Y.style.top=`${X+f/2}px`,Y.style.height=`${Ce-X}px`;const Oe=Math.min(K,te);Q.style.left=`${Oe}px`,Q.style.width=`${Math.abs(K-te)+f*.75}px`}}},200);return Me(()=>{var r;if(m.value=new ResizeObserver(()=>{o()}),!R.value)return;m.value.observe(R.value);const s=Object.values(_).filter(B).at(0);s&&((r=m.value)==null||r.observe(s))}),Te(R,(s,r)=>{var p,v,E;if(r&&((p=m.value)==null||p.unobserve(r)),s){(v=m.value)==null||v.observe(s);const V=Object.values(_).filter(B).at(0);V&&((E=m.value)==null||E.observe(V)),Ie(()=>o.flush())}}),De(()=>{var s;(s=m.value)==null||s.disconnect()}),{containerRef:s=>{R.value=ie(s)},itemRef:s=>r=>{_[s]=ie(r)},boundRef:(s,r,p)=>v=>{C[`${s}-${r}-${p}`]=ie(v)}}},ft={class:"d-flex align-center justify-end"},mt=["onClick","onMouseenter"],pt=["innerHTML"],vt=["data-debug"],ht=["data-debug"],bt=["data-debug"],xt=We({__name:"artifacts",async setup(c){let h,f;const b=new Intl.Collator("en").compare,_=Z("artiShowPath","false"),C=Z("artiDisabledTooltips","false"),R=Z("tooltipsDisabled","false"),{raceData:m,iconProps:y,iconsSrc:o,version:T}=([h,f]=Fe(()=>Ee("artifacts")),h=await h,f(),h),w=Z("iconSize"),O=D(()=>(m==null?void 0:m.items)??[]),s=D(()=>{const i=O.value.filter(({level:u,id:e})=>u>1&&!(e in m.combineMap)).map(({id:u})=>u),l=Object.entries(m.combineMap).filter(([,u])=>u.flat().every(e=>i.includes(e))).map(([u])=>u);return i.concat(l).map(u=>O.value.find(e=>e.id===u)).filter(B)}),r=D(()=>Math.max(...O.value.map(({level:i})=>i),0)),p=D(()=>Math.max(...O.value.reduce((i,{level:l})=>(i[l]||(i[l]=0),++i[l],i),[0]))),{boundRef:v,containerRef:E,itemRef:V}=dt({colorsCount:p,combineMap:m.combineMap,stroke:6}),S=D(()=>{const i=O.value.filter(({id:u})=>!s.value.some(e=>e.id===u)).sort(({level:u,hotkey:e},{level:n,hotkey:t})=>n!==u?n-u:b(e,t)),l=Array();do{const u=i.findIndex(({level:t},d,g)=>{var x;return((x=g[d+1])==null?void 0:x.level)!==t});if(u<0)continue;const e=i.splice(0,u+1),n=l[l.length-1];if(!n){l.push(e);continue}e.sort(({id:t})=>s.value.some(d=>(d==null?void 0:d.id)===t)?1:m.combineMap[n[0].id][0].includes(t)?-1:0),l.push(e)}while(i.length);return l.flat()}),P=D(()=>({gridTemplateColumns:`repeat(${p.value+1}, 1fr)`,gridTemplateRows:`repeat(${r.value}, 1fr)`})),M=Je(),$=Ne(Array()),q=i=>{const l=Array(),u=(e,n,t)=>{if(l.includes(e))return;l.push(e);const d=m.combineMap[e];d&&!t&&d.forEach(g=>g.forEach(x=>u(x,!0,!1))),n||Object.entries(m.combineMap).filter(([,g])=>g.some(x=>x.includes(e))).forEach(([g])=>u(g,!1,!0))};u(i,!1,!1),$.value=l};return Te(M,i=>{i&&q(i)}),Me(()=>{M.value&&q(M.value)}),Qe({title:`Artifacts v${T}`,description:"Artifacts of Survival Chaos: all heroes combined artifacts"}),(i,l)=>{const u=Re,e=Ae;return j(),A("div",null,[l[3]||(l[3]=k("div",{class:"text-center d-none"},[k("h1",{class:"text-h2 font-bold title mb-6"},"Artifacts")],-1)),F(e,{title:""},{default:me(()=>[k("div",ft,[F(be,{label:"Disable tooltips","true-value":"true","false-value":"false",modelValue:a(C),"onUpdate:modelValue":l[0]||(l[0]=n=>pe(C)?C.value=n:null),class:"mx-4"},null,8,["modelValue"]),F(be,{label:"Always show path","true-value":"true","false-value":"false",modelValue:a(_),"onUpdate:modelValue":l[1]||(l[1]=n=>pe(_)?_.value=n:null)},null,8,["modelValue"])]),k("div",{class:"container",ref:a(E)},[k("div",{class:"items-container",style:ze(a(P))},[(j(!0),A(L,null,U(a(r),n=>(j(),A("div",{class:W([`level${a(r)+1-n}`,"text-h5","text-no-wrap"])}," Lvl "+He(n),3))),256)),(j(!0),A(L,null,U(a(S).concat(a(s)),n=>(j(),A("div",{class:W([`level${a(r)+1-n.level}`,"cursor-pointer",{depressed:a($).length&&!a($).includes(n.id),selected:a(M)===n.id}]),ref_for:!0,ref:a(V)(n.id),onClick:()=>M.value=a(M)===n.id?void 0:n.id,onMouseenter:()=>!a(M)&&q(n.id),onMouseout:l[2]||(l[2]=()=>!a(M)&&($.value=[]))},[F(u,{src:a(o),description:n.description,coords:a(y)(n.id),disabled:a(C)==="true"||a(R)==="true",width:+a(w)*.75},{tooltip:me(()=>[k("div",{innerHTML:n.name},null,8,pt)]),_:2},1032,["src","description","coords","disabled","width"])],42,mt))),256))],4),k("div",{class:W(["path-container",{hidden:a(_)!=="true"&&!a($).length}])},[(j(!0),A(L,null,U(a(m).combineMap,(n,t)=>(j(),A(L,{key:`node-${t}`},[k("div",{ref_for:!0,ref:a(v)(t,"connect","inner"),"data-debug":`${t}-connect-inner`,class:W({depressed:a($).length&&!a($).includes(t),pathNode:!0})},null,10,vt),(j(!0),A(L,null,U(n,(d,g)=>(j(),A(L,{key:`node-${t}-${g}`},[(j(!0),A(L,null,U(d,x=>(j(),A(L,null,[k("div",{ref_for:!0,ref:a(v)(t,"connect",x),"data-debug":`${t}-connect-${x}`,class:W({depressed:a($).length&&![t,x].every(z=>a($).includes(z)),pathNode:!0,optionalNode:g!==0})},null,10,ht),k("div",{ref_for:!0,ref:a(v)(t,"child",x),"data-debug":`${t}-${x}`,class:W({depressed:a($).length&&![t,x].every(z=>a($).includes(z)),pathNode:!0,optionalNode:g!==0})},null,10,bt)],64))),256))],64))),128))],64))),128))],2)],512)]),_:1})])}}}),kt=Ue(xt,[["__scopeId","data-v-d86b3fdd"]]);export{kt as default};
