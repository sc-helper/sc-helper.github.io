import{_ as Oe}from"./BC0Zv9JR.js";import{u as U,_ as ie,a as re}from"./CSFyjndS.js";import{q as Z,s as ee,S as I,e as s,al as $e,am as Ae,c as w,an as Ge,a6 as xe,T as K,a1 as ze,a3 as We,R as D,a5 as qe,ao as Ke,d as V,I as B,g as C,o as _,ap as he,b as a,F as R,j as z,u as n,a as $,f as v,L as j,i as E,t as T,_ as F,B as N,E as J,r as G,ah as P,J as te,aq as Ye,ar as Ze,D as Te,m as ce,w as Ce,as as Je,h as q,at as Qe,au as Xe,av as Pe,aw as Se,ax as et,K as de,ay as tt,ak as st}from"./BNQMPcaD.js";import{u as Ve}from"./B2GSVeKB.js";import{b as nt,c as at,V as ot,a as ke}from"./CiDjLoma.js";import{a as Ie,m as De,b as lt,c as it,V as W}from"./BcXCCUSf.js";import{a as se,_ as H}from"./SLNe-B-s.js";import{u as ue}from"./BSzlzPGv.js";import{a as L,V as we}from"./Bk1XG-t1.js";import{V as rt,a as ct}from"./D0dzZevg.js";import{a as ne,g as me,R as dt,j as je,n as ut,o as Me,V as He,p as mt,q as pt,r as ft,b as Re,d as vt,e as _t,u as bt,s as gt}from"./BR6qrQMT.js";import{u as yt,m as xt,_ as Ee,V as pe}from"./CvI02810.js";import{h as Le,_ as O,a as fe}from"./BNi_Eo-R.js";import{u as ht}from"./1EnaqbT3.js";import{V as kt}from"./BzkgXpjA.js";import{_ as Q}from"./CLDWsNTR.js";import{I as wt,D as $t}from"./DYmvtetA.js";import"./DbYZnSlv.js";/* empty css        */const Y=Symbol.for("vuetify:v-expansion-panel"),Ne=ee({...me(),...xt()},"VExpansionPanelText"),S=Z()({name:"VExpansionPanelText",props:Ne(),setup(e,l){let{slots:d}=l;const r=I(Y);if(!r)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:u,onAfterLeave:t}=yt(e,r.isSelected);return ne(()=>s(rt,{onAfterLeave:t},{default:()=>{var o;return[$e(s("div",{class:["v-expansion-panel-text",e.class],style:e.style},[d.default&&u.value&&s("div",{class:"v-expansion-panel-text__wrapper"},[(o=d.default)==null?void 0:o.call(d)])]),[[Ae,r.isSelected.value]])]}})),{}}}),Ue=ee({color:String,expandIcon:{type:xe,default:"$expand"},collapseIcon:{type:xe,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...me(),...mt()},"VExpansionPanelTitle"),le=Z()({name:"VExpansionPanelTitle",directives:{Ripple:dt},props:Ue(),setup(e,l){let{slots:d}=l;const r=I(Y);if(!r)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:u,backgroundColorStyles:t}=je(e,"color"),{dimensionStyles:o}=ut(e),m=w(()=>({collapseIcon:e.collapseIcon,disabled:r.disabled.value,expanded:r.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),y=w(()=>r.isSelected.value?e.collapseIcon:e.expandIcon);return ne(()=>{var k;return $e(s("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":r.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},u.value,e.class],style:[t.value,o.value,e.style],type:"button",tabindex:r.disabled.value?-1:void 0,disabled:r.disabled.value,"aria-expanded":r.isSelected.value,onClick:e.readonly?void 0:r.toggle},[s("span",{class:"v-expansion-panel-title__overlay"},null),(k=d.default)==null?void 0:k.call(d,m.value),!e.hideActions&&s(Me,{defaults:{VIcon:{icon:y.value}}},{default:()=>{var b;return[s("span",{class:"v-expansion-panel-title__icon"},[((b=d.actions)==null?void 0:b.call(d,m.value))??s(He,null,null)])]}})]),[[Ge("ripple"),e.ripple]])}),{}}}),Be=ee({title:String,text:String,bgColor:String,..._t(),...De(),...vt(),...Re(),...Ue(),...Ne()},"VExpansionPanel"),M=Z()({name:"VExpansionPanel",props:Be(),emits:{"group:selected":e=>!0},setup(e,l){let{slots:d}=l;const r=Ie(e,Y),{backgroundColorClasses:u,backgroundColorStyles:t}=je(e,"bgColor"),{elevationClasses:o}=pt(e),{roundedClasses:m}=ft(e),y=w(()=>(r==null?void 0:r.disabled.value)||e.disabled),k=w(()=>r.group.items.value.reduce((c,p,f)=>(r.group.selected.value.includes(p.id)&&c.push(f),c),[])),b=w(()=>{const c=r.group.items.value.findIndex(p=>p.id===r.id);return!r.isSelected.value&&k.value.some(p=>p-c===1)}),i=w(()=>{const c=r.group.items.value.findIndex(p=>p.id===r.id);return!r.isSelected.value&&k.value.some(p=>p-c===-1)});return K(Y,r),ne(()=>{const c=!!(d.text||e.text),p=!!(d.title||e.title),f=le.filterProps(e),h=S.filterProps(e);return s(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":b.value,"v-expansion-panel--after-active":i.value,"v-expansion-panel--disabled":y.value},m.value,u.value,e.class],style:[t.value,e.style]},{default:()=>[s("div",{class:["v-expansion-panel__shadow",...o.value]},null),s(Me,{defaults:{VExpansionPanelTitle:{...f},VExpansionPanelText:{...h}}},{default:()=>{var g;return[p&&s(le,{key:"title"},{default:()=>[d.title?d.title():e.title]}),c&&s(S,{key:"text"},{default:()=>[d.text?d.text():e.text]}),(g=d.default)==null?void 0:g.call(d)]}})]})}),{groupItem:r}}}),Tt=["default","accordion","inset","popout"],Ct=ee({flat:Boolean,...it(),...Ke(Be(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...qe(),...me(),...Re(),variant:{type:String,default:"default",validator:e=>Tt.includes(e)}},"VExpansionPanels"),ve=Z()({name:"VExpansionPanels",props:Ct(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:d}=l;const{next:r,prev:u}=lt(e,Y),{themeClasses:t}=ze(e),o=w(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return We({VExpansionPanel:{bgColor:D(e,"bgColor"),collapseIcon:D(e,"collapseIcon"),color:D(e,"color"),eager:D(e,"eager"),elevation:D(e,"elevation"),expandIcon:D(e,"expandIcon"),focusable:D(e,"focusable"),hideActions:D(e,"hideActions"),readonly:D(e,"readonly"),ripple:D(e,"ripple"),rounded:D(e,"rounded"),static:D(e,"static")}}),ne(()=>s(e.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},t.value,o.value,e.class],style:e.style},{default:()=>{var m;return[(m=d.default)==null?void 0:m.call(d,{prev:u,next:r})]}})),{next:r,prev:u}}}),Pt=Z()({name:"VSlideGroupItem",props:De(),emits:{"group:selected":e=>!0},setup(e,l){let{slots:d}=l;const r=Ie(e,nt);return()=>{var u;return(u=d.default)==null?void 0:u.call(d,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}}),St=["innerHTML"],Vt=V({__name:"RaceSelectRibbon",async setup(e){let l,d;const r=Ve("iconSize"),{raceData:u,iconProps:t,iconsSrc:o}=([l,d]=B(()=>U("races")),l=await l,d(),l),m=w(()=>Object.values(u).flat());return(y,k)=>{const b=Oe,i=ie;return _(),C("div",null,[s(at,{"model-value":(y._.provides[he]||y.$route).params.race,"center-active":"","show-arrows":""},{default:a(()=>[(_(!0),C(R,null,z(n(m),c=>(_(),$(Pt,{value:c.key,key:c.key},{default:a(({isSelected:p})=>[v("div",{class:j(["race-wrapper",{selected:p}])},[s(i,{coords:n(t)(c.id),src:n(o),description:"",width:n(r)},{tooltip:a(()=>[v("div",{innerHTML:c.name},null,8,St)]),default:a(()=>[s(b,{to:{name:"RaceIndex",params:{...(y._.provides[he]||y.$route).params,race:c.key}}},{default:a(()=>[E(T(c.name),1)]),_:2},1032,["to"])]),_:2},1032,["coords","src","width"])],2)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value"])])}}}),It=F(Vt,[["__scopeId","data-v-f1152851"]]),Dt={key:0,class:"d-flex row-warp align-center my-1"},jt={class:"ml-2 mt-n1"},Mt={class:"ml-2 mt-n1"},Ht=["innerHTML"],Rt={class:"text-white bg-red mx-2 rounded-lg"},Et={class:"text-white bg-blue mx-2 rounded-lg"},Lt={class:"d-flex align-center"},Nt={class:"ml-2 mt-n1"},Ut={class:"d-flex align-center"},Bt={class:"ml-2 mt-n1"},Ft={class:"upgrades-wrapper"},Ot=V({__name:"DetailsUnit",props:{item:{}},async setup(e){let l,d;const r=N(["characteristics","upgrades","items"]),[u,{gold:t,bounty:o,range:m,attackSpeed:y}]=ue(),k=I("raceName"),{iconProps:b,iconsSrc:i}=([l,d]=B(()=>U(k)),l=await l,d(),l),c=I("objFinder"),p=w(()=>!isNaN(Number(e.item.hpReg))),f=w(()=>!isNaN(Number(e.item.mpReg))),h=w(()=>{var g;return(g=e.item.upgrades)==null?void 0:g.map(x=>c("upgrade",x)).filter(J)});return(g,x)=>{var ye;const X=ie,ge=se,Fe=H;return _(),C(R,null,[G(g.$slots,"fullname",{},void 0,!0),(ye=g.item.tags)!=null&&ye.length?(_(),C("div",Dt,[x[1]||(x[1]=v("div",{class:"text-subtitle-2"},"Tags:",-1)),(_(!0),C(R,null,z(g.item.tags,A=>(_(),$(ot,{class:"ma-1 mr-0",density:"compact",size:"small"},{default:a(()=>[E(T(A),1)]),_:2},1024))),256))])):P("",!0),s(we,{class:"my-1"},{default:a(()=>[s(L,{cols:"6",class:"d-flex align-center py-0"},{default:a(()=>[s(X,{src:n(u),coords:n(t),width:"32",description:"Cost"},null,8,["src","coords"]),v("span",jt,T(g.item.cost),1)]),_:1}),s(L,{cols:"6",class:"d-flex align-center py-0"},{default:a(()=>[s(X,{src:n(u),coords:n(o),width:"32",description:"Kill bounty"},null,8,["src","coords"]),v("span",Mt,T(g.item.bounty),1)]),_:1})]),_:1}),s(ve,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(r),"onUpdate:modelValue":x[0]||(x[0]=A=>te(r)?r.value=A:null)},{default:a(()=>{var A;return[g.item.description?(_(),$(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",{class:"text-body-2",innerHTML:g.item.description},null,8,Ht)]),_:1})]),_:1})):P("",!0),G(g.$slots,"heroItems",{},void 0,!0),s(M,{title:"Characteristics",value:"characteristics"},{default:a(()=>[s(S,null,{default:a(()=>[s(we,{class:"my-1"},{default:a(()=>[s(L,{cols:"6",class:"text-center pt-0"},{default:a(()=>[v("div",Rt,[v("b",null,T(g.item.hp),1),n(p)?(_(),C(R,{key:0},[E(" +"+T(g.item.hpReg)+"/sec",1)],64)):P("",!0)])]),_:1}),s(L,{cols:"6",class:"text-center pt-0"},{default:a(()=>[v("div",Et,[v("b",null,T(g.item.mp),1),n(f)?(_(),C(R,{key:0},[E(" +"+T(g.item.mpReg)+"/sec",1)],64)):P("",!0)])]),_:1}),s(L,{cols:"6",class:"py-0"},{default:a(()=>[s(ge,{type:g.item.atkType,value:g.item.atk},null,8,["type","value"]),v("div",Lt,[s(X,{src:n(u),coords:n(m),width:"32",description:"Attack range"},null,8,["src","coords"]),v("span",Nt,T(g.item.atkRange)+T(g.item.weaponType==="normal"?" (melee)":""),1)]),v("div",Ut,[s(X,{src:n(u),coords:n(y),width:"32",description:"Attack speed"},null,8,["src","coords"]),v("span",Bt,T(g.item.atkSpeed),1)])]),_:1}),s(L,{cols:"6",class:"py-0"},{default:a(()=>[s(ge,{type:g.item.defType,value:g.item.def,"is-defend":""},null,8,["type","value"])]),_:1}),G(g.$slots,"attributes",{},void 0,!0)]),_:3})]),_:3})]),_:3}),(A=n(h))!=null&&A.length?(_(),$(M,{key:1,title:"Upgrades used",value:"upgrades"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",Ft,[(_(!0),C(R,null,z(n(h),oe=>(_(),$(Fe,{item:oe,src:n(i),coords:n(b)(oe.id,oe.iconsCount)},null,8,["item","src","coords"]))),256))])]),_:1})]),_:1})):P("",!0)]}),_:3},8,["modelValue"])],64)}}}),ae=F(Ot,[["__scopeId","data-v-f314cd24"]]),At=["innerHTML"],Gt={class:"d-flex justify-center"},zt=V({__name:"DetailsHero",props:{item:{}},async setup(e){let l,d;const r=I("raceName"),{iconProps:u,iconsSrc:t}=([l,d]=B(()=>U(r)),l=await l,d(),l),[o,{str:m,int:y,agi:k}]=ue(),b=w(()=>{if(!e.item.items)return[];const i=e.item.items.map(({level:p})=>p);if(!(i!=null&&i.length))return[];const c=i.filter(Ye).sort((p,f)=>p-f).reduce((p,f,h)=>(p[f]=Le[h],p),{});return e.item.items.map(p=>({...p,hotkey:c[p.level]}))});return(i,c)=>{const p=re,f=H,h=O,g=ae;return _(),$(g,{item:i.item},{fullname:a(()=>[v("div",{innerHTML:i.item.fullName,class:"text-center text-subtitle-1"},null,8,At)]),attributes:a(()=>[s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(p,{width:"32",src:n(o),coords:n(m),padding:[0,8,8,0]},null,8,["src","coords"]),v("div",{class:j({"text-yellow":i.item.stat==="str","font-bold":i.item.stat==="str"})},T(i.item.str)+"+"+T(i.item.strLvl),3)]),_:1}),s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(p,{width:"32",src:n(o),coords:n(k),padding:[0,8,8,0]},null,8,["src","coords"]),v("div",{class:j({"text-yellow":i.item.stat==="agi","font-bold":i.item.stat==="agi"})},T(i.item.agi)+"+"+T(i.item.agiLvl),3)]),_:1}),s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(p,{width:"32",src:n(o),coords:n(y),padding:[0,8,8,0]},null,8,["src","coords"]),v("div",{class:j({"text-yellow":i.item.stat==="int","font-bold":i.item.stat==="int"})},T(i.item.int)+"+"+T(i.item.intLvl),3)]),_:1})]),heroItems:a(()=>[n(b).length?(_(),$(M,{key:0,title:"Hero items",value:"items"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",Gt,[s(h,{items:n(b),size:.75},{default:a(({item:x})=>[s(f,{src:n(t),coords:n(u)(x.id),item:x},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]),_:1},8,["item"])}}}),Wt=F(zt,[["__scopeId","data-v-dc1de915"]]),qt=["innerHTML"],Kt={class:"d-flex justify-center"},Yt={class:"d-flex justify-center"},Zt=V({__name:"DetailsUpgrade",props:{item:{}},async setup(e){let l,d;const r=N(["spells","summons","affects"]),u=I("raceName"),{raceData:t,iconProps:o,iconsSrc:m}=([l,d]=B(()=>U(u)),l=await l,d(),l),y=w(()=>{var i;return((i=e.item.spells)==null?void 0:i.map(c=>c.summonUnit).flat().filter(J).filter(Ze))??[]}),k=w(()=>e.item.spells),b=w(()=>{const i=Object.values(t.units).filter(({upgrades:p})=>p==null?void 0:p.includes(e.item.id)),c=t.bonuses.map(({units:p})=>p??[]).flat().filter(({upgrades:p})=>p==null?void 0:p.includes(e.item.id)).map(p=>{var h;const f=((h=t.bonuses.find(({units:g})=>g==null?void 0:g.some(({id:x})=>x===p.id)))==null?void 0:h.id)??"";return{...p,id:f}});return[...i,...c]});return(i,c)=>{const p=H,f=O,h=ae;return _(),$(ve,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(r),"onUpdate:modelValue":c[0]||(c[0]=g=>te(r)?r.value=g:null)},{default:a(()=>{var g;return[i.item.description?(_(),$(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",{class:"text-body-2",innerHTML:i.item.description},null,8,qt)]),_:1})]),_:1})):P("",!0),(g=n(k))!=null&&g.length?(_(),$(M,{key:1,title:"Spells",value:"spells"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",Kt,[s(f,{items:n(k),"disable-details":"","skip-hotkey":""},{default:a(({item:x})=>[s(p,{item:x,src:n(m),coords:n(o)(x.id,x.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0),(_(!0),C(R,null,z(n(y),x=>(_(),$(M,{title:`Summon: ${x.name}`,value:`summon-${x.id}`},{default:a(()=>[s(S,null,{default:a(()=>[s(h,{item:x},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),n(b).length?(_(),$(M,{key:2,title:"Affects",value:"affects"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",Yt,[s(f,{items:n(b),"disable-details":"","skip-hotkey":""},{default:a(({item:x})=>[s(p,{item:x,src:n(m),coords:n(o)(x.id,x.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]}),_:1},8,["modelValue"])}}}),Jt=V({__name:"DetailsSpell",props:{item:{}},setup(e){return(l,d)=>(_(),C("div"))}}),Qt={class:"cost"},Xt=V({__name:"CombineCost",props:{items:{},count:{}},setup(e){const[l,{gold:d}]=ue(),r=w(()=>Te(e.items).reduce((u,{cost:t})=>{var o;return u+((o=t??[])==null?void 0:o.slice(0,e.count).reduce((m,y)=>m+(y??0),0))},0));return(u,t)=>{const o=re,m=Ee;return _(),$(m,null,{default:a(()=>[s(pe,{location:"top"},{activator:a(({props:y})=>[v("div",ce({class:"d-flex align-center"},y),[s(o,{src:n(l),coords:n(d),width:"16"},null,8,["src","coords"]),v("span",Qt,T(n(r)),1)],16)]),default:a(()=>[G(u.$slots,"default",{},()=>[t[0]||(t[0]=E("Total cost"))],!0)]),_:3})]),_:3})}}}),_e=F(Xt,[["__scopeId","data-v-1bade672"]]),es=["innerHTML"],ts={class:"d-flex justify-center"},ss={class:"d-flex justify-center"},ns=V({__name:"DetailsBonus",props:{item:{}},async setup(e){let l,d;const r=I("objFinder"),u=I("raceName"),{iconProps:t,iconsSrc:o}=([l,d]=B(()=>U(u)),l=await l,d(),l),m=N(["grid","opens"]);Ce(()=>e.item,i=>{var c;m.value=["grid"].concat(((c=i.units)==null?void 0:c.map(({id:p})=>`unit-${p}`))??[])});const y=w(()=>{var i;return(((i=e.item.spells)==null?void 0:i.length)??0)>1?!0:[e.item.units,e.item.upgrades].some(c=>!!(c!=null&&c.length))}),k=w(()=>[...(e.item.spells??[]).filter(({name:i})=>!!i),...e.item.upgrades??[]]),b=w(()=>e.item.relatedID.map(i=>r("upgrade",i)).filter(J));return(i,c)=>{const p=_e,f=H,h=O,g=ae;return _(),$(ve,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(m),"onUpdate:modelValue":c[0]||(c[0]=x=>te(m)?m.value=x:null)},{default:a(()=>[i.item.description?(_(),$(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",{class:"text-body-2",innerHTML:i.item.description},null,8,es)]),_:1})]),_:1})):P("",!0),n(y)&&n(k).length?(_(),$(M,{key:1,value:"grid"},{default:a(()=>[s(le,{width:"100%",class:"d-flex"},{default:a(()=>[c[2]||(c[2]=v("span",{class:"mr-auto"},"Bonus spells/upgrades",-1)),s(p,{items:i.item.upgrades??[]},{default:a(()=>c[1]||(c[1]=[E(" Total cost ")])),_:1},8,["items"])]),_:1}),s(S,null,{default:a(()=>[v("div",ts,[n(y)&&n(k).length?(_(),$(h,{key:0,items:n(k),"disable-details":"","show-empty":""},{default:a(({item:x})=>[s(f,{src:n(o),coords:n(t)(x.id,x.iconsCount),item:x},null,8,["src","coords","item"])]),_:1},8,["items"])):P("",!0)])]),_:1})]),_:1})):P("",!0),(_(!0),C(R,null,z(i.item.units,x=>(_(),$(M,{title:`Unit: ${x.name}`,value:`unit-${x.id}`},{default:a(()=>[s(S,null,{default:a(()=>[s(g,{item:x},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),n(b).length?(_(),$(M,{key:2,title:"Unlocked upgrades",value:"opens"},{default:a(()=>[s(S,null,{default:a(()=>[v("div",ss,[s(h,{items:n(b),"disable-details":"","skip-hotkey":""},{default:a(({item:x})=>[s(f,{src:n(o),coords:n(t)(x.id,x.iconsCount),item:x},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])}}}),as=({item:e})=>{const l=Te(e);if(l){if(Je(l))return q(ae,{item:l});if(Qe(l))return q(Wt,{item:l});if(Xe(l))return q(Zt,{item:l});if(Pe(l))return q(Jt,{item:l});if(Se(l))return q(ns,{item:l})}},os={key:0,class:"d-flex align-center justify-space-between panel-header pb-2 elevation-1 mb-2"},ls=["innerHTML"],is={class:"panel-details"},rs=V({__name:"DetailsProvider",props:{objFinder:{type:Function},raceName:{}},async setup(e){let l,d;const{iconProps:r,iconsSrc:u}=([l,d]=B(()=>U(e.raceName)),l=await l,d(),l),t=N(null),o=ht(),m=w({get:()=>!!t.value,set:b=>{b||(t.value=null)}});et(()=>{o.value&&["bonus","spell","unit","hero","upgrade"].forEach(b=>{var c;if(!o.value||((c=t.value)==null?void 0:c.id)===o.value)return;const i=e.objFinder(b,o.value);i&&(t.value=i)})}),Ce(()=>t.value,b=>o.value=b==null?void 0:b.id);const y=b=>{t.value=b},k=()=>{var b;navigator.clipboard.writeText(((b=t.value)==null?void 0:b.id)||"")};return K("detailsSet",y),K("objFinder",e.objFinder),K("raceName",e.raceName),(b,i)=>{const c=re,p=as,f=Ee;return _(),C(R,null,[s(f,null,{default:a(()=>[s(kt,{modelValue:n(m),"onUpdate:modelValue":i[1]||(i[1]=h=>te(m)?m.value=h:null),location:"left",temporary:"","disable-resize-watcher":"",elevation:"4",class:"pa-2",width:"400","disable-route-watcher":""},{default:a(()=>[n(t)?(_(),C("div",os,[s(pe,{color:"transparent"},{activator:a(({props:h})=>[s(c,ce({src:n(u),coords:n(r)(n(t).id),width:"32"},h,{onClick:k}),null,16,["src","coords"])]),default:a(()=>[E(" ID: "+T(n(t).id),1)]),_:1}),v("span",{innerHTML:n(t).name,class:"text-h6 mx-2"},null,8,ls),s(W,{density:"comfortable",icon:"",flat:"",onClick:i[0]||(i[0]=h=>y(null))},{default:a(()=>[s(He,{icon:"$close"})]),_:1})])):P("",!0),v("div",is,[s(p,{item:n(t)},null,8,["item"])])]),_:1},8,["modelValue"])]),_:1}),G(b.$slots,"default",{},void 0,!0)],64)}}}),cs=F(rs,[["__scopeId","data-v-e1fba027"]]),ds={style:{"grid-row":"span 2","grid-column":"1"}},us=["innerHTML"],ms={width:"100%",height:"40px",viewBox:"0 0 500 75",preserveAspectRatio:"xMinYMid meet",style:{overflow:"visible"},xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ps=["fill"],fs=["innerHTML"],vs=V({__name:"RaceDescription",props:{race:{}},setup(e){const l=w(()=>e.race.description.replace(new RegExp(String.raw`^\s*?<span[^>]*?>.*?${e.race.name}.*?<\/span>`,"si"),"").replace(/\s+?(?:<br\s?\/?>)*/,"")),d=w(()=>(e.race.description.match(new RegExp(String.raw`#[a-zA-Z0-9]{6,8}(?=[^<]*?(?:${e.race.name}))`))??["white"])[0]),r=w(()=>e.race.name.replace(/<\/?.+?>/g,"").trim());return(u,t)=>{const o=Q;return _(),C("div",ds,[s(o,{title:"",id:"details","full-height":!1},{title:a(()=>[v("h1",{class:"text-wrap text-h3 d-none",style:de({color:n(d)}),innerHTML:u.race.name},null,12,us),(_(),C("svg",ms,[t[0]||(t[0]=v("rect",{x:"0",y:"0",width:"500",height:"75",fill:"transparent"},null,-1)),v("text",{x:"50%",y:"100%","font-size":"75",fill:n(d),"text-anchor":"middle"},T(n(r)),9,ps)]))]),default:a(()=>[v("div",{innerHTML:n(l)},null,8,fs)]),_:1})])}}}),_s={},bs={class:"d-flex align-center w-100"};function gs(e,l){return _(),C("div",bs,[s(ke,{class:"flex-grow-1"}),G(e.$slots,"default"),s(ke,{class:"flex-grow-1"})])}const be=F(_s,[["render",gs]]),ys=["innerHTML"],xs={key:0,class:"text-subtitle-1"},hs={class:"text-yellow"},ks={key:1,class:"text-subtitle-1"},ws={key:0,class:"text-green"},$s=V({__name:"RaceFortress",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const l=I("hover",N()),d=w(()=>[e.race.t1spell,e.race.t2spell,e.race.ultiData].filter(J)),r=w(()=>e.race.magic.map((t,o)=>({...t,hotkey:Le[o]})).concat(...Object.values(e.race.baseUpgrades))),u=t=>{const o=Object.values(e.race.units).filter(({upgrades:m})=>m==null?void 0:m.includes(t.id)).map(({id:m})=>m);l.value=[t.id,...o]};return(t,o)=>{const m=fe,y=se,k=_e,b=be,i=O,c=ie,p=Q;return _(),$(p,{title:"Fortress",class:"d-flex flex-column justify-start","full-height":!1,id:"fortress"},{title:a(()=>[s(m,{"hide-dot":"",item:t.race.buildings.fort},{default:a(()=>[s(W,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>o[1]||(o[1]=[v("b",null,"Fortress",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(y,{key:"fort-attack",class:"ml-1",type:t.race.buildings.fort.atkType},null,8,["type"])]),appendHead:a(()=>[s(k,{key:"fort-cost",class:"mr-1",items:n(r)},null,8,["items"])]),default:a(()=>[s(b,{class:"mb-2 mt-n6"},{default:a(()=>o[2]||(o[2]=[v("span",{class:"mx-2 text-caption text-grey"},"Auras",-1)])),_:1}),s(i,{class:"mx-auto",items:t.race.auras},{default:a(({item:f})=>[s(n(H),{item:f,src:t.icons,coords:t.iconProps(f.id),class:j(["selectable-item",{depressed:n(l)&&!n(l).includes(f.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"]),s(b,{class:"mb-1"},{default:a(()=>o[3]||(o[3]=[v("span",{class:"mx-2 text-caption text-grey"},"Upgrades",-1)])),_:1}),s(i,{class:"mx-auto",items:n(r)},{default:a(({item:f})=>[s(n(H),{item:f,src:t.icons,coords:!("level"in f)||(f.iconsCount??0)<=1?t.iconProps(f.id,f.iconsCount):t.iconProps(`${f.id}-${f.level}`),class:j(["selectable-item",{depressed:n(l)&&!n(l).includes(f.id)}]),onMouseenter:()=>u(f),onMouseout:o[0]||(o[0]=()=>l.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),s(b,{class:"mb-1"},{default:a(()=>o[4]||(o[4]=[v("span",{class:"mx-2 text-caption text-grey"},"Skills",-1)])),_:1}),s(i,{class:"mx-auto",items:n(d)},{default:a(({item:f})=>[("isSpellObject"in t?t.isSpellObject:n(Pe))(f)?(_(),$(n(H),{key:0,item:f,src:t.icons,coords:t.iconProps(f.id),class:j(["selectable-item",{depressed:n(l)&&!n(l).includes(f.id)}])},null,8,["item","src","coords","class"])):(_(),$(c,{key:1,src:t.icons,coords:t.iconProps(f.id)},{tooltip:a(()=>[v("div",{class:"text-h6",innerHTML:f.name.replace(/\[.+\]/g,"")},null,8,ys),o[7]||(o[7]=v("br",null,null,-1)),"damageTime"in f?(_(),C("div",xs,[o[5]||(o[5]=E(" Time to full damage: ")),v("span",hs,T(f.damageTime==0?"Instant":f.damageTime+"s"),1)])):P("",!0),"stealInterrupt"in f?(_(),C("div",ks,[o[6]||(o[6]=E(" Interrupts mana steal: ")),v("span",{class:j(f.stealInterrupt?"text-green":"text-red")},T(f.stealInterrupt?"Yes":"No"),3),f.fakeStealInterrupt?(_(),C("span",ws," (+ Decoy UW) ")):P("",!0)])):P("",!0)]),_:2},1032,["src","coords"]))]),_:1},8,["items"])]),_:1})}}}),Ts=V({__name:"RaceTowers",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const l=I("hover",N());w(()=>Object.fromEntries(e.race.towerUpgrades.map(u=>[u.id,u])));const d=w(()=>Object.values(e.race.bonuses).reduce((u,{id:t,relatedID:o})=>(o.forEach(m=>{u[m]=t}),u),{})),r=u=>{const t=Object.values(e.race.units).filter(({upgrades:o})=>o==null?void 0:o.includes(u.id)).map(({id:o})=>o);l.value=[u.id,d.value[u.id],...t]};return(u,t)=>{const o=fe,m=se,y=_e,k=H,b=O,i=Q;return _(),$(i,{title:"Towers","full-height":!1,class:"d-flex flex-column",id:"upgrades"},{title:a(()=>[s(o,{"hide-dot":"",item:u.race.buildings.tower},{default:a(()=>[s(W,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>t[1]||(t[1]=[v("b",null,"Towers",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(m,{key:"tower-attack",class:"ml-1",type:u.race.buildings.tower.atkType},null,8,["type"])]),appendHead:a(()=>[s(y,{key:"tower-cost",items:u.race.towerUpgrades,count:3},{default:a(()=>t[2]||(t[2]=[E(" Total cost (Lv3) ")])),_:1},8,["items"])]),default:a(()=>[s(b,{class:"mx-auto",items:u.race.towerUpgrades,restrictedSlots:["Q","W"]},{default:a(({item:c})=>[s(k,{item:c,src:u.icons,coords:u.iconProps(c.id,c.iconsCount),class:j(["selectable-item",{depressed:n(l)&&!n(l).includes(c.id)}]),onMouseenter:()=>r(c),onMouseout:t[0]||(t[0]=()=>l.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"])]),_:1})}}}),Cs={class:"d-flex flex-wrap"},Ps=["innerHTML"],Ss=V({__name:"RaceBonuses",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const l=I("hover",N()),d=new Intl.Collator("en").compare,r=w(()=>Object.values(e.race.bonusBuildings).sort(({name:t},{name:o})=>d(t,o))),u=t=>{if(!Se(t)){l.value=[t.id,...e.race.bonuses.filter(({buildingId:m})=>m===t.id).map(({id:m})=>m)].filter(J);return}const o=Object.values(e.race.units).filter(({hotkey:m})=>{var y;return(y=t.units)==null?void 0:y.some(k=>k.hotkey===m)}).map(({id:m})=>m);l.value=[t.id,t.buildingId,...t.relatedID,...o]};return(t,o)=>{const m=H,y=O,k=be,b=Q;return _(),C("div",{style:de({gridRow:`span ${1+Math.floor(n(r).length/5)}`})},[s(b,{title:"Bonuses","full-height":!1,class:"d-flex flex-column align-center justify-start",id:"bonuses"},{title:a(()=>[s(pe,{"open-on-click":"","open-on-hover":!1,offset:[-4,0],"close-on-back":"",location:"top",transition:{component:n(ct)}},{activator:a(({props:i})=>[s(W,ce({size:"large",class:"mx-auto",variant:"text",color:"yellow"},i),{default:a(()=>o[2]||(o[2]=[v("b",null,"Bonuses",-1)])),_:2},1040)]),default:a(()=>[o[3]||(o[3]=v("span",null,"There is no easter eggs",-1))]),_:1},8,["transition"])]),default:a(()=>[s(y,{items:t.race.bonuses},{default:a(({item:i})=>[s(m,{item:i,src:t.icons,coords:t.iconProps(i.id),class:j(["selectable-item",{depressed:n(l)&&!n(l).includes(i.id)}]),onMouseenter:()=>u(i),onMouseout:o[0]||(o[0]=()=>l.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),s(k,{class:"my-1"},{default:a(()=>o[4]||(o[4]=[v("span",{class:"mx-2 text-caption text-grey text-no-wrap"},"Bonus buildings",-1)])),_:1}),v("div",Cs,[(_(!0),C(R,null,z(n(r),i=>(_(),$(W,{class:"my-1 mx-2 cursor-default",variant:"text",size:"x-small",active:n(l)&&n(l).includes(i.id),onMouseover:()=>u(i),onMouseout:o[1]||(o[1]=()=>l.value=void 0)},{default:a(()=>[v("span",{innerHTML:i.name},null,8,Ps)]),_:2},1032,["active","onMouseover"]))),256))])]),_:1})],4)}}}),Vs=V({__name:"RaceBarracks",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const l=I("hover",N());I("objFinder");const d={melee:"A",range:"S",mage:"D",siege:"F",air:"E",catapult:"R"},r=w(()=>Object.entries(e.race.units).map(([t,o])=>({...o,hotkey:d[t]}))),u=t=>{l.value=[t.id,...t.upgrades??[]]};return(t,o)=>{const m=fe,y=se,k=be,b=O,i=Q;return _(),$(i,{title:"Barracks","full-height":!1,class:"d-flex flex-column",id:"units"},{title:a(()=>[s(m,{"hide-dot":"",item:t.race.buildings.barrack},{default:a(()=>[s(W,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>o[1]||(o[1]=[v("b",null,"Barracks",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(y,{key:"barrack-attack",class:"ml-1",type:t.race.buildings.barrack.atkType},null,8,["type"])]),default:a(()=>[s(k,{class:"mb-2 mt-n6"},{default:a(()=>o[2]||(o[2]=[v("span",{class:"mx-2 text-caption text-grey"},"Units",-1)])),_:1}),s(b,{class:"mx-auto",items:n(r)},{default:a(({item:c})=>[s(n(H),{item:c,src:t.icons,coords:t.iconProps(c.id),class:j(["selectable-item",{depressed:n(l)&&!n(l).includes(c.id)}]),onMouseenter:()=>u(c),onMouseout:o[0]||(o[0]=()=>l.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),s(k,{class:"mb-1"},{default:a(()=>o[3]||(o[3]=[v("span",{class:"mx-2 text-caption text-grey"},"Heroes",-1)])),_:1}),s(b,{class:"mx-auto",items:t.race.heroes},{default:a(({item:c})=>[s(n(H),{item:c,src:t.icons,coords:t.iconProps(c.id),class:j(["selectable-item",{depressed:n(l)&&!n(l).includes(c.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"])]),_:1})}}}),Is=V({__name:"racePage",async setup(e){let l,d;const r=tt(),[u]=[st().params.race].flat(),{raceData:t,iconProps:o,iconsSrc:m,version:y}=([l,d]=B(()=>U(u)),l=await l,d(),l),k=(p,f)=>{switch(p){case"upgrade":return Object.values(t.baseUpgrades).concat(t.magic).concat(t.towerUpgrades).find(h=>h.id===f);case"unit":return Object.values(t.units).find(h=>h.id===f);case"bonus":return Object.values(t.bonuses).find(h=>h.id===f);case"hero":return t.heroes.find(h=>h.id===f);case"spell":return[t.t1spell,t.t2spell].find(h=>h.id===f);default:return}},b=Ve("iconSize",$t),i=w(()=>({gridTemplateColumns:`repeat(auto-fill, minmax(${+b.value*5}px, 1fr))`})),c=wt?w(()=>{}):N();return K("hover",c),r.runWithContext(()=>{bt({title:`${t.name} v${y}`,description:`${t.name} of Survival Chaos v${y}: race info, bonuses, upgrades, units and heroes`,ogDescription:`${t.name} of Survival Chaos v${y}: race info, bonuses, upgrades, units and heroes`}),gt({link:[{rel:"preload",as:"image",href:m}]})}),(p,f)=>{const h=It,g=cs;return _(),C("div",null,[s(h,{class:"mb-2"}),s(g,{"obj-finder":k,"race-name":n(u)},{default:a(()=>[v("div",{class:"race-container",style:de(n(i))},[s(vs,{race:n(t),style:{"flex-basis":"300px"}},null,8,["race"]),s($s,{race:n(t),icons:n(m),"icon-props":n(o)},null,8,["race","icons","icon-props"]),s(Ts,{race:n(t),icons:n(m),"icon-props":n(o)},null,8,["race","icons","icon-props"]),s(Ss,{race:n(t),icons:n(m),"icon-props":n(o)},null,8,["race","icons","icon-props"]),s(Vs,{race:n(t),icons:n(m),"icon-props":n(o)},null,8,["race","icons","icon-props"])],4)]),_:1},8,["race-name"])])}}}),Zs=F(Is,[["__scopeId","data-v-7ec59a90"]]);export{Zs as default};
