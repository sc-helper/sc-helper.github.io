import{_ as K}from"./C0HLJBGt.js";import{f as q,g as A}from"./u06dbjxb.js";import{v as G}from"./DZB4x7oa.js";import{_ as Q}from"./DQZ2xlEW.js";import{_ as W,M as X}from"./Dvv0Q9Tx.js";import{u as O}from"./8McOOjYb.js";import{V as S,a as T,b as R}from"./BsiuyVXS.js";import{d as B,M as J,c as M,r as I,D as w,a as b,o as V,g as f,h as s,u as l,w as i,N as Y,O as Z,m as ee,K as j,P as te,q as k,F as H,b as $,l as x,p as P,f as z,_ as le,B as ae}from"./yluSX6xO.js";import{a as se,V as U}from"./DHo1gU8e.js";import{V as D,a as F}from"./0iYFE806.js";import{V as E,u as oe}from"./DoQqbif5.js";import{u as re}from"./P1zVW6S6.js";import{u as ie}from"./DCHodB2z.js";import"./BU84DFIR.js";import"./CWFGjgbD.js";import"./DhzMM-es.js";import"./vgsYqTJU.js";import"./99FqzB7v.js";/* empty css        */import"./DodnVeIA.js";const ne={class:"d-flex flex-column gap-4"},de=B({__name:"PlayerFilterItem",props:{modelValue:{},type:{},version:{}},emits:["update:modelValue"],async setup(u,{emit:_}){let p,g;const m=u,n=([p,g]=J(()=>O("races",m.type,m.version)),p=await p,g(),p),t=_,c=()=>{t("update:modelValue",m.modelValue)},h=M(()=>Object.values(n.raceData).flat()),v=I(null),C=M(()=>{var r;return((r=v.value)==null?void 0:r.raceData.bonuses)??[]});w(()=>m.modelValue.race,async r=>{var a;m.modelValue.bonus=void 0;const o=(a=h.value.find(e=>e.id===r))==null?void 0:a.key;if(!o){v.value=null;return}v.value=await O(o,m.type,m.version)});const L=[1,2,3,4];return(r,o)=>{const a=Q;return V(),b("div",ne,[f("div",null,[s(W,{modelValue:u.modelValue.playerId,"onUpdate:modelValue":[o[0]||(o[0]=e=>u.modelValue.playerId=e),c],label:"Player Name"},null,8,["modelValue"])]),f("div",null,[s(S,{modelValue:u.modelValue.race,"onUpdate:modelValue":[o[1]||(o[1]=e=>u.modelValue.race=e),c],label:"Race",items:l(h),density:"compact",clearable:"","hide-details":"",variant:"outlined","item-title":"name","item-value":"id"},{item:i(({item:e,props:d})=>[s(R,Y(Z(d)),{prepend:i(()=>[s(a,{src:l(n).iconsSrc,coords:l(n).iconProps(e.raw.id),width:"32",class:"mr-2"},null,8,["src","coords"])]),_:2},1040)]),selection:i(({item:e})=>[s(a,{src:l(n).iconsSrc,coords:l(n).iconProps(e.raw.id),width:"24",class:"mr-2"},null,8,["src","coords"]),s(T,{innerHTML:e.raw.name},null,8,["innerHTML"])]),_:1},8,["modelValue","items"])]),f("div",null,[s(S,{modelValue:u.modelValue.bonus,"onUpdate:modelValue":[o[2]||(o[2]=e=>u.modelValue.bonus=e),c],label:"Bonus",disabled:!u.modelValue.race,items:l(C),clearable:"",density:"compact","hide-details":"",variant:"outlined","item-title":"name","item-value":"id"},{item:i(({item:e,props:d})=>[s(R,ee(d,{title:""}),{prepend:i(()=>{var y,N;return[s(a,{src:((y=l(v))==null?void 0:y.iconsSrc)??"",coords:((N=l(v))==null?void 0:N.iconProps(e.raw.id))??l(n).iconProps(e.raw.id),width:"32",class:"mr-2"},null,8,["src","coords"])]}),default:i(()=>[s(T,{innerHTML:e.raw.name},null,8,["innerHTML"])]),_:2},1040)]),selection:i(({item:e})=>{var d,y;return[s(a,{src:((d=l(v))==null?void 0:d.iconsSrc)??"",coords:((y=l(v))==null?void 0:y.iconProps(e.raw.id))??l(n).iconProps(e.raw.id),width:"24",class:"mr-2"},null,8,["src","coords"]),s(T,{innerHTML:e.raw.name},null,8,["innerHTML"])]}),_:1},8,["modelValue","disabled","items"])]),f("div",null,[s(S,{modelValue:u.modelValue.place,"onUpdate:modelValue":[o[3]||(o[3]=e=>u.modelValue.place=e),c],label:"Place",items:L,density:"compact","hide-details":"",variant:"outlined",clearable:""},null,8,["modelValue"])])])}}}),ue={class:"d-flex align-center flex-wrap gap-4"},me={class:"full-width d-flex my-1"},ce={class:"d-flex flex-nowrap align-start"},pe={class:"d-flex flex-wrap flex-grow-1",style:{margin:"0 -8px"}},fe={class:"d-flex align-center justify-space-between mb-2"},ve={class:"text-subtitle-2"},Ve={class:"d-flex flex-column gap-2"},_e={class:"d-flex flex-column gap-4 mt-auto ml-4",style:{width:"150px"}},ye=B({__name:"SearchPlayersFilters",props:{modelValue:{},statsMeta:{}},emits:["update:modelValue"],setup(u,{emit:_}){const p=u,g=_,m=M(()=>{var o;const r=(((o=p.statsMeta)==null?void 0:o.filters.maps)??[]).reduce((a,e)=>{const[d,y]=e.split("_");return!(d in j)||(a[d]||(a[d]=[]),!j[d][y])||a[d].push(y),a},{});return Object.fromEntries(Object.entries(r).map(([a,e])=>[a,e.map(d=>({value:d,title:d})).sort(te("title"))]))}),n=()=>Date.now()+Math.random(),t=I({...p.modelValue,withLeavers:!0,filters:p.modelValue.filters.map(r=>({...r,_uid:n()}))}),c=M(()=>m.value[t.value.type]??[]),h=r=>({...r,filters:r.filters.map(({_uid:o,...a})=>a)});w(()=>c.value,()=>{var r;(!t.value.version||!c.value.some(o=>o.value===t.value.version))&&(t.value.version=((r=c.value[0])==null?void 0:r.value)??"")},{immediate:!0}),w(()=>p.modelValue,r=>{const o=h(t.value);JSON.stringify(r)!==JSON.stringify(o)&&(t.value={...r,withLeavers:!0,filters:r.filters.map(a=>({...a,_uid:n()}))})},{deep:!0}),w(()=>t.value.type,()=>{var r;t.value.version=((r=c.value[0])==null?void 0:r.value)??""}),w(()=>t.value.version,()=>{t.value.filters=[{_uid:n()}]});const v=()=>{g("update:modelValue",h(t.value))},C=()=>{t.value.filters.length<4&&t.value.filters.push({_uid:n()})},L=r=>{t.value.filters.length>1&&t.value.filters.splice(r,1)};return(r,o)=>(V(),b("div",null,[s(D,{class:"mb-4"},{default:i(()=>[s(F,{cols:"12",md:"12"},{default:i(()=>[f("div",ue,[(V(),k(S,{modelValue:l(t).version,"onUpdate:modelValue":o[1]||(o[1]=a=>l(t).version=a),items:l(c),density:"compact",variant:"outlined",label:"Map version",class:"flex-grow-0",style:{"min-width":"250px"},"hide-details":"","list-props":{density:"comfortable"},"bg-color":"transparent",flat:"",key:l(t).type},{"prepend-item":i(()=>[f("div",me,[s(se,{class:"mx-auto",density:"compact",size:"small",modelValue:l(t).type,"onUpdate:modelValue":o[0]||(o[0]=a=>l(t).type=a),mandatory:""},{default:i(()=>[(V(!0),b(H,null,$(l(m),(a,e)=>(V(),k(U,{density:"compact",size:"small",value:e,key:e},{default:i(()=>[x(P(l(G)[e]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","items"]))])]),_:1})]),_:1}),f("div",ce,[f("div",pe,[(V(!0),b(H,null,$(l(t).filters,(a,e)=>(V(),b("div",{key:a._uid,class:"pa-2",style:{width:"250px"}},[f("div",fe,[f("span",ve,"Player "+P(e+1),1),l(t).filters.length>1?(V(),k(U,{key:0,icon:"",density:"comfortable",variant:"text",color:"error",size:"small",onClick:d=>L(e)},{default:i(()=>[s(E,null,{default:i(()=>[x(P(l(q)),1)]),_:1})]),_:1},8,["onClick"])):z("",!0)]),f("div",Ve,[s(de,{modelValue:l(t).filters[e],"onUpdate:modelValue":d=>l(t).filters[e]=d,type:l(t).type,version:l(t).version},null,8,["modelValue","onUpdate:modelValue","type","version"])])]))),128)),l(t).filters.length<4?(V(),b("div",{key:0,class:"d-flex align-center justify-center rounded cursor-pointer transition-swing",onClick:C,style:{border:"2px dashed rgba(var(--v-theme-on-surface), 0.12)",width:"200px"}},[s(E,{size:"64",color:"medium-emphasis"},{default:i(()=>[x(P(l(A)),1)]),_:1})])):z("",!0)]),f("div",_e,[s(U,{color:"primary",onClick:v,block:""},{default:i(()=>[...o[2]||(o[2]=[x(" Search ",-1)])]),_:1})])])]))}}),he=le(ye,[["__scopeId","data-v-88685bdc"]]),be={class:"full-height pb-16"},$e=B({__name:"matches",async setup(u){let _,p;const g=([_,p]=J(()=>re()),_=await _,p(),_),m=ie("preferredVersion","og"),n=I({type:m.value??"og",version:"",filters:[{}],withLeavers:!0});return w(m,t=>{n.value.type=t??"og"},{immediate:!0}),oe({title:"Match Search",description:"Search Survival Chaos matches by player, race, and more"}),(t,c)=>{const h=K;return V(),b("div",be,[s(h,{title:"Match Search",id:"matches",class:"mb-4"},{default:i(()=>[s(D,null,{default:i(()=>[s(F,{cols:"12"},{default:i(()=>[s(he,{modelValue:l(n),"onUpdate:modelValue":c[0]||(c[0]=v=>ae(n)?n.value=v:null),"stats-meta":l(g)},null,8,["modelValue","stats-meta"])]),_:1})]),_:1}),s(D,null,{default:i(()=>[s(F,{cols:"12"},{default:i(()=>[s(X,{filters:l(n)},null,8,["filters"])]),_:1})]),_:1})]),_:1})])}}});export{$e as default};
