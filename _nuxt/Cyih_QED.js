import{_ as K}from"./xd3qlDZ6.js";import{f as q,g as A}from"./u06dbjxb.js";import{v as G}from"./Blmg-fVh.js";import{_ as Q}from"./C2kjJnfM.js";import{_ as W,M as X}from"./T4YMpZ_f.js";import{u as O}from"./DiTTdsQc.js";import{V as M,a as T,b as R}from"./DP7h-oCU.js";import{d as B,M as J,c as S,r as I,D as x,a as b,o as v,g as f,h as s,u as l,w as i,N as Y,O as Z,m as ee,K as j,P as te,q as k,F as H,b as $,l as g,p as P,f as z,_ as le,B as ae}from"./DZzeIQJE.js";import{a as se,V as U}from"./DFwXgqKA.js";import{V as D,a as F}from"./nb1Im-pK.js";import{V as E,u as oe}from"./CsZK-91R.js";import{u as re}from"./BqlHpP0N.js";import"./D4a3FrcL.js";import"./DqtmxcHQ.js";import"./OG0CjqW7.js";import"./DshezAg8.js";import"./CzaojlKM.js";import"./BeG6LiQI.js";/* empty css        */import"./DUjtzsSx.js";const ie={class:"d-flex flex-column gap-4"},ne=B({__name:"PlayerFilterItem",props:{modelValue:{},type:{},version:{}},emits:["update:modelValue"],async setup(u,{emit:_}){let c,w;const d=u,m=([c,w]=J(()=>O("races",d.type,d.version)),c=await c,w(),c),t=_,p=()=>{t("update:modelValue",d.modelValue)},h=S(()=>Object.values(m.raceData).flat()),V=I(null),C=S(()=>{var r;return((r=V.value)==null?void 0:r.raceData.bonuses)??[]});x(()=>d.modelValue.race,async r=>{var a;d.modelValue.bonus=void 0;const o=(a=h.value.find(e=>e.id===r))==null?void 0:a.key;if(!o){V.value=null;return}V.value=await O(o,d.type,d.version)});const L=[1,2,3,4];return(r,o)=>{const a=Q;return v(),b("div",ie,[f("div",null,[s(W,{modelValue:u.modelValue.playerId,"onUpdate:modelValue":[o[0]||(o[0]=e=>u.modelValue.playerId=e),p],label:"Player Name"},null,8,["modelValue"])]),f("div",null,[s(M,{modelValue:u.modelValue.race,"onUpdate:modelValue":[o[1]||(o[1]=e=>u.modelValue.race=e),p],label:"Race",items:l(h),density:"compact",clearable:"","hide-details":"",variant:"outlined","item-title":"name","item-value":"id"},{item:i(({item:e,props:n})=>[s(R,Y(Z(n)),{prepend:i(()=>[s(a,{src:l(m).iconsSrc,coords:l(m).iconProps(e.raw.id),width:"32",class:"mr-2"},null,8,["src","coords"])]),_:2},1040)]),selection:i(({item:e})=>[s(a,{src:l(m).iconsSrc,coords:l(m).iconProps(e.raw.id),width:"24",class:"mr-2"},null,8,["src","coords"]),s(T,{innerHTML:e.raw.name},null,8,["innerHTML"])]),_:1},8,["modelValue","items"])]),f("div",null,[s(M,{modelValue:u.modelValue.bonus,"onUpdate:modelValue":[o[2]||(o[2]=e=>u.modelValue.bonus=e),p],label:"Bonus",disabled:!u.modelValue.race,items:l(C),clearable:"",density:"compact","hide-details":"",variant:"outlined","item-title":"name","item-value":"id"},{item:i(({item:e,props:n})=>[s(R,ee(n,{title:""}),{prepend:i(()=>{var y,N;return[s(a,{src:((y=l(V))==null?void 0:y.iconsSrc)??"",coords:((N=l(V))==null?void 0:N.iconProps(e.raw.id))??l(m).iconProps(e.raw.id),width:"32",class:"mr-2"},null,8,["src","coords"])]}),default:i(()=>[s(T,{innerHTML:e.raw.name},null,8,["innerHTML"])]),_:2},1040)]),selection:i(({item:e})=>{var n,y;return[s(a,{src:((n=l(V))==null?void 0:n.iconsSrc)??"",coords:((y=l(V))==null?void 0:y.iconProps(e.raw.id))??l(m).iconProps(e.raw.id),width:"24",class:"mr-2"},null,8,["src","coords"]),s(T,{innerHTML:e.raw.name},null,8,["innerHTML"])]}),_:1},8,["modelValue","disabled","items"])]),f("div",null,[s(M,{modelValue:u.modelValue.place,"onUpdate:modelValue":[o[3]||(o[3]=e=>u.modelValue.place=e),p],label:"Place",items:L,density:"compact","hide-details":"",variant:"outlined",clearable:""},null,8,["modelValue"])])])}}}),de={class:"d-flex align-center flex-wrap gap-4"},ue={class:"full-width d-flex my-1"},me={class:"d-flex flex-nowrap align-start"},ce={class:"d-flex flex-wrap flex-grow-1",style:{margin:"0 -8px"}},pe={class:"d-flex align-center justify-space-between mb-2"},fe={class:"text-subtitle-2"},ve={class:"d-flex flex-column gap-2"},Ve={class:"d-flex flex-column gap-4 mt-auto ml-4",style:{width:"150px"}},_e=B({__name:"SearchPlayersFilters",props:{modelValue:{},statsMeta:{}},emits:["update:modelValue"],setup(u,{emit:_}){const c=u,w=_,d=S(()=>{var o;const r=(((o=c.statsMeta)==null?void 0:o.filters.maps)??[]).reduce((a,e)=>{const[n,y]=e.split("_");return!(n in j)||(a[n]||(a[n]=[]),!j[n][y])||a[n].push(y),a},{});return Object.fromEntries(Object.entries(r).map(([a,e])=>[a,e.map(n=>({value:n,title:n})).sort(te("title"))]))}),m=()=>Date.now()+Math.random(),t=I({...c.modelValue,withLeavers:!0,filters:c.modelValue.filters.map(r=>({...r,_uid:m()}))}),p=S(()=>d.value[t.value.type]??[]),h=r=>({...r,filters:r.filters.map(({_uid:o,...a})=>a)});x(()=>p.value,()=>{var r;(!t.value.version||!p.value.some(o=>o.value===t.value.version))&&(t.value.version=((r=p.value[0])==null?void 0:r.value)??"")},{immediate:!0}),x(()=>c.modelValue,r=>{const o=h(t.value);JSON.stringify(r)!==JSON.stringify(o)&&(t.value={...r,withLeavers:!0,filters:r.filters.map(a=>({...a,_uid:m()}))})},{deep:!0}),x(()=>t.value.type,()=>{var r;t.value.version=((r=p.value[0])==null?void 0:r.value)??""}),x(()=>t.value.version,()=>{t.value.filters=[{_uid:m()}]});const V=()=>{w("update:modelValue",h(t.value))},C=()=>{t.value.filters.length<4&&t.value.filters.push({_uid:m()})},L=r=>{t.value.filters.length>1&&t.value.filters.splice(r,1)};return(r,o)=>(v(),b("div",null,[s(D,{class:"mb-4"},{default:i(()=>[s(F,{cols:"12",md:"12"},{default:i(()=>[f("div",de,[(v(),k(M,{modelValue:l(t).version,"onUpdate:modelValue":o[1]||(o[1]=a=>l(t).version=a),items:l(p),density:"compact",variant:"outlined",label:"Map version",class:"flex-grow-0",style:{"min-width":"250px"},"hide-details":"","list-props":{density:"comfortable"},"bg-color":"transparent",flat:"",key:l(t).type},{"prepend-item":i(()=>[f("div",ue,[s(se,{class:"mx-auto",density:"compact",size:"small",modelValue:l(t).type,"onUpdate:modelValue":o[0]||(o[0]=a=>l(t).type=a),mandatory:""},{default:i(()=>[(v(!0),b(H,null,$(l(d),(a,e)=>(v(),k(U,{density:"compact",size:"small",value:e,key:e},{default:i(()=>[g(P(l(G)[e]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","items"]))])]),_:1})]),_:1}),f("div",me,[f("div",ce,[(v(!0),b(H,null,$(l(t).filters,(a,e)=>(v(),b("div",{key:a._uid,class:"pa-2",style:{width:"250px"}},[f("div",pe,[f("span",fe,"Player "+P(e+1),1),l(t).filters.length>1?(v(),k(U,{key:0,icon:"",density:"comfortable",variant:"text",color:"error",size:"small",onClick:n=>L(e)},{default:i(()=>[s(E,null,{default:i(()=>[g(P(l(q)),1)]),_:1})]),_:1},8,["onClick"])):z("",!0)]),f("div",ve,[s(ne,{modelValue:l(t).filters[e],"onUpdate:modelValue":n=>l(t).filters[e]=n,type:l(t).type,version:l(t).version},null,8,["modelValue","onUpdate:modelValue","type","version"])])]))),128)),l(t).filters.length<4?(v(),b("div",{key:0,class:"d-flex align-center justify-center rounded cursor-pointer transition-swing",onClick:C,style:{border:"2px dashed rgba(var(--v-theme-on-surface), 0.12)",width:"200px"}},[s(E,{size:"64",color:"medium-emphasis"},{default:i(()=>[g(P(l(A)),1)]),_:1})])):z("",!0)]),f("div",Ve,[s(U,{color:"primary",onClick:V,block:""},{default:i(()=>[...o[2]||(o[2]=[g(" Search ",-1)])]),_:1})])])]))}}),ye=le(_e,[["__scopeId","data-v-88685bdc"]]),he={class:"full-height pb-16"},He=B({__name:"matches",async setup(u){let _,c;const w=([_,c]=J(()=>re()),_=await _,c(),_),d=I({type:"og",version:"",filters:[{}],withLeavers:!0});return oe({title:"Match Search",description:"Search Survival Chaos matches by player, race, and more"}),(m,t)=>{const p=K;return v(),b("div",he,[s(p,{title:"Match Search",id:"matches",class:"mb-4"},{default:i(()=>[s(D,null,{default:i(()=>[s(F,{cols:"12"},{default:i(()=>[s(ye,{modelValue:l(d),"onUpdate:modelValue":t[0]||(t[0]=h=>ae(d)?d.value=h:null),"stats-meta":l(w)},null,8,["modelValue","stats-meta"])]),_:1})]),_:1}),s(D,null,{default:i(()=>[s(F,{cols:"12"},{default:i(()=>[s(X,{filters:l(d)},null,8,["filters"])]),_:1})]),_:1})]),_:1})])}}});export{He as default};
