import{_ as Oe}from"./1G0Idxu5.js";import{u as U,_ as re,a as ce}from"./BofSAEUc.js";import{q as Z,s as ee,S as I,e as s,al as xe,am as Fe,c as k,an as Ae,a6 as ye,T as z,a1 as Ge,a3 as We,R as D,a5 as ze,ao as qe,d as V,I as B,g as C,o as v,ap as ge,b as a,F as R,j as A,u as n,a as $,f as _,L as j,i as E,t as T,_ as G,B as N,E as J,r as q,ah as P,J as te,aq as Ke,ar as Ze,D as ke,m as we,w as $e,as as Je,h as W,at as Qe,au as Ye,av as Te,aw as Ce,ax as Xe,K as de,ay as et,ak as tt}from"./Bp0GSeUo.js";import{u as Pe}from"./D3hjVo6J.js";import{b as st,c as nt,V as at,a as le}from"./BDGEmtRQ.js";import{a as Se,m as Ve,b as ot,c as lt,V as Q}from"./B6nXuue3.js";import{a as se,_ as H}from"./CBocA0RG.js";import{u as ue}from"./BYcUVtHv.js";import{a as L,V as he}from"./BFQSOSIG.js";import{V as it}from"./BrCy4PRL.js";import{a as ne,g as me,R as rt,j as Ie,n as ct,o as De,V as je,p as dt,q as ut,r as mt,b as Me,d as pt,e as ft,u as vt,s as _t}from"./Uv6GIUdz.js";import{u as bt,m as yt,_ as He,V as Re}from"./DwsBwtqk.js";import{h as Ee,_ as O,a as pe}from"./Cvq3cwO2.js";import{u as gt}from"./DH0F7ePs.js";import{V as ht}from"./DGhDZ8PV.js";import{_ as Y}from"./DED3OAZM.js";import{I as xt,D as kt}from"./DYmvtetA.js";import"./DbYZnSlv.js";/* empty css        */const K=Symbol.for("vuetify:v-expansion-panel"),Le=ee({...me(),...yt()},"VExpansionPanelText"),S=Z()({name:"VExpansionPanelText",props:Le(),setup(e,o){let{slots:d}=o;const c=I(K);if(!c)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:m,onAfterLeave:t}=bt(e,c.isSelected);return ne(()=>s(it,{onAfterLeave:t},{default:()=>{var i;return[xe(s("div",{class:["v-expansion-panel-text",e.class],style:e.style},[d.default&&m.value&&s("div",{class:"v-expansion-panel-text__wrapper"},[(i=d.default)==null?void 0:i.call(d)])]),[[Fe,c.isSelected.value]])]}})),{}}}),Ne=ee({color:String,expandIcon:{type:ye,default:"$expand"},collapseIcon:{type:ye,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...me(),...dt()},"VExpansionPanelTitle"),ie=Z()({name:"VExpansionPanelTitle",directives:{Ripple:rt},props:Ne(),setup(e,o){let{slots:d}=o;const c=I(K);if(!c)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:m,backgroundColorStyles:t}=Ie(e,"color"),{dimensionStyles:i}=ct(e),u=k(()=>({collapseIcon:e.collapseIcon,disabled:c.disabled.value,expanded:c.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),y=k(()=>c.isSelected.value?e.collapseIcon:e.expandIcon);return ne(()=>{var x;return xe(s("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":c.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},m.value,e.class],style:[t.value,i.value,e.style],type:"button",tabindex:c.disabled.value?-1:void 0,disabled:c.disabled.value,"aria-expanded":c.isSelected.value,onClick:e.readonly?void 0:c.toggle},[s("span",{class:"v-expansion-panel-title__overlay"},null),(x=d.default)==null?void 0:x.call(d,u.value),!e.hideActions&&s(De,{defaults:{VIcon:{icon:y.value}}},{default:()=>{var f;return[s("span",{class:"v-expansion-panel-title__icon"},[((f=d.actions)==null?void 0:f.call(d,u.value))??s(je,null,null)])]}})]),[[Ae("ripple"),e.ripple]])}),{}}}),Ue=ee({title:String,text:String,bgColor:String,...ft(),...Ve(),...pt(),...Me(),...Ne(),...Le()},"VExpansionPanel"),M=Z()({name:"VExpansionPanel",props:Ue(),emits:{"group:selected":e=>!0},setup(e,o){let{slots:d}=o;const c=Se(e,K),{backgroundColorClasses:m,backgroundColorStyles:t}=Ie(e,"bgColor"),{elevationClasses:i}=ut(e),{roundedClasses:u}=mt(e),y=k(()=>(c==null?void 0:c.disabled.value)||e.disabled),x=k(()=>c.group.items.value.reduce((p,l,w)=>(c.group.selected.value.includes(l.id)&&p.push(w),p),[])),f=k(()=>{const p=c.group.items.value.findIndex(l=>l.id===c.id);return!c.isSelected.value&&x.value.some(l=>l-p===1)}),r=k(()=>{const p=c.group.items.value.findIndex(l=>l.id===c.id);return!c.isSelected.value&&x.value.some(l=>l-p===-1)});return z(K,c),ne(()=>{const p=!!(d.text||e.text),l=!!(d.title||e.title),w=ie.filterProps(e),h=S.filterProps(e);return s(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":c.isSelected.value,"v-expansion-panel--before-active":f.value,"v-expansion-panel--after-active":r.value,"v-expansion-panel--disabled":y.value},u.value,m.value,e.class],style:[t.value,e.style]},{default:()=>[s("div",{class:["v-expansion-panel__shadow",...i.value]},null),s(De,{defaults:{VExpansionPanelTitle:{...w},VExpansionPanelText:{...h}}},{default:()=>{var b;return[l&&s(ie,{key:"title"},{default:()=>[d.title?d.title():e.title]}),p&&s(S,{key:"text"},{default:()=>[d.text?d.text():e.text]}),(b=d.default)==null?void 0:b.call(d)]}})]})}),{groupItem:c}}}),wt=["default","accordion","inset","popout"],$t=ee({flat:Boolean,...lt(),...qe(Ue(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...ze(),...me(),...Me(),variant:{type:String,default:"default",validator:e=>wt.includes(e)}},"VExpansionPanels"),fe=Z()({name:"VExpansionPanels",props:$t(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:d}=o;const{next:c,prev:m}=ot(e,K),{themeClasses:t}=Ge(e),i=k(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return We({VExpansionPanel:{bgColor:D(e,"bgColor"),collapseIcon:D(e,"collapseIcon"),color:D(e,"color"),eager:D(e,"eager"),elevation:D(e,"elevation"),expandIcon:D(e,"expandIcon"),focusable:D(e,"focusable"),hideActions:D(e,"hideActions"),readonly:D(e,"readonly"),ripple:D(e,"ripple"),rounded:D(e,"rounded"),static:D(e,"static")}}),ne(()=>s(e.tag,{class:["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},t.value,i.value,e.class],style:e.style},{default:()=>{var u;return[(u=d.default)==null?void 0:u.call(d,{prev:m,next:c})]}})),{next:c,prev:m}}}),Tt=Z()({name:"VSlideGroupItem",props:Ve(),emits:{"group:selected":e=>!0},setup(e,o){let{slots:d}=o;const c=Se(e,st);return()=>{var m;return(m=d.default)==null?void 0:m.call(d,{isSelected:c.isSelected.value,select:c.select,toggle:c.toggle,selectedClass:c.selectedClass.value})}}}),Ct=["innerHTML"],Pt=V({__name:"RaceSelectRibbon",async setup(e){let o,d;const c=Pe("iconSize"),{raceData:m,iconProps:t,iconsSrc:i}=([o,d]=B(()=>U("races")),o=await o,d(),o),u=k(()=>Object.values(m).flat());return(y,x)=>{const f=Oe,r=re;return v(),C("div",null,[s(nt,{"model-value":(y._.provides[ge]||y.$route).params.race,"center-active":"","show-arrows":""},{default:a(()=>[(v(!0),C(R,null,A(n(u),p=>(v(),$(Tt,{value:p.key,key:p.key},{default:a(({isSelected:l})=>[_("div",{class:j(["race-wrapper",{selected:l}])},[s(r,{coords:n(t)(p.id),src:n(i),description:"",width:n(c)},{tooltip:a(()=>[_("div",{innerHTML:p.name},null,8,Ct)]),default:a(()=>[s(f,{to:{name:"RaceIndex",params:{...(y._.provides[ge]||y.$route).params,race:p.key}}},{default:a(()=>[E(T(p.name),1)]),_:2},1032,["to"])]),_:2},1032,["coords","src","width"])],2)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value"])])}}}),St=G(Pt,[["__scopeId","data-v-f1152851"]]),Vt={key:0,class:"d-flex row-warp align-center my-1"},It={class:"ml-2 mt-n1"},Dt={class:"ml-2 mt-n1"},jt=["innerHTML"],Mt={class:"text-white bg-red mx-2 rounded-lg"},Ht={class:"text-white bg-blue mx-2 rounded-lg"},Rt={class:"d-flex align-center"},Et={class:"ml-2 mt-n1"},Lt={class:"d-flex align-center"},Nt={class:"ml-2 mt-n1"},Ut={class:"upgrades-wrapper"},Bt=V({__name:"DetailsUnit",props:{item:{}},async setup(e){let o,d;const c=N(["characteristics","upgrades","items"]),[m,{gold:t,bounty:i,range:u,attackSpeed:y}]=ue(),x=I("raceName"),{iconProps:f,iconsSrc:r}=([o,d]=B(()=>U(x)),o=await o,d(),o),p=I("objFinder"),l=k(()=>!isNaN(Number(e.item.hpReg))),w=k(()=>!isNaN(Number(e.item.mpReg))),h=k(()=>{var b;return(b=e.item.upgrades)==null?void 0:b.map(g=>p("upgrade",g)).filter(J)});return(b,g)=>{var be;const X=re,_e=se,Be=H;return v(),C(R,null,[q(b.$slots,"fullname",{},void 0,!0),(be=b.item.tags)!=null&&be.length?(v(),C("div",Vt,[g[1]||(g[1]=_("div",{class:"text-subtitle-2"},"Tags:",-1)),(v(!0),C(R,null,A(b.item.tags,F=>(v(),$(at,{class:"ma-1 mr-0",density:"compact",size:"small"},{default:a(()=>[E(T(F),1)]),_:2},1024))),256))])):P("",!0),s(he,{class:"my-1"},{default:a(()=>[s(L,{cols:"6",class:"d-flex align-center py-0"},{default:a(()=>[s(X,{src:n(m),coords:n(t),width:"32",description:"Cost"},null,8,["src","coords"]),_("span",It,T(b.item.cost),1)]),_:1}),s(L,{cols:"6",class:"d-flex align-center py-0"},{default:a(()=>[s(X,{src:n(m),coords:n(i),width:"32",description:"Kill bounty"},null,8,["src","coords"]),_("span",Dt,T(b.item.bounty),1)]),_:1})]),_:1}),s(fe,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(c),"onUpdate:modelValue":g[0]||(g[0]=F=>te(c)?c.value=F:null)},{default:a(()=>{var F;return[b.item.description?(v(),$(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",{class:"text-body-2",innerHTML:b.item.description},null,8,jt)]),_:1})]),_:1})):P("",!0),q(b.$slots,"heroItems",{},void 0,!0),s(M,{title:"Characteristics",value:"characteristics"},{default:a(()=>[s(S,null,{default:a(()=>[s(he,{class:"my-1"},{default:a(()=>[s(L,{cols:"6",class:"text-center pt-0"},{default:a(()=>[_("div",Mt,[_("b",null,T(b.item.hp),1),n(l)?(v(),C(R,{key:0},[E(" +"+T(b.item.hpReg)+"/sec",1)],64)):P("",!0)])]),_:1}),s(L,{cols:"6",class:"text-center pt-0"},{default:a(()=>[_("div",Ht,[_("b",null,T(b.item.mp),1),n(w)?(v(),C(R,{key:0},[E(" +"+T(b.item.mpReg)+"/sec",1)],64)):P("",!0)])]),_:1}),s(L,{cols:"6",class:"py-0"},{default:a(()=>[s(_e,{type:b.item.atkType,value:b.item.atk},null,8,["type","value"]),_("div",Rt,[s(X,{src:n(m),coords:n(u),width:"32",description:"Attack range"},null,8,["src","coords"]),_("span",Et,T(b.item.atkRange)+T(b.item.weaponType==="normal"?" (melee)":""),1)]),_("div",Lt,[s(X,{src:n(m),coords:n(y),width:"32",description:"Attack speed"},null,8,["src","coords"]),_("span",Nt,T(b.item.atkSpeed),1)])]),_:1}),s(L,{cols:"6",class:"py-0"},{default:a(()=>[s(_e,{type:b.item.defType,value:b.item.def,"is-defend":""},null,8,["type","value"])]),_:1}),q(b.$slots,"attributes",{},void 0,!0)]),_:3})]),_:3})]),_:3}),(F=n(h))!=null&&F.length?(v(),$(M,{key:1,title:"Upgrades used",value:"upgrades"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",Ut,[(v(!0),C(R,null,A(n(h),oe=>(v(),$(Be,{item:oe,src:n(r),coords:n(f)(oe.id,oe.iconsCount)},null,8,["item","src","coords"]))),256))])]),_:1})]),_:1})):P("",!0)]}),_:3},8,["modelValue"])],64)}}}),ae=G(Bt,[["__scopeId","data-v-f314cd24"]]),Ot=["innerHTML"],Ft={class:"d-flex justify-center"},At=V({__name:"DetailsHero",props:{item:{}},async setup(e){let o,d;const c=I("raceName"),{iconProps:m,iconsSrc:t}=([o,d]=B(()=>U(c)),o=await o,d(),o),[i,{str:u,int:y,agi:x}]=ue(),f=k(()=>{if(!e.item.items)return[];const r=e.item.items.map(({level:l})=>l);if(!(r!=null&&r.length))return[];const p=r.filter(Ke).sort((l,w)=>l-w).reduce((l,w,h)=>(l[w]=Ee[h],l),{});return e.item.items.map(l=>({...l,hotkey:p[l.level]}))});return(r,p)=>{const l=ce,w=H,h=O,b=ae;return v(),$(b,{item:r.item},{fullname:a(()=>[_("div",{innerHTML:r.item.fullName,class:"text-center text-subtitle-1"},null,8,Ot)]),attributes:a(()=>[s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(l,{width:"32",src:n(i),coords:n(u),padding:[0,8,8,0]},null,8,["src","coords"]),_("div",{class:j({"text-yellow":r.item.stat==="str","font-bold":r.item.stat==="str"})},T(r.item.str)+"+"+T(r.item.strLvl),3)]),_:1}),s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(l,{width:"32",src:n(i),coords:n(x),padding:[0,8,8,0]},null,8,["src","coords"]),_("div",{class:j({"text-yellow":r.item.stat==="agi","font-bold":r.item.stat==="agi"})},T(r.item.agi)+"+"+T(r.item.agiLvl),3)]),_:1}),s(L,{cols:"4",class:"text-center pb-0"},{default:a(()=>[s(l,{width:"32",src:n(i),coords:n(y),padding:[0,8,8,0]},null,8,["src","coords"]),_("div",{class:j({"text-yellow":r.item.stat==="int","font-bold":r.item.stat==="int"})},T(r.item.int)+"+"+T(r.item.intLvl),3)]),_:1})]),heroItems:a(()=>[n(f).length?(v(),$(M,{key:0,title:"Hero items",value:"items"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",Ft,[s(h,{items:n(f),size:.75},{default:a(({item:g})=>[s(w,{src:n(t),coords:n(m)(g.id),item:g},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]),_:1},8,["item"])}}}),Gt=G(At,[["__scopeId","data-v-dc1de915"]]),Wt=["innerHTML"],zt={class:"d-flex justify-center"},qt={class:"d-flex justify-center"},Kt=V({__name:"DetailsUpgrade",props:{item:{}},async setup(e){let o,d;const c=N(["spells","summons","affects"]),m=I("raceName"),{raceData:t,iconProps:i,iconsSrc:u}=([o,d]=B(()=>U(m)),o=await o,d(),o),y=k(()=>{var r;return((r=e.item.spells)==null?void 0:r.map(p=>p.summonUnit).flat().filter(J).filter(Ze))??[]}),x=k(()=>e.item.spells),f=k(()=>{const r=Object.values(t.units).filter(({upgrades:l})=>l==null?void 0:l.includes(e.item.id)),p=t.bonuses.map(({units:l})=>l??[]).flat().filter(({upgrades:l})=>l==null?void 0:l.includes(e.item.id)).map(l=>{var h;const w=((h=t.bonuses.find(({units:b})=>b==null?void 0:b.some(({id:g})=>g===l.id)))==null?void 0:h.id)??"";return{...l,id:w}});return[...r,...p]});return(r,p)=>{const l=H,w=O,h=ae;return v(),$(fe,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(c),"onUpdate:modelValue":p[0]||(p[0]=b=>te(c)?c.value=b:null)},{default:a(()=>{var b;return[r.item.description?(v(),$(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",{class:"text-body-2",innerHTML:r.item.description},null,8,Wt)]),_:1})]),_:1})):P("",!0),(b=n(x))!=null&&b.length?(v(),$(M,{key:1,title:"Spells",value:"spells"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",zt,[s(w,{items:n(x),"disable-details":"","skip-hotkey":""},{default:a(({item:g})=>[s(l,{item:g,src:n(u),coords:n(i)(g.id,g.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0),(v(!0),C(R,null,A(n(y),g=>(v(),$(M,{title:`Summon: ${g.name}`,value:`summon-${g.id}`},{default:a(()=>[s(S,null,{default:a(()=>[s(h,{item:g},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),n(f).length?(v(),$(M,{key:2,title:"Affects",value:"affects"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",qt,[s(w,{items:n(f),"disable-details":"","skip-hotkey":""},{default:a(({item:g})=>[s(l,{item:g,src:n(u),coords:n(i)(g.id,g.iconsCount)},null,8,["item","src","coords"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]}),_:1},8,["modelValue"])}}}),Zt=V({__name:"DetailsSpell",props:{item:{}},setup(e){return(o,d)=>(v(),C("div"))}}),Jt={class:"cost"},Qt=V({__name:"CombineCost",props:{items:{},count:{}},setup(e){const[o,{gold:d}]=ue(),c=k(()=>ke(e.items).reduce((m,{cost:t})=>{var i;return m+((i=t??[])==null?void 0:i.slice(0,e.count).reduce((u,y)=>u+(y??0),0))},0));return(m,t)=>{const i=ce,u=He;return v(),$(u,null,{default:a(()=>[s(Re,{location:"top"},{activator:a(({props:y})=>[_("div",we({class:"d-flex align-center"},y),[s(i,{src:n(o),coords:n(d),width:"16"},null,8,["src","coords"]),_("span",Jt,T(n(c)),1)],16)]),default:a(()=>[q(m.$slots,"default",{},()=>[t[0]||(t[0]=E("Total cost"))],!0)]),_:3})]),_:3})}}}),ve=G(Qt,[["__scopeId","data-v-1bade672"]]),Yt=["innerHTML"],Xt={class:"d-flex justify-center"},es={class:"d-flex justify-center"},ts=V({__name:"DetailsBonus",props:{item:{}},async setup(e){let o,d;const c=I("objFinder"),m=I("raceName"),{iconProps:t,iconsSrc:i}=([o,d]=B(()=>U(m)),o=await o,d(),o),u=N(["grid","opens"]);$e(()=>e.item,r=>{var p;u.value=["grid"].concat(((p=r.units)==null?void 0:p.map(({id:l})=>`unit-${l}`))??[])});const y=k(()=>{var r;return(((r=e.item.spells)==null?void 0:r.length)??0)>1?!0:[e.item.units,e.item.upgrades].some(p=>!!(p!=null&&p.length))}),x=k(()=>[...(e.item.spells??[]).filter(({name:r})=>!!r),...e.item.upgrades??[]]),f=k(()=>e.item.relatedID.map(r=>c("upgrade",r)).filter(J));return(r,p)=>{const l=ve,w=H,h=O,b=ae;return v(),$(fe,{elevation:"0",static:"",tile:"",multiple:"",modelValue:n(u),"onUpdate:modelValue":p[0]||(p[0]=g=>te(u)?u.value=g:null)},{default:a(()=>[r.item.description?(v(),$(M,{key:0,title:"Description",value:"description"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",{class:"text-body-2",innerHTML:r.item.description},null,8,Yt)]),_:1})]),_:1})):P("",!0),n(y)&&n(x).length?(v(),$(M,{key:1,value:"grid"},{default:a(()=>[s(ie,{width:"100%",class:"d-flex"},{default:a(()=>[p[2]||(p[2]=_("span",{class:"mr-auto"},"Bonus spells/upgrades",-1)),s(l,{items:r.item.upgrades??[]},{default:a(()=>p[1]||(p[1]=[E(" Total cost ")])),_:1},8,["items"])]),_:1}),s(S,null,{default:a(()=>[_("div",Xt,[n(y)&&n(x).length?(v(),$(h,{key:0,items:n(x),"disable-details":"","show-empty":""},{default:a(({item:g})=>[s(w,{src:n(i),coords:n(t)(g.id,g.iconsCount),item:g},null,8,["src","coords","item"])]),_:1},8,["items"])):P("",!0)])]),_:1})]),_:1})):P("",!0),(v(!0),C(R,null,A(r.item.units,g=>(v(),$(M,{title:`Unit: ${g.name}`,value:`unit-${g.id}`},{default:a(()=>[s(S,null,{default:a(()=>[s(b,{item:g},null,8,["item"])]),_:2},1024)]),_:2},1032,["title","value"]))),256)),n(f).length?(v(),$(M,{key:2,title:"Unlocked upgrades",value:"opens"},{default:a(()=>[s(S,null,{default:a(()=>[_("div",es,[s(h,{items:n(f),"disable-details":"","skip-hotkey":""},{default:a(({item:g})=>[s(w,{src:n(i),coords:n(t)(g.id,g.iconsCount),item:g},null,8,["src","coords","item"])]),_:1},8,["items"])])]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])}}}),ss=({item:e})=>{const o=ke(e);if(o){if(Je(o))return W(ae,{item:o});if(Qe(o))return W(Gt,{item:o});if(Ye(o))return W(Kt,{item:o});if(Te(o))return W(Zt,{item:o});if(Ce(o))return W(ts,{item:o})}},ns={key:0,class:"d-flex align-center justify-space-between panel-header pb-2 elevation-1 mb-2"},as=["innerHTML"],os={class:"panel-details"},ls=V({__name:"DetailsProvider",props:{objFinder:{type:Function},raceName:{}},async setup(e){let o,d;const{iconProps:c,iconsSrc:m}=([o,d]=B(()=>U(e.raceName)),o=await o,d(),o),t=N(null),i=gt(),u=k({get:()=>!!t.value,set:f=>{f||(t.value=null)}});Xe(()=>{i.value&&["bonus","spell","unit","hero","upgrade"].forEach(f=>{var p;if(!i.value||((p=t.value)==null?void 0:p.id)===i.value)return;const r=e.objFinder(f,i.value);r&&(t.value=r)})}),$e(()=>t.value,f=>i.value=f==null?void 0:f.id);const y=f=>{t.value=f},x=()=>{var f;navigator.clipboard.writeText(((f=t.value)==null?void 0:f.id)||"")};return z("detailsSet",y),z("objFinder",e.objFinder),z("raceName",e.raceName),(f,r)=>{const p=ce,l=ss,w=He;return v(),C(R,null,[s(w,null,{default:a(()=>[s(ht,{modelValue:n(u),"onUpdate:modelValue":r[1]||(r[1]=h=>te(u)?u.value=h:null),location:"left",temporary:"","disable-resize-watcher":"",elevation:"4",class:"pa-2",width:"400","disable-route-watcher":""},{default:a(()=>[n(t)?(v(),C("div",ns,[s(Re,{color:"transparent"},{activator:a(({props:h})=>[s(p,we({src:n(m),coords:n(c)(n(t).id),width:"32"},h,{onClick:x}),null,16,["src","coords"])]),default:a(()=>[E(" ID: "+T(n(t).id),1)]),_:1}),_("span",{innerHTML:n(t).name,class:"text-h6 mx-2"},null,8,as),s(Q,{density:"comfortable",icon:"",flat:"",onClick:r[0]||(r[0]=h=>y(null))},{default:a(()=>[s(je,{icon:"$close"})]),_:1})])):P("",!0),_("div",os,[s(l,{item:n(t)},null,8,["item"])])]),_:1},8,["modelValue"])]),_:1}),q(f.$slots,"default",{},void 0,!0)],64)}}}),is=G(ls,[["__scopeId","data-v-e1fba027"]]),rs={style:{"grid-row":"span 2","grid-column":"1"}},cs=["innerHTML"],ds=["innerHTML"],us=V({__name:"RaceDescription",props:{race:{}},setup(e){const o=k(()=>e.race.description.replace(new RegExp(String.raw`^\s*?<span[^>]*?>.*?${e.race.name}.*?<\/span>`,"si"),"").replace(/\s+?(?:<br\s?\/?>)*/,"")),d=k(()=>(e.race.description.match(new RegExp(String.raw`#[a-zA-Z0-9]{6,8}(?=[^<]*?(?:${e.race.name}))`))??["white"])[0]);return(c,m)=>{const t=Y;return v(),C("div",rs,[s(t,{title:"",id:"details","full-height":!1},{title:a(()=>[_("h1",{class:"text-wrap text-h3",style:de({color:n(d)}),innerHTML:c.race.name},null,12,cs)]),default:a(()=>[_("div",{innerHTML:n(o)},null,8,ds)]),_:1})])}}}),ms=["innerHTML"],ps={key:0,class:"text-subtitle-1"},fs={class:"text-yellow"},vs={key:1,class:"text-subtitle-1"},_s={key:0,class:"text-green"},bs=V({__name:"RaceFortress",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N()),d=k(()=>[e.race.t1spell,e.race.t2spell,e.race.ultiData].filter(J)),c=k(()=>e.race.magic.map((t,i)=>({...t,hotkey:Ee[i]})).concat(...Object.values(e.race.baseUpgrades))),m=t=>{const i=Object.values(e.race.units).filter(({upgrades:u})=>u==null?void 0:u.includes(t.id)).map(({id:u})=>u);o.value=[t.id,...i]};return(t,i)=>{const u=pe,y=se,x=ve,f=O,r=re,p=Y;return v(),$(p,{title:"Fortress",class:"d-flex flex-column justify-start","full-height":!1,id:"fortress"},{title:a(()=>[s(u,{"hide-dot":"",item:t.race.buildings.fort},{default:a(()=>[s(Q,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>i[1]||(i[1]=[_("b",null,"Fortress",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(y,{key:"fort-attack",class:"ml-1",type:t.race.buildings.fort.atkType},null,8,["type"])]),appendHead:a(()=>[s(x,{key:"fort-cost",class:"mr-1",items:n(c)},null,8,["items"])]),default:a(()=>[s(f,{class:"mx-auto",items:t.race.auras},{default:a(({item:l})=>[s(n(H),{item:l,src:t.icons,coords:t.iconProps(l.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(l.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"]),s(le,{class:"my-3 w-100"}),s(f,{class:"mx-auto",items:n(c)},{default:a(({item:l})=>[s(n(H),{item:l,src:t.icons,coords:!("level"in l)||(l.iconsCount??0)<=1?t.iconProps(l.id,l.iconsCount):t.iconProps(`${l.id}-${l.level}`),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(l.id)}]),onMouseenter:()=>m(l),onMouseout:i[0]||(i[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),s(le,{class:"my-3 w-100"}),s(f,{class:"mx-auto",items:n(d)},{default:a(({item:l})=>[("isSpellObject"in t?t.isSpellObject:n(Te))(l)?(v(),$(n(H),{key:0,item:l,src:t.icons,coords:t.iconProps(l.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(l.id)}])},null,8,["item","src","coords","class"])):(v(),$(r,{key:1,src:t.icons,coords:t.iconProps(l.id)},{tooltip:a(()=>[_("div",{class:"text-h6",innerHTML:l.name.replace(/\[.+\]/g,"")},null,8,ms),i[4]||(i[4]=_("br",null,null,-1)),"damageTime"in l?(v(),C("div",ps,[i[2]||(i[2]=E(" Time to full damage: ")),_("span",fs,T(l.damageTime==0?"Instant":l.damageTime+"s"),1)])):P("",!0),"stealInterrupt"in l?(v(),C("div",vs,[i[3]||(i[3]=E(" Interrupts mana steal: ")),_("span",{class:j(l.stealInterrupt?"text-green":"text-red")},T(l.stealInterrupt?"Yes":"No"),3),l.fakeStealInterrupt?(v(),C("span",_s," (+ Decoy UW) ")):P("",!0)])):P("",!0)]),_:2},1032,["src","coords"]))]),_:1},8,["items"])]),_:1})}}}),ys=V({__name:"RaceTowers",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N());k(()=>Object.fromEntries(e.race.towerUpgrades.map(m=>[m.id,m])));const d=k(()=>Object.values(e.race.bonuses).reduce((m,{id:t,relatedID:i})=>(i.forEach(u=>{m[u]=t}),m),{})),c=m=>{const t=Object.values(e.race.units).filter(({upgrades:i})=>i==null?void 0:i.includes(m.id)).map(({id:i})=>i);o.value=[m.id,d.value[m.id],...t]};return(m,t)=>{const i=pe,u=se,y=ve,x=H,f=O,r=Y;return v(),$(r,{title:"Towers","full-height":!1,class:"d-flex flex-column",id:"upgrades"},{title:a(()=>[s(i,{"hide-dot":"",item:m.race.buildings.tower},{default:a(()=>[s(Q,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>t[1]||(t[1]=[_("b",null,"Towers",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(u,{key:"tower-attack",class:"ml-1",type:m.race.buildings.tower.atkType},null,8,["type"])]),appendHead:a(()=>[s(y,{key:"tower-cost",items:m.race.towerUpgrades,count:3},{default:a(()=>t[2]||(t[2]=[E(" Total cost (Lv3) ")])),_:1},8,["items"])]),default:a(()=>[s(f,{class:"mx-auto",items:m.race.towerUpgrades,restrictedSlots:["Q","W"]},{default:a(({item:p})=>[s(x,{item:p,src:m.icons,coords:m.iconProps(p.id,p.iconsCount),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(p.id)}]),onMouseenter:()=>c(p),onMouseout:t[0]||(t[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"])]),_:1})}}}),gs={class:"d-flex flex-wrap"},hs=["innerHTML"],xs=V({__name:"RaceBonuses",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N()),d=new Intl.Collator("en").compare,c=k(()=>Object.values(e.race.bonusBuildings).sort(({name:t},{name:i})=>d(t,i))),m=t=>{if(!Ce(t)){o.value=[t.id,...e.race.bonuses.filter(({buildingId:u})=>u===t.id).map(({id:u})=>u)].filter(J);return}const i=Object.values(e.race.units).filter(({hotkey:u})=>{var y;return(y=t.units)==null?void 0:y.some(x=>x.hotkey===u)}).map(({id:u})=>u);o.value=[t.id,t.buildingId,...t.relatedID,...i]};return(t,i)=>{const u=H,y=O,x=Y;return v(),C("div",{style:de({gridRow:`span ${1+Math.floor(n(c).length/5)}`})},[s(x,{title:"Bonuses","full-height":!1,class:"d-flex flex-column align-center justify-start",id:"bonuses"},{default:a(()=>[s(y,{items:t.race.bonuses},{default:a(({item:f})=>[s(u,{item:f,src:t.icons,coords:t.iconProps(f.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(f.id)}]),onMouseenter:()=>m(f),onMouseout:i[0]||(i[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),i[2]||(i[2]=_("div",{class:"my-2 text-h6"},"Buildings",-1)),_("div",gs,[(v(!0),C(R,null,A(n(c),f=>(v(),$(Q,{class:"my-1 mx-2 cursor-default",variant:"text",size:"x-small",active:n(o)&&n(o).includes(f.id),onMouseover:()=>m(f),onMouseout:i[1]||(i[1]=()=>o.value=void 0)},{default:a(()=>[_("span",{innerHTML:f.name},null,8,hs)]),_:2},1032,["active","onMouseover"]))),256))])]),_:1})],4)}}}),ks=V({__name:"RaceBarracks",props:{race:{},icons:{},iconProps:{type:Function}},setup(e){const o=I("hover",N());I("objFinder");const d={melee:"A",range:"S",mage:"D",siege:"F",air:"E",catapult:"R"},c=k(()=>Object.entries(e.race.units).map(([t,i])=>({...i,hotkey:d[t]}))),m=t=>{o.value=[t.id,...t.upgrades??[]]};return(t,i)=>{const u=pe,y=se,x=O,f=Y;return v(),$(f,{title:"Barracks","full-height":!1,class:"d-flex flex-column",id:"units"},{title:a(()=>[s(u,{"hide-dot":"",item:t.race.buildings.barrack},{default:a(()=>[s(Q,{size:"large",class:"mx-auto",variant:"text",color:"yellow"},{default:a(()=>i[1]||(i[1]=[_("b",null,"Barracks",-1)])),_:1})]),_:1},8,["item"])]),prependHead:a(()=>[s(y,{key:"barrack-attack",class:"ml-1",type:t.race.buildings.barrack.atkType},null,8,["type"])]),default:a(()=>[s(x,{class:"mx-auto",items:n(c)},{default:a(({item:r})=>[s(n(H),{item:r,src:t.icons,coords:t.iconProps(r.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(r.id)}]),onMouseenter:()=>m(r),onMouseout:i[0]||(i[0]=()=>o.value=void 0)},null,8,["item","src","coords","class","onMouseenter"])]),_:1},8,["items"]),s(le,{class:"my-3 w-100"}),s(x,{class:"mx-auto",items:t.race.heroes},{default:a(({item:r})=>[s(n(H),{item:r,src:t.icons,coords:t.iconProps(r.id),class:j(["selectable-item",{depressed:n(o)&&!n(o).includes(r.id)}])},null,8,["item","src","coords","class"])]),_:1},8,["items"])]),_:1})}}}),ws=V({__name:"racePage",async setup(e){let o,d;const c=et(),[m]=[tt().params.race].flat(),{raceData:t,iconProps:i,iconsSrc:u,version:y}=([o,d]=B(()=>U(m)),o=await o,d(),o),x=(l,w)=>{switch(l){case"upgrade":return Object.values(t.baseUpgrades).concat(t.magic).concat(t.towerUpgrades).find(h=>h.id===w);case"unit":return Object.values(t.units).find(h=>h.id===w);case"bonus":return Object.values(t.bonuses).find(h=>h.id===w);case"hero":return t.heroes.find(h=>h.id===w);case"spell":return[t.t1spell,t.t2spell].find(h=>h.id===w);default:return}},f=Pe("iconSize",kt),r=k(()=>({gridTemplateColumns:`repeat(auto-fill, minmax(${+f.value*5}px, 1fr))`})),p=xt?k(()=>{}):N();return z("hover",p),c.runWithContext(()=>{vt({title:`${t.name} v${y}`,description:`${t.name} of Survival Chaos v${y}: race info, bonuses, upgrades, units and heroes`,ogDescription:`${t.name} of Survival Chaos v${y}: race info, bonuses, upgrades, units and heroes`}),_t({link:[{rel:"preload",as:"image",href:u}]})}),(l,w)=>{const h=St,b=is;return v(),C("div",null,[s(h,{class:"mb-2"}),s(b,{"obj-finder":x,"race-name":n(m)},{default:a(()=>[_("div",{class:"race-container",style:de(n(r))},[s(us,{race:n(t),style:{"flex-basis":"300px"}},null,8,["race"]),s(bs,{race:n(t),icons:n(u),"icon-props":n(i)},null,8,["race","icons","icon-props"]),s(ys,{race:n(t),icons:n(u),"icon-props":n(i)},null,8,["race","icons","icon-props"]),s(xs,{race:n(t),icons:n(u),"icon-props":n(i)},null,8,["race","icons","icon-props"]),s(ks,{race:n(t),icons:n(u),"icon-props":n(i)},null,8,["race","icons","icon-props"])],4)]),_:1},8,["race-name"])])}}}),As=G(ws,[["__scopeId","data-v-7ec59a90"]]);export{As as default};
