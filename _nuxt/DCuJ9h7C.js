import{G as I,aZ as D,r as b,s as R,t as j,a_ as H,a$ as M,b0 as z,O as C,b1 as B,b2 as T,aX as F,k as _,b3 as N,c as E,f as g,S as W,e as k,b4 as G,b5 as K,d as V,x as X,j as U,m as Y,b6 as Z,_ as q}from"./DdgL0icA.js";const J=e=>e==="defer"||e===!1;function re(...e){var O;const r=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(r);let[s,d,a={}]=e;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof d!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const t=I(),o=d,c=()=>D.value,p=()=>t.isHydrating?t.payload.data[s]:t.static.data[s];a.server=a.server??!0,a.default=a.default??c,a.getCachedData=a.getCachedData??p,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0,a.deep=a.deep??D.deep,a.dedupe=a.dedupe??"cancel";const f=a.getCachedData(s,t),m=f!=null;if(!t._asyncData[s]||!a.immediate){(O=t.payload._errors)[s]??(O[s]=D.errorValue);const l=a.deep?b:R;t._asyncData[s]={data:l(m?f:a.default()),pending:b(!m),error:j(t.payload._errors,s),status:b("idle"),_default:a.default}}const n={...t._asyncData[s]};delete n._default,n.refresh=n.execute=(l={})=>{if(t._asyncDataPromises[s]){if(J(l.dedupe??a.dedupe))return t._asyncDataPromises[s];t._asyncDataPromises[s].cancelled=!0}if(l._initial||t.isHydrating&&l._initial!==!1){const u=l._initial?f:a.getCachedData(s,t);if(u!=null)return Promise.resolve(u)}n.pending.value=!0,n.status.value="pending";const y=new Promise((u,i)=>{try{u(o(t))}catch(P){i(P)}}).then(async u=>{if(y.cancelled)return t._asyncDataPromises[s];let i=u;a.transform&&(i=await a.transform(u)),a.pick&&(i=Q(i,a.pick)),t.payload.data[s]=i,n.data.value=i,n.error.value=D.errorValue,n.status.value="success"}).catch(u=>{if(y.cancelled)return t._asyncDataPromises[s];n.error.value=F(u),n.data.value=_(a.default()),n.status.value="error"}).finally(()=>{y.cancelled||(n.pending.value=!1,delete t._asyncDataPromises[s])});return t._asyncDataPromises[s]=y,t._asyncDataPromises[s]},n.clear=()=>L(t,s);const h=()=>n.refresh({_initial:!0}),v=a.server!==!1&&t.payload.serverRendered;{const l=H();if(l&&v&&a.immediate&&!l.sp&&(l.sp=[]),l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const i=l._nuxtOnBeforeMountCbs;M(()=>{i.forEach(P=>{P()}),i.splice(0,i.length)}),z(()=>i.splice(0,i.length))}v&&t.isHydrating&&(n.error.value||f!=null)?(n.pending.value=!1,n.status.value=n.error.value?"error":"success"):l&&(t.payload.serverRendered&&t.isHydrating||a.lazy)&&a.immediate?l._nuxtOnBeforeMountCbs.push(h):a.immediate&&h();const y=T();if(a.watch){const i=C(a.watch,()=>n.refresh());y&&B(i)}const u=t.hook("app:data:refresh",async i=>{(!i||i.includes(s))&&await n.refresh()});y&&B(u)}const w=Promise.resolve(t._asyncDataPromises[s]).then(()=>n);return Object.assign(w,n),w}function L(e,r){r in e.payload.data&&(e.payload.data[r]=void 0),r in e.payload._errors&&(e.payload._errors[r]=D.errorValue),e._asyncData[r]&&(e._asyncData[r].data.value=void 0,e._asyncData[r].error.value=D.errorValue,e._asyncData[r].pending.value=!1,e._asyncData[r].status.value="idle"),r in e._asyncDataPromises&&(e._asyncDataPromises[r]&&(e._asyncDataPromises[r].cancelled=!0),e._asyncDataPromises[r]=void 0)}function Q(e,r){const s={};for(const d of r)s[d]=e[d];return s}var $;const x=!(($=globalThis==null?void 0:globalThis.CSS)!=null&&$.supports("object-view-box: xywh(1px 1px 1px 1px)")),A=({src:e,imageRef:r,coords:s,idx:d})=>{const a=N("imageDimensions",()=>({})),t=b(0);return C(()=>g(e),o=>{if(!x||o in a.value)return;a.value[o]=[0,0];const c=new Image;c.onload=async()=>{a.value[o]=[c.width??0,c.height??0]},c.src=o},{immediate:!0}),C(()=>g(r),o=>{var c;o&&(t.value=((c=r.value)==null?void 0:c.clientWidth)??0)},{immediate:!0}),E(()=>{if(!x)return null;const[o,c]=a.value[g(e)]??[0,0],{x:p,y:f,width:m,height:n}=[g(s)].flat()[g(d??0)];if(!t.value||!o||!x)return{};const h=o/m,v=p/(o-m),w=f/(c-n);return{backgroundSize:`${h*100}%`,backgroundPositionX:`${v*100}%`,backgroundPositionY:`${w*100}%`,backgroundImage:`url(${g(e)})`}})},ee=window.setInterval,S=new Set;W(()=>{ee(()=>{S.forEach(e=>e())},1500)});const ae=e=>(S.add(e),()=>{S.delete(e)}),te=k({__name:"GameIcon",props:{src:{},coords:{},padding:{default:()=>[0,0,0,0]}},setup(e){const r=b(0),s=G(),d=K("image"),a=A({src:e.src,imageRef:d,coords:e.coords,idx:r}),t=E(()=>{if(a.value)return{is:"div",style:a.value};const[o,c,p,f]=e.padding,{x:m=0,y:n=0,width:h=1,height:v=1}=Array.isArray(e.coords)?e.coords[r.value]??{}:e.coords??{};return{is:"img",src:e.src,style:{"object-view-box":`xywh(${m+f}px ${n+o}px ${h-c-f}px ${v-p-o}px)`}}});return V(o=>{if(!Array.isArray(e.coords))return;const c=ae(()=>{r.value=r.value+1>=e.coords.length?0:r.value+1});o(c)}),(o,c)=>(U(),X(Z(_(t).is),Y({style:_(t).style,src:_(t).src},_(s),{class:"icon",ref:"image"}),null,16,["style","src"]))}}),ne=q(te,[["__scopeId","data-v-f7949771"]]);export{ne as _,re as u};
